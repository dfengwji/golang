var __reflect=this&&this.__reflect||function(e,t,o){e.__class__=t,o?o.push(t):o=[t],e.__types__=e.__types__?o.concat(e.__types__):o},__extends=this&&this.__extends||function(){var e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)t.hasOwnProperty(o)&&(e[o]=t[o])};return function(t,o){function n(){this.constructor=t}e(t,o),t.prototype=null===o?Object.create(o):(n.prototype=o.prototype,new n)}}(),eas;!function(e){var t=function(t){function o(){var e=t.call(this)||this;return e._opened=!1,e._init=!1,e.param=null,e.addEventListener(egret.Event.ADDED_TO_STAGE,e.onAddedToStage,e),e.addEventListener(egret.Event.REMOVED_FROM_STAGE,e.onRemovedFromStage,e),e.addEventListener(eui.UIEvent.COMPLETE,e.onChildrenComplete,e),e}return __extends(o,t),o.prototype.onChildrenComplete=function(e){this._init||(this._init=!0,this.init(),this._opened&&this.opened())},o.prototype.onAddedToStage=function(e){this._opened=!0,this._init&&this.opened()},o.prototype.onRemovedFromStage=function(e){this._opened=!1,this.clear()},o.prototype.setParam=function(t){null==t?this.param=new e.UIParamInfo:this.param=t},o.prototype.drawBackground=function(e,t){var o=new egret.Shape;o.graphics.beginFill(e,1),o.graphics.drawRoundRect(0,0,this.width,this.height,5,5),o.graphics.endFill(),o.filters=t,this.addChildAt(o,0)},o.prototype.drawCircle=function(e,t,o){var n=new egret.Shape;n.graphics.beginFill(e,1),n.graphics.drawCircle(0,0,t),n.graphics.endFill(),null!=o&&o.addChildAt(n,0)},o.prototype.isOpened=function(){return this._opened},o.prototype.init=function(){},o.prototype.opened=function(){},o.prototype.clear=function(){},o.prototype.close=function(){this.parent&&this.parent.contains(this)&&this.parent.removeChild(this)},o}(eui.Component);e.BaseViewer=t,__reflect(t.prototype,"eas.BaseViewer")}(eas||(eas={}));var eas;!function(e){var t=function(){function e(){this.id=0,this.uid="",this.name=""}return e}();e.BaseInfo=t,__reflect(t.prototype,"eas.BaseInfo")}(eas||(eas={}));var eas;!function(e){var t=function(){function t(){}return t.prototype.onResponseHandler=function(t){if(""!=t){e.LogUtil.info("onResponseHandler :: data = "+t);var o=JSON.parse(t),n=o.sta;if(n==e.OptionStatus.Success){var a=o.mod,r=o.opt;this.dealResponse(a,r,o.data)}else{var s=e.LocalManager.getException("Exception.Status."+n);alert(s)}}},t.prototype.onResponseError=function(t){e.LogUtil.info("login failed!!!"+t.data);var o=new e.NotifyInfo;o.value=t.data,e.NotifyManager.getInstance().send(e.NotifyType.OnHttpException,o),alert(t.data)},t.prototype.dealResponse=function(e,t,o){},t.prototype.createLoginJson=function(t,o,n){var a="{";return a+=e.JsonUtil.formatString("username",t)+",",a+=e.JsonUtil.formatString("password",o+"-"+n),a+="}",e.LogUtil.info("create login json = "+a),a},t.prototype.createPostJson=function(t,o,n){var a="{";a+=e.JsonUtil.formatNumber("mod",t)+",",a+=e.JsonUtil.formatNumber("opt",o)+",";var r="{";if(null!=n&&n.length>0)for(var s=n.length,i=0;i<n.length;i++){var p=n[i];r+="string"==typeof p.value?s-1>i?e.JsonUtil.formatString(p.key,p.value)+",":e.JsonUtil.formatString(p.key,p.value):"number"==typeof p.value?s-1>i?e.JsonUtil.formatNumber(p.key,p.value)+",":e.JsonUtil.formatNumber(p.key,p.value):s-1>i?e.JsonUtil.formatObject(p.key,p.value)+",":e.JsonUtil.formatObject(p.key,p.value)}return r+="}",a+=e.JsonUtil.formatObject("body",r),a+="}",e.LogUtil.info("create post json = "+a),a},t.prototype.checkURL=function(t){var o="";return o=e.AppProxy.isRelease?e.URL_Release:e.URL_Develop,t==e.ModuleType.Login_Teacher?o+e.Address_Login_School:t==e.ModuleType.Login?o+e.Address_Login:t==e.ModuleType.Upload?o+e.Address_Upload:o+e.Address_API},t.prototype.createBodyJson=function(t,o,n){var a="{";a+=e.JsonUtil.formatNumber("mod",t)+",",a+=e.JsonUtil.formatNumber("opt",o)+",";var r="{";if(null!=n&&n.length>0)for(var s=n.length,i=0;i<n.length;i++){var p=n[i];r+="string"==typeof p.value?s-1>i?e.JsonUtil.formatString(p.key,p.value)+",":e.JsonUtil.formatString(p.key,p.value):"number"==typeof p.value?s-1>i?e.JsonUtil.formatNumber(p.key,p.value)+",":e.JsonUtil.formatNumber(p.key,p.value):s-1>i?e.JsonUtil.formatObj(p.key,p.value)+",":e.JsonUtil.formatObj(p.key,p.value)}return r+="}",a+=e.JsonUtil.formatObject("body",r),a+="}",e.LogUtil.info("create body json = "+a),a},t.jsonHeaders=new Array,t.fileHeaders=new Array,t}();e.BaseProxy=t,__reflect(t.prototype,"eas.BaseProxy")}(eas||(eas={}));var eas;!function(e){var t=function(t){function o(o){var n=t.call(this)||this;return n.userLabel=null,n.roleLabel=null,n.tipLabel=null,n.copyLabel=null,n.type=e.PageType.Unknown,n.type=o,n.width=1280,n.height=1080,n}return __extends(o,t),o.prototype.getType=function(){return this.type},o.prototype.opened=function(){if(this.tipLabel&&(this.tipLabel.text=e.LocalManager.getPopupwin("Login.Welcome.Tip")),this.userLabel&&(this.userLabel.text=e.AppProxy.getInstance().user.name),this.roleLabel){var t=e.AppProxy.getInstance().user.type;t==e.RoleType.SuperAdmin?this.roleLabel.text=e.LocalManager.getPopupwin("Role.Type.Super"):t==e.RoleType.SchoolAdmin?this.roleLabel.text=e.LocalManager.getPopupwin("Role.Type.School"):this.roleLabel.text=e.LocalManager.getPopupwin("Role.Type.Teacher")}this.copyLabel&&(this.copyLabel.text=e.LocalManager.getPopupwin("Page.Copyright.Tip"))},o}(e.BaseViewer);e.AppPage=t,__reflect(t.prototype,"eas.AppPage")}(eas||(eas={}));var eas;!function(e){var t=function(t){function o(o){var n=t.call(this)||this;return n.type=e.PanelType.Unknown,n.titleLabel=null,n.closeButton=null,n.moveArea=null,n.offsetPointX=0,n.offsetPointY=0,n.type=o,n.addEventListener(egret.TouchEvent.TOUCH_BEGIN,n.onWindowTouchBegin,n,!1,100),n}return __extends(o,t),o.prototype.onWindowTouchBegin=function(e){this.parent.addChild(this)},o.prototype.onMouseHandle=function(t){e.AppProxy.getInstance().user.type==e.RoleType.SchoolAdmin&&(t.type==e.MouseEvent.MOUSE_OVER?egret.Tween.get(this.closeButton,{loop:!1}).to({scaleX:1.1,scaleY:1.1},.3,egret.Ease.backInOut):egret.Tween.get(this.closeButton,{loop:!1}).to({scaleX:1,scaleY:1},.3,egret.Ease.backInOut))},Object.defineProperty(o.prototype,"elementsContent",{set:function(e){if(e)for(var t=e.length,o=0;t>o;o++)this.addChild(e[o])},enumerable:!0,configurable:!0}),Object.defineProperty(o.prototype,"title",{set:function(e){this.titleLabel&&(this.titleLabel.text=e)},enumerable:!0,configurable:!0}),o.prototype.getType=function(){return this.type},o.prototype.onTouchBegin=function(e){this.includeInLayout=!1,this.offsetPointX=this.x-e.stageX,this.offsetPointY=this.y-e.stageY,this.stage.addEventListener(egret.TouchEvent.TOUCH_MOVE,this.onTouchMove,this),this.stage.addEventListener(egret.TouchEvent.TOUCH_END,this.onTouchEnd,this)},o.prototype.onTouchMove=function(e){this.x=e.stageX+this.offsetPointX,this.y=e.stageY+this.offsetPointY},o.prototype.onTouchEnd=function(e){var t=e.currentTarget;t.removeEventListener(egret.TouchEvent.TOUCH_MOVE,this.onTouchMove,this),t.removeEventListener(egret.TouchEvent.TOUCH_END,this.onTouchEnd,this)},o.prototype.onCloseButtonClick=function(e){eui.UIEvent.dispatchUIEvent(this,eui.UIEvent.CLOSING,!0,!0)&&this.close()},o.prototype.partAdded=function(o,n){t.prototype.partAdded.call(this,o,n),n==this.moveArea?(this.moveArea.touchEnabled=!1,this.moveArea.addEventListener(egret.TouchEvent.TOUCH_BEGIN,this.onTouchBegin,this)):n==this.closeButton&&(this.closeButton.touchEnabled=!0,this.closeButton.addEventListener(egret.TouchEvent.TOUCH_TAP,this.onCloseButtonClick,this),this.closeButton.addEventListener(e.MouseEvent.MOUSE_OVER,this.onMouseHandle,this),this.closeButton.addEventListener(e.MouseEvent.MOUSE_OUT,this.onMouseHandle,this))},o.prototype.partRemoved=function(e,o){t.prototype.partRemoved.call(this,e,o),o==this.moveArea?this.moveArea.removeEventListener(egret.TouchEvent.TOUCH_BEGIN,this.onTouchBegin,this):o==this.closeButton&&this.closeButton.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.onCloseButtonClick,this)},o.prototype.init=function(){this.drawBackground(14869218,[new egret.DropShadowFilter(1,45,13882323,.3,2,2,50,1,!1),new egret.DropShadowFilter(1,135,13882323,.3,2,2,50,1,!1)]),this.moveArea.touchEnabled=!0},o}(e.BaseViewer);e.AppPanel=t,__reflect(t.prototype,"eas.AppPanel")}(eas||(eas={}));var eas;!function(e){var t=function(t){function o(o){var n=t.call(this)||this;return n.type=e.PartType.Unknown,n.identify="",n.type=o,n}return __extends(o,t),o.prototype.getType=function(){return this.type},o.prototype.init=function(){this.drawBackground(16777215,null)},o}(e.BaseViewer);e.AppParts=t,__reflect(t.prototype,"eas.AppParts")}(eas||(eas={}));var eas;!function(e){var t=function(t){function o(o){var n=t.call(this)||this;return n.type=e.WindowType.Unknown,n.titleLabel=null,n.closeButton=null,n.type=o,n}return __extends(o,t),o.prototype.getType=function(){return this.type},Object.defineProperty(o.prototype,"title",{set:function(e){this.titleLabel&&(this.titleLabel.text=this.title)},enumerable:!0,configurable:!0}),o.prototype.onCloseButtonClick=function(t){eui.UIEvent.dispatchUIEvent(this,eui.UIEvent.CLOSING,!0,!0)&&e.UIManager.getInstance().closeWindow()},o.prototype.partAdded=function(e,o){t.prototype.partAdded.call(this,e,o),o==this.closeButton&&(this.closeButton.touchEnabled=!0,this.closeButton.addEventListener(egret.TouchEvent.TOUCH_TAP,this.onCloseButtonClick,this))},o.prototype.partRemoved=function(e,o){t.prototype.partRemoved.call(this,e,o),o==this.closeButton&&this.closeButton.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.onCloseButtonClick,this)},o.prototype.init=function(){this.drawBackground(14869218,[new egret.DropShadowFilter(1,45,13882323,.3,2,2,50,1,!1),new egret.DropShadowFilter(1,135,13882323,.3,2,2,50,1,!1)])},o}(e.BaseViewer);e.AppWindow=t,__reflect(t.prototype,"eas.AppWindow")}(eas||(eas={}));var eas;!function(e){var t=function(){function t(t,o,n,a){void 0===a&&(a=12),this.itemBox=null,this.pageBox=null,this.pageHelper=null,this.parts=[],this._show=!1,this.itemType=e.PartType.Unknown,this.itemType=t,this.itemBox=o,this.pageBox=n,this.pageHelper=new e.PageHelper(a)}return Object.defineProperty(t.prototype,"isShow",{get:function(){return this._show},enumerable:!0,configurable:!0}),t.prototype.createButton=function(e){var t=new eui.Button;return t.skinName="resource/zui_skins/ZButtonSkin.exml",t.label=e,t.width=160,t.height=40,t},t.prototype.appear=function(){this._show||(this._show=!0,this.updateItems(this.pageHelper.getCurrentPage()))},t.prototype.disappear=function(){this._show=!1;for(var t=0,o=this.parts;t<o.length;t++){var n=o[t];e.PoolManager.getInstance().deactivePart(n)}},t.prototype.updateData=function(t){for(var o=0,n=this.parts;o<n.length;o++){var a=n[o];e.PoolManager.getInstance().deactivePart(a)}this.pageHelper.updateAllItems(t),e.LogUtil.info("update page Data ...length = "+t.length+"; max page = "+this.pageHelper.maxPage),this._show&&this.updateItems(this.pageHelper.getCurrentPage())},t.prototype.updateItems=function(e){if(null!=e)for(var t=0;t<e.length;t++){var o=this.createPart(e[t].uid);this.parts.push(o),this.itemBox.addChild(o)}},t.prototype.onTouchItem=function(e){},t.prototype.createPart=function(t){var o=e.PoolManager.getInstance().activePart(this.itemType);return o.identify=t,o.touchEnabled=!0,o.addEventListener(egret.TouchEvent.TOUCH_TAP,this.onTouchItem,this),o},t}();e.PageBox=t,__reflect(t.prototype,"eas.PageBox",["eas.IViewerBox"])}(eas||(eas={}));var eas;!function(e){var t=function(t){function o(){return t.call(this)||this}return __extends(o,t),o.prototype.tryGetTeachers=function(t){var o=[];o.push(new e.KeyValueInfo("school",t));var n=this.createPostJson(e.ModuleType.Teacher,e.TeacherCode.GetAll,o);e.HttpProxy.create().success(this.onResponseHandler,this).error(this.onResponseError,this).param(n).headers(e.BaseProxy.jsonHeaders).dataFormat(egret.URLLoaderDataFormat.TEXT).post(this.checkURL(e.ModuleType.Teacher))},o.prototype.tryGetTeacher=function(t){var o=[];o.push(new e.KeyValueInfo("uid",t));var n=this.createPostJson(e.ModuleType.Teacher,e.TeacherCode.GetInfo,o);e.HttpProxy.create().success(this.onResponseHandler,this).error(this.onResponseError,this).param(n).headers(e.BaseProxy.jsonHeaders).dataFormat(egret.URLLoaderDataFormat.TEXT).post(this.checkURL(e.ModuleType.Teacher))},o.prototype.parsePaperJson=function(t){var o=new e.TestPaperInfo;o.name=t.name,o.id=t.id,o.uid=t.uid;for(var n=0,a=t.practices;n<a.length;n++){var r=a[n];o.practices.push(r)}return o.course=t.course,o},o.prototype.parseTeacherJson=function(t){var o=new e.TeacherInfo;if(o.name=t.name,o.id=t.id,o.uid=t.uid,o.email=t.email,o.phone=t.phone,null!=t.papers)for(var n=0,a=t.papers;n<a.length;n++){var r=a[n],s=this.parsePaperJson(r);o.addPaper(s)}return o},o.prototype.dealResponse=function(t,o,n){if(t==e.ModuleType.Teacher){var a=new e.NotifyInfo;if(a.type=t,a.code=o,o==e.TeacherCode.GetAll){for(var r=e.AppProxy.getInstance().getDefSchool(),s=0,i=n;s<i.length;s++){var p=i[s],l=this.parseTeacherJson(p);null!=r&&r.addTeacher(l)}e.NotifyManager.getInstance().send(e.NotifyType.OnHttpResponse,a)}else if(o==e.TeacherCode.GetInfo){var l=this.parseTeacherJson(n),r=e.AppProxy.getInstance().getDefSchool();null!=r&&r.addTeacher(l),e.NotifyManager.getInstance().send(e.NotifyType.OnHttpResponse,a)}}else t==e.ModuleType.TestPaper},o}(e.BaseProxy);e.TeacherProxy=t,__reflect(t.prototype,"eas.TeacherProxy")}(eas||(eas={}));var eas;!function(e){var t;!function(e){e[e.Login_Teacher=-1]="Login_Teacher",e[e.Login=0]="Login",e[e.Admin=1]="Admin",e[e.School=2]="School",e[e.Practice=3]="Practice",e[e.Course=4]="Course",e[e.Classroom=5]="Classroom",e[e.Teacher=6]="Teacher",e[e.TestPaper=7]="TestPaper",e[e.Classes=8]="Classes",e[e.Upload=9]="Upload"}(t=e.ModuleType||(e.ModuleType={}));var o;!function(e){e[e.AddSchools=1]="AddSchools",e[e.AddTeachers=2]="AddTeachers",e[e.AddStudents=3]="AddStudents",e[e.AddPractices=4]="AddPractices"}(o=e.UploadCode||(e.UploadCode={}));var n;!function(e){e[e.User=1]="User",e[e.UpdatePassword=2]="UpdatePassword",e[e.GetAll=3]="GetAll",e[e.AddOne=4]="AddOne",e[e.Remove=5]="Remove",e[e.Logout=6]="Logout"}(n=e.AdminCode||(e.AdminCode={}));var a;!function(e){e[e.GetInfo=1]="GetInfo",e[e.GetAll=2]="GetAll",e[e.Add=3]="Add",e[e.Remove=4]="Remove",e[e.Update=5]="Update"}(a=e.SchoolCode||(e.SchoolCode={}));var r;!function(e){e[e.GetInfo=1]="GetInfo",e[e.GetAll=2]="GetAll",e[e.Add=3]="Add",e[e.Remove=4]="Remove",e[e.Update=5]="Update"}(r=e.TeacherCode||(e.TeacherCode={}));var s;!function(e){e[e.GetInfo=1]="GetInfo",e[e.GetAll=2]="GetAll"}(s=e.CourseCode||(e.CourseCode={}));var i;!function(e){e[e.GetInfo=1]="GetInfo",e[e.GetAll=2]="GetAll",e[e.Add=3]="Add",e[e.Remove=4]="Remove"}(i=e.PracticeCode||(e.PracticeCode={}));var p;!function(e){e[e.GetAll=1]="GetAll",e[e.Add=2]="Add",e[e.Remove=3]="Remove",e[e.Update=4]="Update"}(p=e.PaperCode||(e.PaperCode={}));var l;!function(e){e[e.GetInfo=1]="GetInfo",e[e.GetAll=2]="GetAll"}(l=e.ClassesCode||(e.ClassesCode={}));var u;!function(e){e[e.ApplyGetUser=1]="ApplyGetUser",e[e.ApplyGetAll=2]="ApplyGetAll",e[e.ApplyOrder=3]="ApplyOrder",e[e.ApplyRemove=4]="ApplyRemove",e[e.ApplyFreeze=5]="ApplyFreeze",e[e.ApplyRefuse=6]="ApplyRefuse",e[e.ApplyAgree=7]="ApplyAgree"}(u=e.ClassroomCode||(e.ClassroomCode={}))}(eas||(eas={}));var eas;!function(e){var t;!function(e){e[e.Null=0]="Null",e[e.OnHttpResponse=1]="OnHttpResponse",e[e.OnHttpException=2]="OnHttpException",e[e.OnImageUpdate=3]="OnImageUpdate",e[e.OnPaperSelected=4]="OnPaperSelected"}(t=e.NotifyType||(e.NotifyType={}))}(eas||(eas={}));var eas;!function(e){var t;!function(e){e[e.Success=0]="Success"}(t=e.OptionStatus||(e.OptionStatus={}))}(eas||(eas={}));var eas;!function(e){var t;!function(e){e[e.Single=1]="Single",e[e.Multiple=2]="Multiple",e[e.Judgment=3]="Judgment"}(t=e.PracticeType||(e.PracticeType={}))}(eas||(eas={}));var eas;!function(e){var t;!function(e){e[e.SuperAdmin=0]="SuperAdmin",e[e.SchoolAdmin=1]="SchoolAdmin",e[e.Teacher=2]="Teacher"}(t=e.RoleType||(e.RoleType={}))}(eas||(eas={}));var eas;!function(e){var t;!function(e){e[e.Unknown=0]="Unknown",e[e.Map=1]="Map",e[e.Login=2]="Login",e[e.SuperHome=3]="SuperHome",e[e.SchoolHome=4]="SchoolHome",e[e.TeacherHome=5]="TeacherHome"}(t=e.PageType||(e.PageType={}));var o;!function(e){e[e.Unknown=0]="Unknown",e[e.UserInfo=1]="UserInfo",e[e.SchoolAdd=2]="SchoolAdd",e[e.AdminAdd=3]="AdminAdd",e[e.PracticeAdd=4]="PracticeAdd",e[e.CourseInfo=5]="CourseInfo",e[e.TeacherInfo=6]="TeacherInfo",e[e.StudentInfo=7]="StudentInfo",e[e.PaperInfo=8]="PaperInfo",e[e.ClassAdd=9]="ClassAdd"}(o=e.PanelType||(e.PanelType={}));var n;!function(e){e[e.Unknown=0]="Unknown",e[e.Alert=1]="Alert",e[e.ApplyInfo=2]="ApplyInfo",e[e.PaperCreate=3]="PaperCreate",e[e.ApplyRoom=4]="ApplyRoom"}(n=e.WindowType||(e.WindowType={}));var a;!function(e){e[e.Unknown=0]="Unknown",e[e.School=1]="School",e[e.Paper=2]="Paper",e[e.Course=3]="Course",e[e.CourseApply=4]="CourseApply",e[e.Teacher=5]="Teacher",e[e.PracticeItem=6]="PracticeItem",e[e.PracticeView=7]="PracticeView",e[e.PracticeOption=8]="PracticeOption",e[e.Classes=9]="Classes",e[e.Admin=10]="Admin"}(a=e.PartType||(e.PartType={}))}(eas||(eas={}));var eas;!function(e){var t;!function(e){e[e.Unknown=0]="Unknown",e[e.Monday=1]="Monday",e[e.Tuesday=2]="Tuesday",e[e.Wednesday=3]="Wednesday",e[e.Thursday=4]="Thursday",e[e.Friday=5]="Friday",e[e.Saturday=6]="Saturday",e[e.Sunday=7]="Sunday"}(t=e.WeekEnum||(e.WeekEnum={}))}(eas||(eas={}));var eas;!function(e){var t=function(t){function o(o,n,a,r){var s=t.call(this,o,!1,!1,r)||this;return s.part=e.PartType.Unknown,s.uid="",s.part=n,s.uid=a,s}return __extends(o,t),o.TOUCH_ITEM="touchBoxItem",o.TOUCH_CELL="touchBoxCell",o.TOUCH_CHILD="touchBoxChild",o}(egret.Event);e.ItemEvent=t,__reflect(t.prototype,"eas.ItemEvent")}(eas||(eas={})),egret.DisplayObject.prototype.$getConcatenatedVisible=function(){if(this.$parent){var e=this.$parent.$getConcatenatedVisible();return e&&this.$visible}return this.$visible};var eas;!function(e){var t,o,n,a=function(a,r,s,i){if(a!=e.MouseEvent.ROLL_OVER||!t.isRollOver){if(a==e.MouseEvent.ROLL_OVER?t.isRollOver=!0:a==e.MouseEvent.ROLL_OUT&&delete t.isRollOver,n&&t.buttonModeForMouse)try{var p=o.$displayList.renderBuffer.surface;a==e.MouseEvent.ROLL_OVER?p.style.cursor="pointer":a==e.MouseEvent.ROLL_OUT&&(p.style.cursor="auto")}catch(l){}egret.TouchEvent.dispatchTouchEvent(t,a,r,!1,s,i,null)}};e.enable=function(i){n="Windows PC"==egret.Capabilities.os||"Mac OS"==egret.Capabilities.os,o=i,n&&s();var p=function(o,n){t&&!t.$stage&&(a(e.MouseEvent.MOUSE_OUT,!0,o,n),a(e.MouseEvent.ROLL_OUT,!1,o,n),t=null);var r=i.$hitTest(o,n);null!=r&&r!=i?t?r!=t&&(a(e.MouseEvent.MOUSE_OUT,!0,o,n),t.$getConcatenatedVisible()&&t.hitTestPoint(o,n,!0)||a(e.MouseEvent.ROLL_OUT,!1,o,n),t=r,a(e.MouseEvent.ROLL_OVER,!1,o,n),a(e.MouseEvent.MOUSE_OVER,!0,o,n)):(t=r,a(e.MouseEvent.ROLL_OVER,!1,o,n),a(e.MouseEvent.MOUSE_OVER,!0,o,n)):t&&(a(e.MouseEvent.MOUSE_OUT,!0,o,n),a(e.MouseEvent.ROLL_OUT,!1,o,n),t=null)},l=0/0,u=0/0,c=egret.sys.TouchHandler.prototype.onTouchMove;egret.sys.TouchHandler.prototype.onTouchMove=function(t,n,a){if(l=t,u=n,c.call(this,t,n,a),r){var s=o.$hitTest(t,n);s||(s=o),egret.TouchEvent.dispatchTouchEvent(s,e.MouseEvent.MOUSE_MOVE,!0,!0,t,n,a,!0)}p(t,n)};var h=egret.sys.TouchHandler.prototype.onTouchBegin;egret.sys.TouchHandler.prototype.onTouchBegin=function(e,t,o){h.call(this,e,t,o),p(e,t)};var d=!1,g=egret.web.WebTouchHandler.prototype.getLocation;egret.web.WebTouchHandler.prototype.getLocation=function(e){return 0==e.buttons&&(d=!0),g.call(this,e)};var f=egret.sys.TouchHandler.prototype.onTouchEnd;egret.sys.TouchHandler.prototype.onTouchEnd=function(t,n,a){if(d){if(d=!1,l=t,u=n,f.call(this,t,n,a),r){var s=o.$hitTest(t,n);s||(s=o),egret.TouchEvent.dispatchTouchEvent(s,e.MouseEvent.MOUSE_MOVE,!0,!0,t,n,a,!0)}}else f.call(this,t,n,a),p(t,n)},i.addEventListener(egret.Event.ENTER_FRAME,function(){0/0!=l&&0/0!=u&&p(l,u)},null)},e.setButtonMode=function(e,t){e.buttonModeForMouse=t};var r=!1;e.setMouseMoveEnabled=function(e){r=e};var s=function(){var t="mousewheel",n=function(t){var n=t.type;("DOMMouseScroll"==n||"mousewheel"==n)&&(t.delta=t.wheelDelta?t.wheelDelta:-(t.detail||0),o.dispatchEventWith(e.MouseEvent.MOUSE_WHEEL,!1,t.delta))};window.addEventListener?("mousewheel"===t&&void 0!==document.mozFullScreen&&(t="DOMMouseScroll"),window.addEventListener(t,function(e){n(e)},!1)):window.attachEvent&&window.attachEvent("on"+t,function(e){e=e||window.event,n(e)})}}(eas||(eas={}));var eas;!function(e){var t=function(){function e(){}return e.MOUSE_MOVE="mouseMove",e.MOUSE_OVER="mouseOver",e.MOUSE_OUT="mouseOut",e.ROLL_OVER="rollOver",e.ROLL_OUT="rollOut",e.MOUSE_WHEEL="mouseWheel",e}();e.MouseEvent=t,__reflect(t.prototype,"eas.MouseEvent")}(eas||(eas={}));var eas;!function(e){var t=function(e){function t(t,o,n,a){return void 0===o&&(o=!1),void 0===n&&(n=!1),e.call(this,t,o,n)||this}return __extends(t,e),t}(egret.Event);e.NotifyEvent=t,__reflect(t.prototype,"eas.NotifyEvent")}(eas||(eas={}));var eas;!function(e){var t=function(){function t(){if(this._provinces=[],t.isInit)throw new Error("AddressManager is a singleton,please use AddressManager.getInstance()！");for(var o=RES.getRes("location_json"),n=0;n<o.provinces.length;n++){var a=o.provinces[n],r=new e.ProvinceInfo;r.id=a.id,r.name=a.name,r.addCities(a.cities),this._provinces.push(r)}}return t.getInstance=function(){return null==t.instance&&(t.instance=new t,t.isInit=!0),t.instance},t.prototype.init=function(){},Object.defineProperty(t.prototype,"provinces",{get:function(){return this._provinces},enumerable:!0,configurable:!0}),t.prototype.getProvince=function(e){for(var t=0;t<this._provinces.length;t++)if(this._provinces[t].id==e)return this._provinces[t];return null},t.prototype.getCity=function(e,t){var o=this.getProvince(e);return null!=o?o.getCity(t):null},t.instance=null,t.isInit=!1,t}();e.AddressManager=t,__reflect(t.prototype,"eas.AddressManager")}(eas||(eas={}));var eas;!function(e){var t=function(){function e(){this.uid="",this.identify="",this.url="",this.index=0}return e}();__reflect(t.prototype,"RequestInfo");var o=function(){function e(){this.uid="",this.identify="",this.texture=null,this.url="",this.index=0}return e}();e.ImageInfo=o,__reflect(o.prototype,"eas.ImageInfo");var n=function(){function n(){if(this.isLoading=!1,this.textures=[],this.requests=[],this.loader=null,n.isInit)throw new Error("ImageManager is a singleton,please use ImageManager.getInstance()！");this.loader=new egret.ImageLoader,this.loader.addEventListener(egret.Event.COMPLETE,this.onLoadComplete,this),this.loader.addEventListener(egret.IOErrorEvent.IO_ERROR,this.onLoadError,this)}return n.getInstance=function(){return null==n.instance&&(n.instance=new n,n.isInit=!0),n.instance},n.prototype.getUID=function(e,t){return e+"_"+t},n.prototype.hasRequest=function(e){for(var t=0;t<this.requests.length;t++)if(this.requests[t].uid==e)return!0;return!1},n.prototype.tryLoad=function(e,o){var n=this.getUID(e,0);if(!this.hasRequest(n)){var a=new t;a.identify=e,a.uid=n,a.url=o,this.requests.push(a),this.loadNext()}},n.prototype.getTexture=function(e){for(var t=0;t<this.textures.length;t++)if(this.textures[t].identify==e)return this.textures[t].texture;return null},n.prototype.getImageInfo=function(e,t){var o=this.getUID(e,0),n=this.getInfo(o);return null!=n?n:(this.tryLoad(e,t),null)},n.prototype.getInfo=function(e){for(var t=0;t<this.textures.length;t++)if(this.textures[t].uid==e)return this.textures[t];return null},n.prototype.removeRequest=function(e){for(var t=0;t<this.requests.length;t++)if(this.requests[t].uid==e)return void this.requests.splice(t,1)},n.prototype.loadNext=function(){this.isLoading||this.requests.length>0&&this.load()},n.prototype.load=function(){var e=this.requests[0];this.isLoading=!0,this.loader.load(e.url),RES.getResByUrl(e.url,this.onLoadEnd,this,RES.ResourceItem.TYPE_IMAGE)},n.prototype.onLoadEnd=function(t,n){var a=this.requests[0],r=new o;r.identify=a.identify,r.uid=a.uid,r.texture=t,this.requests.splice(0,1),this.isLoading=!1;var s=new e.NotifyInfo;s.uid=r.identify,this.loadNext()},n.prototype.onLoadError=function(e){this.requests.splice(0,1),this.isLoading=!1,this.loadNext()},n.prototype.onLoadComplete=function(e){},n.instance=null,n.isInit=!1,n}();e.ImageManager=n,__reflect(n.prototype,"eas.ImageManager")}(eas||(eas={}));var eas;!function(e){var t;!function(e){e[e.POPUPWIN=0]="POPUPWIN",e[e.EXCEPTION=1]="EXCEPTION"}(t||(t={}));var o;!function(e){e[e.ZH_CN=0]="ZH_CN",e[e.EN_US=1]="EN_US"}(o||(o={}));var n=function(){function n(){if(this._popupwinDic=[],this._exceptionDic=[],this.country=o.ZH_CN,n._isInit)throw new Error("LocalManager is a singleton,please use LocalManager.getInstance()！");this.switchLocal(o.ZH_CN)}return n.getInstance=function(){return null==n._instance&&(n._isInit=!1,n._instance=new n,n._isInit=!0),n._instance},n.prototype.switchLocal=function(e){this.country=e;var t=RES.getRes("popwin_txt");this._popupwinDic=this.readText(t);var o=RES.getRes("exception_txt");this._exceptionDic=this.readText(o)},n.prototype.readText=function(t){for(var o=new Array,n=t.split("\n"),a=n.length,r=0;a>r;r++){var s=n[r].split("=");if(s.length>1){var i=s[1].trim(),p=i.indexOf("[n]"),l="";if(p>-1)for(var u=i.split("[n]"),c=0,h=u;c<h.length;c++){var d=h[c];l+=d+"\n"}else l=i;o.push(new e.KeyValueInfo(s[0].trim(),l))}}return o},n.prototype.getDicByType=function(e){return e==t.EXCEPTION?this._exceptionDic:e==t.POPUPWIN?this._popupwinDic:null},n.prototype.getString=function(t,o,n){var a=this.getDicByType(o);if(null==a)throw new Error("locale language manager can not find file!!!");for(var r=0,s=a.length;s>r;r++)if(a[r].key==t)return null!=n?e.MathUtil.formatString(a[r].value,n):a[r].value;egret.log("can not find the key = "+t+" in local language!!!!");a[t];return""},n.getPopupwin=function(e,o){return void 0===o&&(o=null),n.getInstance().getString(e,t.POPUPWIN,o)},n.getException=function(e,o){return void 0===o&&(o=null),n.getInstance().getString(e,t.EXCEPTION,o)},n._instance=null,n._isInit=!0,n}();e.LocalManager=n,__reflect(n.prototype,"eas.LocalManager")}(eas||(eas={}));var eas;!function(e){var t=function(){function t(t,o,n){this.target=null,this.notify=e.NotifyType.Null,this.callFun=null,this.callFun=n,this.notify=t,this.target=o}return t.prototype.call=function(e){null!=this.call&&null!=this.target&&this.callFun.call(this.target,e)},t.prototype.clear=function(){this.target=null,this.notify=0,this.callFun=null},t}();__reflect(t.prototype,"NotifyAction");var o=function(){function t(t,o){this.notify=e.NotifyType.Null,this.array=[],this.notify=t,this.array=o}return t}();__reflect(o.prototype,"NotifyMap");var n=function(){function t(){this.notify=e.NotifyType.Null,this.target=null,this.param=null}return t}();__reflect(n.prototype,"NotifyObject");var a=function(){function a(){if(this.actions=null,this.notifyList=[],this.cacheNotifys=[],a.isInit)throw new Error("NotifyManager is a singleton,please use NotifyManager.getInstance()！");this.actions=new Array}return a.getInstance=function(){return null==a.instance&&(a.instance=new a,a.isInit=!0),a.instance},a.prototype.getActions=function(e){for(var t=0,o=this.actions.length;o>t;t++)if(this.actions[t].notify==e)return this.actions[t].array;return null},a.prototype.update=function(){if(this.notifyList.length>0){for(var t=0,o=this.notifyList.length;o>t;t++){var n=this.notifyList[t];this.excuteAction(n.notify,n.target,n.param)}this.notifyList.splice(0)}this.cacheNotifys.length>0&&(e.MathUtil.combineArray(this.notifyList,this.cacheNotifys),this.cacheNotifys.splice(0))},a.prototype.register=function(e,n,a){var r=this.getActions(e);if(null!=r){for(var s=0;s<r.length;s++)if(null!=n&&r[s].target==n){r.splice(s,1);break}r.push(new t(e,n,a))}else r=new Array,r.push(new t(e,n,a)),this.actions.push(new o(e,r))},a.prototype.remove=function(e,t){var o=this.getActions(e);if(null!=o)for(var n=0;n<o.length;n++)if(o[n].target==t){o[n].clear(),o.splice(n,1);break}},a.prototype.removeAll=function(e){var t=this.getActions(e);if(null!=t){for(var o=0;o<t.length;o++)t[o].clear();t.splice(0)}for(var o=0,n=this.actions.length;n>o;o++)if(this.actions[o].notify==e){this.actions.splice(o,1);break}},a.prototype.excuteAction=function(e,t,o){var n=this.getActions(e);if(null!=n)for(var a=0;a<n.length;a++){if(null!=t&&n[a].target==t){n[a].call(o);break}n[a].call(o)}},a.prototype.send=function(e,t,o){void 0===o&&(o=null);var a=new n;a.notify=e,a.target=o,a.param=t,this.cacheNotifys.push(a)},a.instance=null,a.isInit=!1,a}();e.NotifyManager=a,__reflect(a.prototype,"eas.NotifyManager")}(eas||(eas={}));var eas;!function(e){var t=function(){function t(){if(this.components=[],t.isInit)throw new Error("PoolManager is a singleton,please use PoolManager.getInstance()！")}return t.getInstance=function(){return null==t.instance&&(t.instance=new t,t.isInit=!0),t.instance},t.prototype.activePart=function(t){for(var o=0,n=this.components.length;n>o;o++)if(this.components[o].getType()==t&&!this.components[o].isOpened)return this.components[o];var a=null;return null!=a&&a.isOpened()?a:(t==e.PartType.School?a=new e.SchoolPart:t==e.PartType.PracticeItem?a=new e.PracticeItemPart:t==e.PartType.PracticeView?a=new e.PracticeViewPart:t==e.PartType.PracticeOption?a=new e.PracticeOptPart:t==e.PartType.Course?a=new e.CoursePart:t==e.PartType.Teacher?a=new e.TeacherPart:t==e.PartType.Admin?a=new e.AdminPart:t==e.PartType.Classes?a=new e.ClassesPart:t==e.PartType.CourseApply?a=new e.ApplyPart:t==e.PartType.Paper&&(a=new e.PaperPart),null!=a&&this.components.push(a),a)},t.prototype.getPart=function(e){for(var t=0,o=this.components.length;o>t;t++)if(this.components[t].getType()==e)return this.components[t];return null},t.prototype.deactivePart=function(e){null!=e&&e.close()},t.instance=null,t.isInit=!1,t}();e.PoolManager=t,__reflect(t.prototype,"eas.PoolManager")}(eas||(eas={}));var eas;!function(e){var t=function(){function t(){if(this._subjects=[],t.isInit)throw new Error("SubjectManager is a singleton,please use SubjectManager.getInstance()！");for(var o=RES.getRes("subject_json"),n=0;n<o.subjects.length;n++){var a=o.subjects[n],r=new e.SubjectInfo;r.id=a.id,r.name=a.name,r.uid=a.id+"";for(var s=0;s<a.grades.length;s++)r.addGrade(a.grades[s]);this._subjects.push(r)}}return t.getInstance=function(){return null==t.instance&&(t.instance=new t,t.isInit=!0),t.instance},Object.defineProperty(t.prototype,"allGrades",{get:function(){for(var t=[],o=[],n=0,a=this._subjects;n<a.length;n++)for(var r=a[n],s=0,i=r.grades;s<i.length;s++){var p=i[s];if(-1==o.indexOf(p)){var l=new e.BaseInfo;l.id=p,l.name=e.LocalManager.getPopupwin("Grade.Name."+p),o.push(p),t.push(l)}}return t},enumerable:!0,configurable:!0}),t.prototype.getGradeName=function(t){for(var o=0,n=this._subjects;o<n.length;o++){var a=n[o];if(a.hasGrade(t))return e.LocalManager.getPopupwin("Grade.Name."+t)}return""},t.prototype.getSubject=function(t,o){for(var n=0,a=this._subjects;n<a.length;n++){var r=a[n];if(r.hasGrade(t)&&r.uid==o)return new e.KeyValueInfo(r.uid,r.name)}return new e.KeyValueInfo("","")},t.prototype.getSubjects=function(e,t){void 0===t&&(t=!1);for(var o=[],n=0,a=this._subjects;n<a.length;n++){var r=a[n];r.hasGrade(e)&&o.push(r),r.hasGrade(0)&&t&&o.push(r)}return o},t.instance=null,t.isInit=!1,t}();e.SubjectManager=t,__reflect(t.prototype,"eas.SubjectManager")}(eas||(eas={}));var eas;!function(e){var t=function(){function t(){if(this.nowWindow=null,this.windows=[],this.panels=[],this.pages=[],this.uiRoot=null,this.pageBox=null,this.panelBox=null,this.windowBox=null,t.isInit)throw new Error("UIManager is a singleton,please use UIManager.getInstance()！");this.pageBox=new egret.DisplayObjectContainer,this.panelBox=new egret.DisplayObjectContainer,this.windowBox=new egret.DisplayObjectContainer,this.panelBox.width=Main.stageWidth,this.panelBox.height=Main.stageHeight}return t.getInstance=function(){return null==t.instance&&(t.instance=new t,t.isInit=!0),t.instance},t.prototype.setRoot=function(e){this.uiRoot=e,this.uiRoot.addChild(this.pageBox),this.uiRoot.addChild(this.windowBox),this.uiRoot.addChild(this.panelBox)
},t.prototype.hasOpenedWindow=function(){return null==this.nowWindow?!1:!0},t.prototype.openPanel=function(t,o){void 0===o&&(o=null);var n=this.getPanel(t);return null!=n&&n.isOpened()?n:(null==n&&(t==e.PanelType.SchoolAdd?(n=new e.SchoolAddPanel,this.panels.push(n)):t==e.PanelType.CourseInfo?(n=new e.CourseInfoPanel,this.panels.push(n)):t==e.PanelType.PracticeAdd?(n=new e.PracticeAddPanel,this.panels.push(n)):t==e.PanelType.AdminAdd?(n=new e.AdminAddPanel,this.panels.push(n)):t==e.PanelType.TeacherInfo?(n=new e.TeacherInfoPanel,this.panels.push(n)):t==e.PanelType.StudentInfo?(n=new e.StudentInfoPanel,this.panels.push(n)):t==e.PanelType.UserInfo?(n=new e.UserInfoPanel,this.panels.push(n)):t==e.PanelType.PaperInfo?(n=new e.PaperInfoPanel,this.panels.push(n)):t==e.PanelType.ClassAdd&&(n=new e.ClassInfoPanel,this.panels.push(n))),null!=n&&(n.setParam(o),this.panelBox.addChild(n),n.x=.5*this.uiRoot.width-.5*n.width,n.y=.5*(this.uiRoot.height-n.height)),n)},t.prototype.getPanel=function(e){for(var t=0,o=this.panels.length;o>t;t++)if(this.panels[t].getType()==e)return this.panels[t];return null},t.prototype.closePanel=function(e){var t=this.getPanel(e);null!=t&&t.isOpened()&&t.close()},t.prototype.closeAllPanels=function(){for(var e=0,t=this.panels;e<t.length;e++){var o=t[e];o.isOpened&&o.close()}},t.prototype.openPage=function(t,o){void 0===o&&(o=null);var n=this.getPage(t);return null!=n&&n.isOpened()?n:(null==n&&(t==e.PageType.Login?(n=new e.LoginPage,this.pages.push(n)):t==e.PageType.SuperHome?(n=new e.SuperHomePage,this.pages.push(n)):t==e.PageType.SchoolHome?(n=new e.SchoolHomePage,this.pages.push(n)):t==e.PageType.TeacherHome&&(n=new e.TeacherHomePage,this.pages.push(n))),null!=n&&(n.setParam(o),e.LogUtil.info(n.width+"---"+n.height+"---"+this.uiRoot.width+"--"+this.uiRoot.height),n.x=.5*(this.uiRoot.width-n.width),n.y=.5*(this.uiRoot.height-n.height),this.pageBox.addChild(n)),n)},t.prototype.getPage=function(e){for(var t=0,o=this.pages.length;o>t;t++)if(this.pages[t].getType()==e)return this.pages[t];return null},t.prototype.closePage=function(e){var t=this.getPage(e);null!=t&&t.isOpened()&&t.close()},t.prototype.openWindow=function(t,o){if(void 0===o&&(o=null),null!=this.nowWindow)return this.nowWindow;var n=this.getWindow(t);return null!=n&&n.isOpened()?n:(null==n&&(t==e.WindowType.ApplyInfo?(n=new e.ApplyInfoWindow,this.windows.push(n)):t==e.WindowType.Alert?(n=new e.AlertWindow,this.windows.push(n)):t==e.WindowType.ApplyRoom?(n=new e.ApplyRoomWindow,this.windows.push(n)):t==e.WindowType.PaperCreate&&(n=new e.PaperCreateWindow,this.windows.push(n))),null!=n&&(n.setParam(o),this.windowBox.addChild(n),n.x=.5*this.uiRoot.width-.5*n.width,n.y=.5*this.uiRoot.height-.5*n.height,this.nowWindow=n),n)},t.prototype.getOpenedWindow=function(){return this.nowWindow},t.prototype.closeWindow=function(){null!=this.nowWindow&&this.nowWindow.close(),this.nowWindow=null},t.prototype.getWindow=function(e){for(var t=0,o=this.windows.length;o>t;t++)if(this.windows[t].getType()==e)return this.windows[t];return null},t.instance=null,t.isInit=!1,t}();e.UIManager=t,__reflect(t.prototype,"eas.UIManager")}(eas||(eas={}));var eas;!function(e){var t=function(){function t(){this.province=null,this.city=null,this.zone=null,this.town=null,this.street=null,this.province=new e.KeyValueInfo("0",""),this.city=new e.KeyValueInfo("0",""),this.zone=new e.KeyValueInfo("0",""),this.town=new e.KeyValueInfo("0",""),this.street=new e.StreetInfo(0,"")}return t.prototype.toJson=function(){var t="{";return t+=e.JsonUtil.formatNumber("province",Number(this.province.key))+",",t+=e.JsonUtil.formatNumber("city",Number(this.city.key))+",",t+=e.JsonUtil.formatNumber("zone",Number(this.zone.key))+",",t+=e.JsonUtil.formatNumber("town",Number(this.town.key))+",",t+=e.JsonUtil.formatNumber("street",this.street.id),t+="}"},t.prototype.toString=function(){var e="";return""!=this.province.value&&(e+=this.province.value+" "),""!=this.city.value&&(e+=this.city.value+" "),""!=this.zone.value&&(e+=this.zone.value+" "),""!=this.town.value&&(e+=this.town.value+" "),""!=this.street.name&&(e+=this.street.name+" "),e},t}();e.AddressInfo=t,__reflect(t.prototype,"eas.AddressInfo")}(eas||(eas={}));var eas;!function(e){var t=function(t){function o(){var o=t.call(this)||this;return o.phone="",o.school="",o.type=e.RoleType.SuperAdmin,o.password="",o.email="",o}return __extends(o,t),o.prototype.isSuperAdmin=function(){return this.type==e.RoleType.SuperAdmin?!0:!1},o}(e.BaseInfo);e.AdminInfo=t,__reflect(t.prototype,"eas.AdminInfo")}(eas||(eas={}));var eas;!function(e){var t=function(){function t(){this.uid="",this.applicant="",this.period=0,this.status=e.ApplyStatus.Freeze,this.school="",this.classID=0,this.courses=[],this.papers=[],this.date=null}return t.prototype.setDate=function(t){if(e.MathUtil.isNullOrWhiteSpace(t))return void(this.date=new e.DateInfo(0,0,0,0));var o=t.split("-");if(null==o||o.length<3)return void(this.date=new e.DateInfo(0,0,0,0));var n=Number(o[0]),a=Number(o[1]),r=Number(o[2]);this.date=new e.DateInfo(n,a,r,0)},t.prototype.addPaper=function(e){this.papers.push(e)},t.prototype.addCourse=function(e){this.courses.push(e)},t.prototype.toJson=function(){var t="{";return t+=e.JsonUtil.formatString("author",this.applicant)+",",t+=e.JsonUtil.formatNumber("period",this.period)+",",t+=e.JsonUtil.formatStrings("courses",this.courses)+",",t+=e.JsonUtil.formatStrings("papers",this.papers)+",",t+=e.JsonUtil.formatNumber("class",this.classID)+",",t+=e.JsonUtil.formatString("date",this.date.toString()),t+="}"},t}();e.ApplyRoomInfo=t,__reflect(t.prototype,"eas.ApplyRoomInfo")}(eas||(eas={}));var AssetAdapter=function(){function e(){}return e.prototype.getAsset=function(e,t,o){function n(n){t.call(o,n,e)}if(RES.hasRes(e)){var a=RES.getRes(e);a?n(a):RES.getResAsync(e,n,this)}else RES.getResByUrl(e,n,this,RES.ResourceItem.TYPE_IMAGE)},e}();__reflect(AssetAdapter.prototype,"AssetAdapter",["eui.IAssetAdapter"]);var eas;!function(e){var t=function(e){function t(){var t=e.call(this)||this;return t.grade=0,t.sn=0,t.students=[],t}return __extends(t,e),Object.defineProperty(t.prototype,"allStudents",{get:function(){return this.students},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"studentCount",{get:function(){return this.students.length},enumerable:!0,configurable:!0}),t.prototype.addStudent=function(e){null!=e&&this.students.push(e)},t.prototype.updateStudent=function(e){null!=e&&(this.hasStudent(e.uid)&&this.removeStudent(e.uid),this.addStudent(e))},t.prototype.hasStudent=function(e){for(var t=0;t<this.students.length;t++)if(this.students[t].uid==e)return!0;return!1},t.prototype.getStudent=function(e){for(var t=0;t<this.students.length;t++)if(this.students[t].uid==e)return this.students[t]},t.prototype.removeStudent=function(e){for(var t=0;t<this.students.length;t++)if(this.students[t].uid==e){this.students.splice(t,1);break}},t}(e.BaseInfo);e.ClassesInfo=t,__reflect(t.prototype,"eas.ClassesInfo")}(eas||(eas={}));var eas;!function(e){var t=function(t){function o(){var o=t.call(this)||this;return o.iconURL="",o.description="",o.star=0,o.subject="",o.grade=0,o.type=e.CourseType.Unknown,o}return __extends(o,t),o.prototype.format=function(e){},o}(e.BaseInfo);e.CourseInfo=t,__reflect(t.prototype,"eas.CourseInfo")}(eas||(eas={}));var eas;!function(e){var t=function(){function e(e,t,o,n){this.year=0,this.month=0,this.day=0,this.week=0,this.year=e,this.month=t,this.day=o,this.week=n}return e.prototype.toString=function(){var e=this.year+"-";return e+=this.month<10?"0"+this.month+"-":this.month+"-",e+=this.day<10?"0"+this.day:this.day},e}();e.DateInfo=t,__reflect(t.prototype,"eas.DateInfo")}(eas||(eas={}));var eas;!function(e){var t=function(){function e(e,t){this.key="",this.value=null,this.key=e,this.value=t}return e}();e.KeyValueInfo=t,__reflect(t.prototype,"eas.KeyValueInfo")}(eas||(eas={}));var eas;!function(e){var t=function(){function e(){this.id=0,this.name="",this.cities=[]}return e.prototype.addCities=function(e){for(var t=0;t<e.length;t++){var n=e[t],a=new o;a.id=n.id,a.name=n.name,a.addZones(n.zones),this.cities.push(a)}},e.prototype.getCity=function(e){for(var t=0;t<this.cities.length;t++)if(this.cities[t].id==e)return this.cities[t];return null},e}();e.ProvinceInfo=t,__reflect(t.prototype,"eas.ProvinceInfo");var o=function(){function e(){this.id=0,this.name="",this.zones=[]}return e.prototype.addZones=function(e){for(var t=0;t<e.length;t++){var o=e[t],a=new n;a.id=o.id,a.name=o.name,a.addTowns(o.towns),this.zones.push(a)}},e.prototype.getZone=function(e){for(var t=0;t<this.zones.length;t++)if(this.zones[t].id==e)return this.zones[t];return null},e}();e.CityInfo=o,__reflect(o.prototype,"eas.CityInfo");var n=function(){function e(){this.id=0,this.name="",this.towns=[]}return e.prototype.addTowns=function(e){for(var t=0;t<e.length;t++){var o=e[t],n=new a;n.id=o.id,n.name=o.name,n.addStreets(o.streets),this.towns.push(n)}},e.prototype.getTown=function(e){for(var t=0;t<this.towns.length;t++)if(this.towns[t].id==e)return this.towns[t];return null},e}();e.ZoneInfo=n,__reflect(n.prototype,"eas.ZoneInfo");var a=function(){function e(){this.id=0,this.name="",this.steets=[]}return e.prototype.addStreets=function(e){for(var t=0;t<e.length;t++){var o=e[t];this.steets.push(new r(o.id,o.name))}},e.prototype.getStreet=function(e){for(var t=0;t<this.steets.length;t++)if(this.steets[t].id==e)return this.steets[t];return null},e}();e.TownInfo=a,__reflect(a.prototype,"eas.TownInfo");var r=function(){function e(e,t){this.id=0,this.name="",this.id=e,this.name=t}return e}();e.StreetInfo=r,__reflect(r.prototype,"eas.StreetInfo")}(eas||(eas={}));var eas;!function(e){var t=function(){function e(){this.type=0,this.code=0,this.id=0,this.uid="",this.key="",this.value=null}return e}();e.NotifyInfo=t,__reflect(t.prototype,"eas.NotifyInfo")}(eas||(eas={}));var eas;!function(e){var t=function(t){function o(){var o=t.call(this)||this;return o.type=e.PracticeType.Single,o.description="",o.subject="",o.grade=0,o.course="",o.topics=[],o.answers=[],o}return __extends(o,t),o.prototype.getTopics=function(){return this.topics},o.prototype.isRightAnswer=function(e){for(var t=0,o=this.answers;t<o.length;t++){var n=o[t];if(n==e)return!0}return!1},o.prototype.addTopic=function(t,o){this.topics.push(new e.KeyValueInfo(t,o))},o.prototype.addAnswer=function(e){this.answers.push(e)},o.prototype.toJson=function(){var t="{";t+=e.JsonUtil.formatNumber("id",this.id)+",",t+=e.JsonUtil.formatNumber("type",this.type)+",",t+=e.JsonUtil.formatString("name",this.name)+",",t+=e.JsonUtil.formatString("sub",this.subject)+",",t+=e.JsonUtil.formatNumber("grade",this.grade)+",",t+=e.JsonUtil.formatString("course",this.course)+",",t+=e.JsonUtil.formatString("desc",this.description)+",";for(var o="[",n=this.topics.length,a=0;n>a;a++){var r="{";r+=e.JsonUtil.formatString("key",this.topics[a].key)+",",r+=e.JsonUtil.formatString("val",this.topics[a].value),r+=n-1>a?"},":"}",o+=r}return o+="],",t+=e.JsonUtil.formatObject("topics",o),t+=e.JsonUtil.formatStrings("answers",this.answers),t+="}"},o}(e.BaseInfo);e.PracticeInfo=t,__reflect(t.prototype,"eas.PracticeInfo")}(eas||(eas={}));var eas;!function(e){var t=function(){function e(){}return e}();e.ResponseInfo=t,__reflect(t.prototype,"eas.ResponseInfo")}(eas||(eas={}));var eas;!function(e){var t=function(t){function o(){var o=t.call(this)||this;return o.master="",o.icon="",o.address=new e.AddressInfo,o.admin=new e.AdminInfo,o.classes=[],o.teachers=[],o}return __extends(o,t),Object.defineProperty(o.prototype,"allClasses",{get:function(){return this.classes},enumerable:!0,configurable:!0}),Object.defineProperty(o.prototype,"allTeachers",{get:function(){return this.teachers},enumerable:!0,configurable:!0}),o.prototype.addTeacher=function(e){null!=e&&this.teachers.push(e)},o.prototype.updateTeacher=function(e){null!=e&&(this.hasTeacher(e.uid)&&this.removeTeacher(e.uid),this.addTeacher(e))},o.prototype.hasTeacher=function(e){for(var t=0;t<this.teachers.length;t++)if(this.teachers[t].uid==e)return!0;return!1},o.prototype.getTeacher=function(e){for(var t=0;t<this.teachers.length;t++)if(this.teachers[t].uid==e)return this.teachers[t];return null},o.prototype.removeTeacher=function(e){for(var t=0;t<this.teachers.length;t++)if(this.teachers[t].uid==e){this.teachers.splice(t,1);break}},o.prototype.addClass=function(e){null!=e&&this.classes.push(e)},o.prototype.updateClass=function(e){null!=e&&(this.hasClass(e.uid)&&this.removeClass(e.uid),this.addClass(e))},o.prototype.hasClass=function(e){for(var t=0;t<this.classes.length;t++)if(this.classes[t].uid==e)return!0;return!1},o.prototype.getClass=function(e){for(var t=0;t<this.classes.length;t++)if(this.classes[t].uid==e)return this.classes[t];return null},o.prototype.getClasses=function(e){for(var t=[],o=0;o<this.classes.length;o++)this.classes[o].grade==e&&t.push(this.classes[o]);return t},o.prototype.removeClass=function(e){for(var t=0;t<this.classes.length;t++)if(this.classes[t].uid==e){this.classes.splice(t,1);break}},o.prototype.toJson=function(){var t="{";return t+=e.JsonUtil.formatNumber("id",this.id)+",",t+=e.JsonUtil.formatString("name",this.name)+",",t+=e.JsonUtil.formatString("master",this.master)+",",t+=this.admin?e.JsonUtil.formatNumber("admin",this.admin.id)+",":e.JsonUtil.formatNumber("admin",0)+",",t+=this.address?e.JsonUtil.formatObject("address",this.address.toJson())+",":e.JsonUtil.formatObject("address","{}")+",",t+=e.JsonUtil.formatString("icon",this.icon),t+="}"},o}(e.BaseInfo);e.SchoolInfo=t,__reflect(t.prototype,"eas.SchoolInfo")}(eas||(eas={}));var eas;!function(e){var t=function(e){function t(){var t=e.call(this)||this;return t.sex=0,t.cardNo=0,t}return __extends(t,e),t}(e.BaseInfo);e.StudentInfo=t,__reflect(t.prototype,"eas.StudentInfo")}(eas||(eas={}));var eas;!function(e){var t=function(e){function t(){var t=e.call(this)||this;return t.grades=[],t}return __extends(t,e),t.prototype.hasGrade=function(e){return this.grades.indexOf(e)>-1?!0:!1},t.prototype.addGrade=function(e){this.grades.push(e)},t}(e.BaseInfo);e.SubjectInfo=t,__reflect(t.prototype,"eas.SubjectInfo")}(eas||(eas={}));var eas;!function(e){var t=function(e){function t(){var t=e.call(this)||this;return t.phone="",t.sex=0,t.email="",t.portrait="",t.papers=[],t}return __extends(t,e),Object.defineProperty(t.prototype,"allPapers",{get:function(){return this.papers},enumerable:!0,configurable:!0}),t.prototype.addPaper=function(e){null!=e&&this.papers.push(e)},t.prototype.updatePaper=function(e){null!=e&&(this.hasPaper(e.uid)&&this.removePaper(e.uid),this.addPaper(e))},t.prototype.hasPaper=function(e){for(var t=0;t<this.papers.length;t++)if(this.papers[t].uid==e)return!0;return!1},t.prototype.getPaper=function(e){for(var t=0;t<this.papers.length;t++)if(this.papers[t].uid==e)return this.papers[t]},t.prototype.getPapers=function(e){for(var t=[],o=0;o<this.papers.length;o++)this.papers[o].course==e&&t.push(this.papers[o]);return t},t.prototype.removePaper=function(e){for(var t=0;t<this.papers.length;t++)if(this.papers[t].uid==e){this.papers.splice(t,1);break}},t}(e.BaseInfo);e.TeacherInfo=t,__reflect(t.prototype,"eas.TeacherInfo")}(eas||(eas={}));var eas;!function(e){var t=function(e){function t(){var t=e.call(this)||this;return t.course="",t.author="",t.practices=[],t}return __extends(t,e),t}(e.BaseInfo);e.TestPaperInfo=t,__reflect(t.prototype,"eas.TestPaperInfo")}(eas||(eas={}));var eas;!function(e){var t=function(){function e(){this.id=0,this.parent="",this.uid="",this.data=null,this.count=0,this.tip=""}return e}();e.UIParamInfo=t,__reflect(t.prototype,"eas.UIParamInfo")}(eas||(eas={}));var eas;!function(e){var t=function(t){function o(){var e=t.call(this)||this;return e._admins=[],e._user=null,e}return __extends(o,t),Object.defineProperty(o.prototype,"admins",{get:function(){return this._admins},enumerable:!0,configurable:!0}),Object.defineProperty(o.prototype,"user",{get:function(){return this._user},enumerable:!0,configurable:!0}),o.prototype.hasAdmin=function(e){for(var t=0;t<this._admins.length;t++)if(this._admins[t].uid==e)return!0;return!1},o.prototype.getMaxID=function(){for(var e=0,t=0;t<this._admins.length;t++)this._admins[t].id>e&&(e=this._admins[t].id);return 1>e&&(e=1e3),e+1},o.prototype.getAdmin=function(e){for(var t=0;t<this._admins.length;t++)if(this._admins[t].uid==e)return this._admins[t];return null},o.prototype.getFreeAdmins=function(){for(var t=new Array,o=0,n=this._admins;o<n.length;o++){var a=n[o];a.type==e.RoleType.SchoolAdmin&&""==a.school&&t.push(a)}return t},o.prototype.getAdmins=function(){for(var t=new Array,o=0,n=this._admins;o<n.length;o++){var a=n[o];a.type!=e.RoleType.Teacher&&t.push(a)}return t},o.prototype.addAdmin=function(e){null==e||this.hasAdmin(e.uid)||this._admins.push(e)},o.prototype.parseJson=function(t){var o=new e.AdminInfo;return o.id=t.id,o.uid=t.uid,o.name=t.name,o.type=t.type,o.phone=t.phone,o},o.prototype.tryLogout=function(){var t=this.createPostJson(e.ModuleType.Admin,e.AdminCode.Logout,null);e.HttpProxy.create().success(this.onResponseHandler,this).error(this.onResponseError,this).param(t).headers(e.BaseProxy.jsonHeaders).dataFormat(egret.URLLoaderDataFormat.TEXT).post(this.checkURL(e.ModuleType.Admin))},o.prototype.tryGetUser=function(){var t=this.createPostJson(e.ModuleType.Admin,e.AdminCode.User,null);e.HttpProxy.create().success(this.onResponseHandler,this).error(this.onResponseError,this).param(t).headers(e.BaseProxy.jsonHeaders).dataFormat(egret.URLLoaderDataFormat.TEXT).post(this.checkURL(e.ModuleType.Admin))},o.prototype.tryGetAdmins=function(){var t=this.createPostJson(e.ModuleType.Admin,e.AdminCode.GetAll,null);e.HttpProxy.create().success(this.onResponseHandler,this).error(this.onResponseError,this).param(t).headers(e.BaseProxy.jsonHeaders).dataFormat(egret.URLLoaderDataFormat.TEXT).post(this.checkURL(e.ModuleType.Admin))},o.prototype.trySetPassword=function(t,o){var n=[];n.push(new e.KeyValueInfo("old",t)),n.push(new e.KeyValueInfo("new",o));var a=this.createPostJson(e.ModuleType.Admin,e.AdminCode.UpdatePassword,n);e.HttpProxy.create().success(this.onResponseHandler,this).error(this.onResponseError,this).param(a).headers(e.BaseProxy.jsonHeaders).dataFormat(egret.URLLoaderDataFormat.TEXT).post(this.checkURL(e.ModuleType.Admin))},o.prototype.tryAddAdmin=function(t){var o=[];o.push(new e.KeyValueInfo("id",t.id)),o.push(new e.KeyValueInfo("name",t.name)),o.push(new e.KeyValueInfo("psw",t.password)),o.push(new e.KeyValueInfo("phone",t.phone)),o.push(new e.KeyValueInfo("role",t.type)),o.push(new e.KeyValueInfo("email",t.email));var n=this.createPostJson(e.ModuleType.Admin,e.AdminCode.AddOne,o);e.HttpProxy.create().success(this.onResponseHandler,this).error(this.onResponseError,this).param(n).headers(e.BaseProxy.jsonHeaders).dataFormat(egret.URLLoaderDataFormat.TEXT).post(this.checkURL(e.ModuleType.Admin))},o.prototype.tryRemoveAdmin=function(t){var o=[];o.push(new e.KeyValueInfo("uid",t));var n=this.createPostJson(e.ModuleType.Admin,e.AdminCode.Remove,o);e.HttpProxy.create().success(this.onResponseHandler,this).error(this.onResponseError,this).param(n).headers(e.BaseProxy.jsonHeaders).dataFormat(egret.URLLoaderDataFormat.TEXT).post(this.checkURL(e.ModuleType.Admin))},o.prototype.dealResponse=function(t,o,n){if(t==e.ModuleType.Admin)if(o==e.AdminCode.User){this._user=new e.AdminInfo,this._user.id=n.id,this._user.uid=n.uid,this._user.name=n.name,this._user.phone=n.phone,this._user.password=n.psw,this._user.type=n.type;var a=new e.NotifyInfo;a.type=e.ModuleType.Login,e.NotifyManager.getInstance().send(e.NotifyType.OnHttpResponse,a),this._user.type==e.RoleType.SuperAdmin&&this.tryGetAdmins()}else if(o==e.AdminCode.GetAll)for(var r=0,s=n;r<s.length;r++){var i=s[r],p=this.parseJson(i);this.addAdmin(p)}else if(o==e.AdminCode.UpdatePassword);else if(o==e.AdminCode.AddOne){var p=this.parseJson(n);this.addAdmin(p)}},o}(e.BaseProxy);e.AdminProxy=t,__reflect(t.prototype,"eas.AdminProxy")}(eas||(eas={}));var eas;!function(e){var t=function(t){function o(){var n=t.call(this)||this;if(n._admin=null,n._school=null,n._statistics=null,n._course=null,n._practice=null,n._classroom=null,n._upload=null,n._teacher=null,n._classes=null,o.isInit)throw new Error("AppProxy is a singleton,please use AppProxy.getInstance()!!!");return n._admin=new e.AdminProxy,n._school=new e.SchoolProxy,n._statistics=new e.StatisticsProxy,n._course=new e.CourseProxy,n._practice=new e.PracticeProxy,n._classroom=new e.ClassroomProxy,n._upload=new e.UploadProxy,n._teacher=new e.TeacherProxy,n._classes=new e.ClassesProxy,n}return __extends(o,t),o.getInstance=function(){return null==o.instance&&(o.instance=new o,o.isInit=!0),o.instance},Object.defineProperty(o.prototype,"user",{get:function(){var t=this._admin.user;return null==t&&(t=new e.AdminInfo),t},enumerable:!0,configurable:!0}),Object.defineProperty(o.prototype,"admin",{get:function(){return this._admin},enumerable:!0,configurable:!0}),Object.defineProperty(o.prototype,"school",{get:function(){return this._school},enumerable:!0,configurable:!0}),Object.defineProperty(o.prototype,"course",{get:function(){return this._course},enumerable:!0,configurable:!0}),Object.defineProperty(o.prototype,"practice",{get:function(){return this._practice},enumerable:!0,configurable:!0}),Object.defineProperty(o.prototype,"classroom",{get:function(){return this._classroom},enumerable:!0,configurable:!0}),Object.defineProperty(o.prototype,"classes",{get:function(){return this._classes},enumerable:!0,configurable:!0}),Object.defineProperty(o.prototype,"teacher",{get:function(){return this._teacher},enumerable:!0,configurable:!0}),Object.defineProperty(o.prototype,"upload",{get:function(){return this._upload},enumerable:!0,configurable:!0}),o.prototype.getDefSchool=function(){return this._school.getSchool(this.user.school)},o.prototype.getDefTeacher=function(){return this.getDefSchool().getTeacher(this.user.uid)},o.prototype.getClasses=function(e){var t=this._school.getSchool(e);return null==t?null:t.allClasses},o.prototype.getTeachers=function(e){var t=this._school.getSchool(e);return null==t?null:t.allTeachers},o.prototype.getTeacher=function(e,t){var o=this._school.getSchool(e);return o?o.getTeacher(t):null},o.prototype.getAdminID=function(){return this._admin.getMaxID()},o.prototype.getAdmin=function(e){return this.user.uid==e?this.user:this.admin.getAdmin(e)},o.prototype.tryLogin=function(t,o,n){var a=this.createLoginJson(t,o,n),r="";r=n==e.RoleType.Teacher?this.checkURL(e.ModuleType.Login):this.checkURL(e.ModuleType.Login),e.HttpProxy.create().success(this.onLoginSuccess,this).error(this.onResponseError,this).param(a).header(new egret.URLRequestHeader("Content-Type","application/json;charset=UTF-8")).dataFormat(egret.URLLoaderDataFormat.TEXT).post(r)},o.prototype.onLoginSuccess=function(t){var o=JSON.parse(t);e.LogUtil.info("login success!!!"+o.expire+"---"+o.token),e.BaseProxy.jsonHeaders.length<1&&(e.BaseProxy.jsonHeaders.push(new egret.URLRequestHeader("Content-Type","application/json;charset=UTF-8")),e.BaseProxy.jsonHeaders.push(new egret.URLRequestHeader("Authorization","Bearer "+o.token))),e.BaseProxy.fileHeaders.length<1&&e.BaseProxy.fileHeaders.push(new egret.URLRequestHeader("Authorization","Bearer "+o.token)),this._admin.tryGetUser(),this._course.tryGetAll()},o.isRelease=!0,o.instance=null,o.isInit=!1,o}(e.BaseProxy);e.AppProxy=t,__reflect(t.prototype,"eas.AppProxy")}(eas||(eas={}));var Main=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.isThemeLoadEnd=!1,t.isResourceLoadEnd=!1,t.data=[],t}return __extends(t,e),t.prototype.createChildren=function(){e.prototype.createChildren.call(this),this.stage.scaleMode=egret.StageScaleMode.EXACT_FIT,egret.lifecycle.addLifecycleListener(function(e){}),egret.lifecycle.onPause=function(){egret.ticker.pause()},egret.lifecycle.onResume=function(){egret.ticker.resume()};var t=new AssetAdapter;egret.registerImplementation("eui.IAssetAdapter",t),egret.registerImplementation("eui.IThemeAdapter",new ThemeAdapter),this.loadingView=new LoadingUI,this.stage.addChild(this.loadingView),console.info("loading....."+this.width+"---"+this.height),this.loadingView.x=.5*(this.width-this.loadingView.width),this.loadingView.y=.5*(this.height-this.loadingView.height),RES.addEventListener(RES.ResourceEvent.CONFIG_COMPLETE,this.onConfigComplete,this),RES.loadConfig("resource/default.res.json","resource/")},t.prototype.onConfigComplete=function(e){RES.removeEventListener(RES.ResourceEvent.CONFIG_COMPLETE,this.onConfigComplete,this);var t=new eui.Theme("resource/default.thm.json",this.stage);t.addEventListener(eui.UIEvent.COMPLETE,this.onThemeLoadComplete,this),RES.addEventListener(RES.ResourceEvent.GROUP_COMPLETE,this.onResourceLoadComplete,this),RES.addEventListener(RES.ResourceEvent.GROUP_LOAD_ERROR,this.onResourceLoadError,this),RES.addEventListener(RES.ResourceEvent.GROUP_PROGRESS,this.onResourceProgress,this),RES.addEventListener(RES.ResourceEvent.ITEM_LOAD_ERROR,this.onItemLoadError,this),RES.loadGroup("preload")},t.prototype.onThemeLoadComplete=function(){this.isThemeLoadEnd=!0,this.createScene()},t.prototype.onResourceLoadComplete=function(e){"preload"==e.groupName&&(this.stage.removeChild(this.loadingView),RES.removeEventListener(RES.ResourceEvent.GROUP_COMPLETE,this.onResourceLoadComplete,this),RES.removeEventListener(RES.ResourceEvent.GROUP_LOAD_ERROR,this.onResourceLoadError,this),RES.removeEventListener(RES.ResourceEvent.GROUP_PROGRESS,this.onResourceProgress,this),RES.removeEventListener(RES.ResourceEvent.ITEM_LOAD_ERROR,this.onItemLoadError,this),this.isResourceLoadEnd=!0,this.createScene())},t.prototype.createScene=function(){this.isThemeLoadEnd&&this.isResourceLoadEnd&&this.startCreateScene()},t.prototype.onItemLoadError=function(e){console.warn("Url:"+e.resItem.url+" has failed to load")},t.prototype.onResourceLoadError=function(e){console.warn("Group:"+e.groupName+" has failed to load"),this.onResourceLoadComplete(e)},t.prototype.onResourceProgress=function(e){"preload"==e.groupName&&this.loadingView.setProgress(e.itemsLoaded,e.itemsTotal)},t.prototype.startCreateScene=function(){var e=this.stage.stageWidth,o=this.stage.stageHeight;t.stageWidth=e,t.stageHeight=o,this.addEventListener(egret.Event.ENTER_FRAME,this.onEnterFrame,this),eas.AddressManager.getInstance().init(),eas.enable(this.stage),eas.setMouseMoveEnabled(!0),eas.UIManager.getInstance().setRoot(this),eas.UIManager.getInstance().openPage(eas.PageType.Login)},t.prototype.onEnterFrame=function(e){eas.NotifyManager.getInstance().update()},t.prototype.testComboBox=function(){this.data.push({bg:"resource/itemBg1.png",content:"https://www.baidu.com/"}),this.data.push({bg:"resource/itemBg2.png",content:"https://www.egret.com/"}),this.data.push({bg:"resource/itemBg3.png",content:"https://www.360.com/"}),this.data.push({bg:"resource/itemBg4.png",content:"https://www.baidu.com/"}),this.cb=new ComboBox(this.data),this.addChild(this.cb),this.cb.addEventListener(ComboBox.onClick,this.onClick,this),this.cb.setTitleHeight(200),this.cb.setTitleBackground("resource/titleBackground.png"),this.cb.setTitleFontSize(40),this.cb.setItemWidth(200),this.cb.setItemHeight(80),this.cb.setItemFontSize(30),this.cb.setItemTextAlign("left"),this.cb.show()},t.prototype.onClick=function(e){var t=this.cb.getTitleLabe();t.text=this.data[e.data.itemIndex].content,this.cb.hide(),console.log(e.data)},t.stageWidth=0,t.stageHeight=0,t}(eui.UILayer);__reflect(Main.prototype,"Main");var eas;!function(e){var t=function(t){function o(){return t.call(this)||this}return __extends(o,t),o.prototype.tryGetAll=function(t){var o=[];o.push(new e.KeyValueInfo("school",t));var n=this.createPostJson(e.ModuleType.Classes,e.ClassesCode.GetAll,o);e.HttpProxy.create().success(this.onResponseHandler,this).error(this.onResponseError,this).param(n).headers(e.BaseProxy.jsonHeaders).dataFormat(egret.URLLoaderDataFormat.TEXT).post(this.checkURL(e.ModuleType.Classes))},o.prototype.tryGetInfo=function(t,o){var n=[];n.push(new e.KeyValueInfo("school",t)),n.push(new e.KeyValueInfo("uid",o));var a=this.createPostJson(e.ModuleType.Classes,e.ClassesCode.GetInfo,n);e.HttpProxy.create().success(this.onResponseHandler,this).error(this.onResponseError,this).param(a).headers(e.BaseProxy.jsonHeaders).dataFormat(egret.URLLoaderDataFormat.TEXT).post(this.checkURL(e.ModuleType.Classes))},o.prototype.parseStudentJson=function(t){var o=new e.StudentInfo;return o.name=t.name,o.id=t.id,o.uid=t.uid,o.sex=t.sex,o.cardNo=t.no,o},o.prototype.parseClassesJson=function(t){var o=new e.ClassesInfo;if(o.name=t.name,o.id=t.id,o.uid=t.uid,o.grade=t.grade,o.sn=t.sn,null!=t.students)for(var n=0,a=t.students;n<a.length;n++){var r=a[n],s=this.parseStudentJson(r);o.addStudent(s)}return o},o.prototype.dealResponse=function(t,o,n){if(t==e.ModuleType.Classes){var a=new e.NotifyInfo;if(a.type=t,a.code=o,o==e.ClassesCode.GetAll){var r=e.AppProxy.getInstance().getDefSchool();if(null!=n){for(var s=0,i=n;s<i.length;s++){var p=i[s],l=this.parseClassesJson(p);r.addClass(l)}console.info("ClassesProxy.....class number = "+r.allClasses.length),e.NotifyManager.getInstance().send(e.NotifyType.OnHttpResponse,a)}}else if(o==e.ClassesCode.GetInfo){var l=this.parseClassesJson(n),r=e.AppProxy.getInstance().getDefSchool();null!=r&&r.addClass(l),e.NotifyManager.getInstance().send(e.NotifyType.OnHttpResponse,a)}}},o}(e.BaseProxy);e.ClassesProxy=t,__reflect(t.prototype,"eas.ClassesProxy")}(eas||(eas={}));var eas;!function(e){var t=function(t){function o(){var e=t.call(this)||this;return e._applies=[],e}return __extends(o,t),o.prototype.getApply=function(e,t){for(var o=0,n=this._applies;o<n.length;o++){var a=n[o];if(a.date.month==e.month&&a.period==t&&a.date.day==e.day)return a}return null},o.prototype.getOrderCount=function(){for(var t=0,o=0,n=this._applies;o<n.length;o++){var a=n[o];a.status==e.ApplyStatus.Order&&(t+=1)}return t},o.prototype.getApplyInfo=function(e){for(var t=0,o=this._applies;t<o.length;t++){var n=o[t];if(n.uid==e)return n}return null},o.prototype.updateApply=function(e){for(var t=0,o=this._applies;t<o.length;t++){var n=o[t];if(n.uid==e.uid)return void(n.status=e.status)}this._applies.push(e)},o.prototype.updateApplyStatus=function(e,t){for(var o=0,n=this._applies;o<n.length;o++){var a=n[o];if(a.uid==e)return void(a.status=t)}},o.prototype.removeApply=function(e){for(var t=0;t<this._applies.length;t++)if(this._applies[t].uid==e){this._applies.splice(t,1);break}},o.prototype.tryGetAllApplies=function(){var t=[];t.push(new e.KeyValueInfo("school",e.AppProxy.getInstance().user.school));var o=this.createPostJson(e.ModuleType.Classroom,e.ClassroomCode.ApplyGetAll,t);e.HttpProxy.create().success(this.onResponseHandler,this).error(this.onResponseError,this).param(o).headers(e.BaseProxy.jsonHeaders).dataFormat(egret.URLLoaderDataFormat.TEXT).post(this.checkURL(e.ModuleType.Classroom))},o.prototype.tryOrderApply=function(t){var o="{";o+=e.JsonUtil.formatNumber("mod",e.ModuleType.Classroom)+",",o+=e.JsonUtil.formatNumber("opt",e.ClassroomCode.ApplyOrder)+",",o+=e.JsonUtil.formatObject("body",t.toJson()),o+="}",e.HttpProxy.create().success(this.onResponseHandler,this).error(this.onResponseError,this).param(o).headers(e.BaseProxy.jsonHeaders).dataFormat(egret.URLLoaderDataFormat.TEXT).post(this.checkURL(e.ModuleType.Classroom))},o.prototype.tryGetUserApplies=function(t){var o=[];o.push(new e.KeyValueInfo("user",t));var n=this.createPostJson(e.ModuleType.Classroom,e.ClassroomCode.ApplyGetUser,o);e.HttpProxy.create().success(this.onResponseHandler,this).error(this.onResponseError,this).param(n).headers(e.BaseProxy.jsonHeaders).dataFormat(egret.URLLoaderDataFormat.TEXT).post(this.checkURL(e.ModuleType.Classroom))},o.prototype.tryAggreeApply=function(t){var o=[];o.push(new e.KeyValueInfo("uid",t));var n=this.createPostJson(e.ModuleType.Classroom,e.ClassroomCode.ApplyAgree,o);e.HttpProxy.create().success(this.onResponseHandler,this).error(this.onResponseError,this).param(n).headers(e.BaseProxy.jsonHeaders).dataFormat(egret.URLLoaderDataFormat.TEXT).post(this.checkURL(e.ModuleType.Classroom))
},o.prototype.tryRefuseApply=function(t){var o=[];o.push(new e.KeyValueInfo("uid",t));var n=this.createPostJson(e.ModuleType.Classroom,e.ClassroomCode.ApplyRefuse,o);e.HttpProxy.create().success(this.onResponseHandler,this).error(this.onResponseError,this).param(n).headers(e.BaseProxy.jsonHeaders).dataFormat(egret.URLLoaderDataFormat.TEXT).post(this.checkURL(e.ModuleType.Classroom))},o.prototype.tryFreezeApply=function(t,o,n){var a=[];a.push(new e.KeyValueInfo("date",t.toString())),a.push(new e.KeyValueInfo("period",o)),a.push(new e.KeyValueInfo("open",n?1:0));var r=this.createPostJson(e.ModuleType.Classroom,e.ClassroomCode.ApplyFreeze,a);e.HttpProxy.create().success(this.onResponseHandler,this).error(this.onResponseError,this).param(r).headers(e.BaseProxy.jsonHeaders).dataFormat(egret.URLLoaderDataFormat.TEXT).post(this.checkURL(e.ModuleType.Classroom))},o.prototype.dealResponse=function(t,o,n){if(t==e.ModuleType.Classroom){var a=new e.NotifyInfo;if(a.type=e.ModuleType.Classroom,a.code=o,o==e.ClassroomCode.ApplyOrder){var r=this.parseJson(n);this._applies.push(r)}else if(o==e.ClassroomCode.ApplyGetAll)for(var s=0,i=n;s<i.length;s++){var p=i[s],r=this.parseJson(p);this._applies.push(r)}else if(o==e.ClassroomCode.ApplyGetUser)for(var l=0,u=n;l<u.length;l++){var p=u[l],r=this.parseJson(p);this._applies.push(r)}else if(o==e.ClassroomCode.ApplyFreeze){var r=this.parseJson(n);this.updateApply(r)}else if(o==e.ClassroomCode.ApplyAgree){var c=n.uid;this.updateApplyStatus(c,e.ApplyStatus.Used)}else if(o==e.ClassroomCode.ApplyRefuse){var c=n.uid;this.updateApplyStatus(c,e.ApplyStatus.Idle)}else if(o==e.ClassroomCode.ApplyRemove){var c=n.uid;this.removeApply(c)}e.NotifyManager.getInstance().send(e.NotifyType.OnHttpResponse,a)}},o.prototype.parseJson=function(t){var o=new e.ApplyRoomInfo;if(o.uid=t.uid,o.setDate(t.date),o.period=t.period,o.status=t.state,o.applicant=t.author,o.school=t.school,null!=t.papers)for(var n=0,a=t.papers;n<a.length;n++){var r=a[n];o.addPaper(r)}if(null!=t.courses)for(var s=0,i=t.courses;s<i.length;s++){var p=i[s];o.addCourse(p)}return o},o}(e.BaseProxy);e.ClassroomProxy=t,__reflect(t.prototype,"eas.ClassroomProxy")}(eas||(eas={}));var eas;!function(e){var t=function(t){function o(){var e=t.call(this)||this;return e._courses=[],e}return __extends(o,t),Object.defineProperty(o.prototype,"courses",{get:function(){return this._courses},enumerable:!0,configurable:!0}),o.prototype.getCourse=function(e){for(var t=this._courses.length,o=0,n=t;n>o;o++)if(this._courses[o].uid==e)return this._courses[o];return null},o.prototype.getCourses=function(e,t){for(var o=[],n=0,a=this._courses;n<a.length;n++){var r=a[n];r.grade==e&&r.subject==t&&o.push(r)}return o},o.prototype.parseJson=function(t){var o=new e.CourseInfo;return o.uid=t.uid,o.name=t.name,o.iconURL=t.icon,o.star=t.star,o.description=t.desc,o.subject=t.sub,o.format(t.format),o},o.prototype.dealResponse=function(t,o,n){if(t==e.ModuleType.Course){var a=new e.NotifyInfo;if(a.type=e.ModuleType.Classroom,a.code=o,o==e.CourseCode.GetInfo);else if(o==e.CourseCode.GetAll){for(var r=0,s=n;r<s.length;r++){var i=s[r],p=this.parseJson(i);this._courses.push(p)}e.NotifyManager.getInstance().send(e.NotifyType.OnHttpResponse,a)}}},o.prototype.tryGetAll=function(){var t=this.createPostJson(e.ModuleType.Course,e.CourseCode.GetAll,null);e.HttpProxy.create().success(this.onResponseHandler,this).error(this.onResponseError,this).param(t).headers(e.BaseProxy.jsonHeaders).dataFormat(egret.URLLoaderDataFormat.TEXT).post(this.checkURL(e.ModuleType.Course))},o}(e.BaseProxy);e.CourseProxy=t,__reflect(t.prototype,"eas.CourseProxy")}(eas||(eas={}));var eas;!function(e){var t=function(){function e(){this.loader=new egret.URLLoader,this.request=new egret.URLRequest}return e.create=function(){return new e},e.prototype.success=function(e,t){return void 0===t&&(t=null),this.loader.addEventListener(egret.Event.COMPLETE,function(o){var n=o.target;e.call(t,n.data)},t),this},e.prototype.error=function(e,t){return void 0===t&&(t=null),this.loader.addEventListener(egret.IOErrorEvent.IO_ERROR,e,t),this},e.prototype.headers=function(e){return this.request.requestHeaders=e,this},e.prototype.header=function(e){var t=this.request.requestHeaders;return t.push(e),this},e.prototype.param=function(e){return this.request.data=e,this},e.prototype.dataFormat=function(e){return this.loader.dataFormat=e,this},e.prototype.get=function(e){this.request.method=egret.URLRequestMethod.GET,this.request.url=e,this.loader.load(this.request)},e.prototype.post=function(e){this.request.url=e,this.request.method=egret.URLRequestMethod.POST,this.loader.load(this.request)},e}();e.HttpProxy=t,__reflect(t.prototype,"eas.HttpProxy")}(eas||(eas={}));var eas;!function(e){var t=function(t){function o(){var e=t.call(this)||this;return e._practices=[],e}return __extends(o,t),Object.defineProperty(o.prototype,"practices",{get:function(){return this._practices},enumerable:!0,configurable:!0}),o.prototype.getMaxID=function(){for(var e=0,t=0;t<this._practices.length;t++)this._practices[t].id>e&&(e=this._practices[t].id);return 1>e&&(e=3e3),e+1},o.prototype.getPractice=function(e){for(var t=this._practices.length,o=0;t>o;o++)if(this._practices[o].uid==e)return this._practices[o];return null},o.prototype.getPractices=function(e,t){for(var o=this._practices.length,n=[],a=0;o>a;a++){var r=this._practices[a];r.grade==e&&r.subject==t&&n.push(r)}return n},o.prototype.getPracticesByCourse=function(e){for(var t=this._practices.length,o=[],n=0;t>n;n++){var a=this._practices[n];a.course==e&&o.push(a)}return o},o.prototype.getPracticeByID=function(e){for(var t=this._practices.length,o=0;t>o;o++)if(this._practices[o].id==e)return this._practices[o];return null},o.prototype.removeInfo=function(e){for(var t=0,o=this._practices.length;o>t;t++)return this._practices[t].uid==e&&this._practices.splice(t,1),!0;return!1},o.prototype.parseJson=function(t){var o=new e.PracticeInfo;o.id=t.id,o.uid=t.uid,o.name=t.name,o.description=t.desc,o.grade=t.grade,o.subject=t.subject,o.type=t.type;for(var n=0,a=t.topics;n<a.length;n++){var r=a[n];o.addTopic(r.key,r.val)}for(var s=0,i=t.answers;s<i.length;s++){var p=i[s];o.addAnswer(p)}return o},o.prototype.dealResponse=function(t,o,n){if(t==e.ModuleType.Practice){var a=new e.NotifyInfo;if(a.type=e.ModuleType.Practice,a.code=o,o==e.PracticeCode.GetInfo){var r=this.parseJson(n);this._practices.push(r),a.id=r.id,e.NotifyManager.getInstance().send(e.NotifyType.OnHttpResponse,a)}else if(o==e.PracticeCode.GetAll){for(var s=0,i=n;s<i.length;s++){var p=i[s],r=this.parseJson(p);this._practices.push(r)}e.NotifyManager.getInstance().send(e.NotifyType.OnHttpResponse,a)}else if(o==e.PracticeCode.Add){var r=this.parseJson(n);this._practices.push(r),a.id=r.id,e.NotifyManager.getInstance().send(e.NotifyType.OnHttpResponse,a)}else o==e.PracticeCode.Remove&&(this.removeInfo(n.uid),a.uid=n.uid,e.NotifyManager.getInstance().send(e.NotifyType.OnHttpResponse,null,a))}},o.prototype.tryGetAll=function(){var t=this.createPostJson(e.ModuleType.Practice,e.PracticeCode.GetAll,null);e.HttpProxy.create().success(this.onResponseHandler,this).error(this.onResponseError,this).param(t).headers(e.BaseProxy.jsonHeaders).dataFormat(egret.URLLoaderDataFormat.TEXT).post(this.checkURL(e.ModuleType.Practice))},o.prototype.tryGetInfo=function(t){var o=[];o.push(new e.KeyValueInfo("uid",t));var n=this.createPostJson(e.ModuleType.Practice,e.PracticeCode.GetInfo,o);e.HttpProxy.create().success(this.onResponseHandler,this).error(this.onResponseError,this).param(n).headers(e.BaseProxy.jsonHeaders).dataFormat(egret.URLLoaderDataFormat.TEXT).post(this.checkURL(e.ModuleType.Practice))},o.prototype.tryAddOne=function(t){var o="{";o+=e.JsonUtil.formatNumber("mod",e.ModuleType.Practice)+",",o+=e.JsonUtil.formatNumber("opt",e.PracticeCode.Add)+",",o+=e.JsonUtil.formatObject("body",t.toJson()),o+="}",e.LogUtil.info("PracticeProxy add json = "+o),e.HttpProxy.create().success(this.onResponseHandler,this).error(this.onResponseError,this).param(o).headers(e.BaseProxy.jsonHeaders).dataFormat(egret.URLLoaderDataFormat.TEXT).post(this.checkURL(e.ModuleType.Practice))},o.prototype.tryRemove=function(t){var o=[];o.push(new e.KeyValueInfo("uid",t));var n=this.createPostJson(e.ModuleType.Practice,e.PracticeCode.Remove,o);e.HttpProxy.create().success(this.onResponseHandler,this).error(this.onResponseError,this).param(n).headers(e.BaseProxy.jsonHeaders).dataFormat(egret.URLLoaderDataFormat.TEXT).post(this.checkURL(e.ModuleType.Practice))},o}(e.BaseProxy);e.PracticeProxy=t,__reflect(t.prototype,"eas.PracticeProxy")}(eas||(eas={}));var eas;!function(e){var t=function(t){function o(){var e=t.call(this)||this;return e._schools=[],e}return __extends(o,t),Object.defineProperty(o.prototype,"schools",{get:function(){return this._schools},enumerable:!0,configurable:!0}),o.prototype.getSchool=function(e){for(var t=this._schools.length,o=0;t>o;o++)if(this._schools[o].uid==e)return this._schools[o];return null},o.prototype.getClasses=function(e){for(var t=this._schools.length,o=0;t>o;o++)return this._schools[o].getClass(e);return null},o.prototype.getTeacher=function(e){for(var t=this._schools.length,o=0;t>o;o++){var n=this._schools[o].getTeacher(e);return n}return null},o.prototype.removeInfo=function(e){for(var t=0,o=this._schools.length;o>t;t++)return this._schools[t].uid==e&&this._schools.splice(t,1),!0;return!1},o.prototype.tryGetAll=function(){var t=this.createPostJson(e.ModuleType.School,e.SchoolCode.GetAll,null);e.HttpProxy.create().success(this.onResponseHandler,this).error(this.onResponseError,this).param(t).headers(e.BaseProxy.jsonHeaders).dataFormat(egret.URLLoaderDataFormat.TEXT).post(this.checkURL(e.ModuleType.School))},o.prototype.tryGetInfo=function(t){var o=[];o.push(new e.KeyValueInfo("id",t));var n=this.createPostJson(e.ModuleType.School,e.SchoolCode.GetInfo,o);e.HttpProxy.create().success(this.onResponseHandler,this).error(this.onResponseError,this).param(n).headers(e.BaseProxy.jsonHeaders).dataFormat(egret.URLLoaderDataFormat.TEXT).post(this.checkURL(e.ModuleType.School))},o.prototype.tryAdd=function(t){var o="{";o+=e.JsonUtil.formatNumber("mod",e.ModuleType.School)+",",o+=e.JsonUtil.formatNumber("opt",e.SchoolCode.Add)+",",o+=e.JsonUtil.formatObject("body",t.toJson()),o+="}",e.HttpProxy.create().success(this.onResponseHandler,this).error(this.onResponseError,this).param(o).headers(e.BaseProxy.jsonHeaders).dataFormat(egret.URLLoaderDataFormat.TEXT).post(this.checkURL(e.ModuleType.School))},o.prototype.tryUpdate=function(t){var o=[];o.push(new e.KeyValueInfo("id",t.id)),o.push(new e.KeyValueInfo("name",t.name)),o.push(new e.KeyValueInfo("address",t.address)),o.push(new e.KeyValueInfo("master",t.master));var n=this.createPostJson(e.ModuleType.School,e.SchoolCode.Update,o);e.HttpProxy.create().success(this.onResponseHandler,this).error(this.onResponseError,this).param(n).headers(e.BaseProxy.jsonHeaders).dataFormat(egret.URLLoaderDataFormat.TEXT).post(this.checkURL(e.ModuleType.School))},o.prototype.tryRemove=function(t){var o=[];o.push(new e.KeyValueInfo("id",t));var n=this.createPostJson(e.ModuleType.School,e.SchoolCode.Remove,o);e.HttpProxy.create().success(this.onResponseHandler,this).error(this.onResponseError,this).param(n).headers(e.BaseProxy.jsonHeaders).dataFormat(egret.URLLoaderDataFormat.TEXT).post(this.checkURL(e.ModuleType.School))},o.prototype.parseJson=function(t){var o=new e.SchoolInfo;o.name=t.name,o.id=t.id,o.uid=t.uid,o.master=t.master,o.admin=e.AppProxy.getInstance().getAdmin(o.uid),o.address=new e.AddressInfo;var n=t.address,a=e.AddressManager.getInstance().getProvince(n.province);if(a){o.address.province=new e.KeyValueInfo(a.id+"",a.name);var r=a.getCity(n.city);if(r){o.address.city=new e.KeyValueInfo(r.id+"",r.name);var s=r.getZone(n.zone);if(s){o.address.zone=new e.KeyValueInfo(s.id+"",s.name);var i=s.getTown(n.town);if(i){o.address.town=new e.KeyValueInfo(i.id+"",i.name);var p=i.getStreet(n.street);p&&(o.address.street=new e.StreetInfo(p.id,p.name))}}}}return o},o.prototype.dealResponse=function(t,o,n){if(t==e.ModuleType.School){var a=new e.NotifyInfo;if(a.type=t,a.code=o,o==e.SchoolCode.GetInfo);else if(o==e.SchoolCode.GetAll){if(e.AppProxy.getInstance().user.type==e.RoleType.SuperAdmin)for(var r=0,s=n;r<s.length;r++){var i=s[r],p=this.parseJson(i);this._schools.push(p)}else{var p=this.parseJson(n);e.AppProxy.getInstance().user.school=p.uid,this._schools.push(p)}e.LogUtil.info("getAllSchools lenth = "+this._schools.length),e.NotifyManager.getInstance().send(e.NotifyType.OnHttpResponse,a)}else if(o==e.SchoolCode.Add){var p=this.parseJson(n);this._schools.push(p),e.NotifyManager.getInstance().send(e.NotifyType.OnHttpResponse,a)}else o==e.SchoolCode.Remove&&(this.removeInfo(n.id),e.NotifyManager.getInstance().send(e.NotifyType.OnHttpResponse,a))}},o}(e.BaseProxy);e.SchoolProxy=t,__reflect(t.prototype,"eas.SchoolProxy")}(eas||(eas={}));var eas;!function(e){var t=function(e){function t(){return e.call(this)||this}return __extends(t,e),t.prototype.dealResponse=function(e,t,o){},t}(e.BaseProxy);e.StatisticsProxy=t,__reflect(t.prototype,"eas.StatisticsProxy")}(eas||(eas={}));var LoadingUI=function(e){function t(){var t=e.call(this)||this;return t.createView(),t.width=500,t.height=100,t}return __extends(t,e),t.prototype.createView=function(){this.textField=new egret.TextField,this.addChild(this.textField),this.textField.width=480,this.textField.height=100,this.textField.textAlign="center",this.textField.textColor=0},t.prototype.setProgress=function(e,t){this.textField.text="Loading..."+e+"/"+t},t}(egret.Sprite);__reflect(LoadingUI.prototype,"LoadingUI");var eas;!function(e){var t=function(t){function o(){return t.call(this)||this}return __extends(o,t),o.prototype.tryUploadSchools=function(t){var o=new FormData;o.append("mod",e.ModuleType.Upload+""),o.append("opt",e.UploadCode.AddSchools+""),o.append("file",t);var n=this.checkURL(e.ModuleType.Upload),a=new XMLHttpRequest;a.open("post",n,!0),a.onload=this.uploadComplete,a.onerror=this.uploadFailed;for(var r=0,s=e.BaseProxy.fileHeaders;r<s.length;r++){var i=s[r];a.setRequestHeader(i.name,i.value)}a.upload.onprogress=this.uploadProgress,a.upload.onloadstart=function(){console.info("upload schools start!!!!!")},a.send(o)},o.prototype.tryUploadClasses=function(t){var o=new FormData;o.append("mod",e.ModuleType.Upload+""),o.append("opt",e.UploadCode.AddStudents+""),o.append("file",t);var n=this.checkURL(e.ModuleType.Upload),a=new XMLHttpRequest;a.open("post",n,!0),a.onload=function(e){console.info("upload classes complete!!!!!")},a.onerror=this.uploadFailed;for(var r=0,s=e.BaseProxy.fileHeaders;r<s.length;r++){var i=s[r];a.setRequestHeader(i.name,i.value)}a.upload.onprogress=this.uploadProgress,a.upload.onloadstart=function(){console.info("upload classes start!!!!!")},a.send(o)},o.prototype.tryUploadTeachers=function(t){var o=new FormData;o.append("mod",e.ModuleType.Upload+""),o.append("opt",e.UploadCode.AddTeachers+""),o.append("file",t);var n=this.checkURL(e.ModuleType.Upload),a=new XMLHttpRequest;a.open("post",n,!0),a.onload=function(e){console.info("upload teachers complete!!!!!")},a.onerror=this.uploadFailed;for(var r=0,s=e.BaseProxy.fileHeaders;r<s.length;r++){var i=s[r];a.setRequestHeader(i.name,i.value)}a.upload.onprogress=this.uploadProgress,a.upload.onloadstart=function(){console.info("upload teachers start!!!!!")},a.send(o)},o.prototype.uploadComplete=function(e){console.info("upload complete!!!!!")},o.prototype.uploadFailed=function(e){console.info("upload failed!!!!!")},o.prototype.uploadProgress=function(e){console.info("upload progress!!!!!"+e.lengthComputable)},o.prototype.dealResponse=function(t,o,n){t!=e.ModuleType.Upload},o}(e.BaseProxy);e.UploadProxy=t,__reflect(t.prototype,"eas.UploadProxy")}(eas||(eas={}));var eas;!function(e){var t=function(){function e(){}return e.chooseFile=function(t,o,n){void 0===n&&(n=null),e.mCall=t,e.mObj=o,e.loadingFun=n;var a=document.getElementById("fileInput_exc");a||(a=document.createElement("input"),a.type="file",a.accept="application/vnd.openxmlformats-officedocument.spreadsheetml.sheet",a.capture&&(a.capture="capture"),a.style.zIndex="-999",a.style.position="absolute;",a.style.display="none",a.id="fileInput_exc",document.body.appendChild(a)),e.mInit||(e.mInit=!0,a.onchange=this.onSelectFile),a.click()},e.onSelectFile=function(t){var o=document.getElementById("fileInput_exc"),n=o.files[0];if(n){var a=n.type;a||(a=e.mime[n.name.match(/\.([^\.]+)$/i)[1]]);e.getUrlOf(n);e.mCall.call(e.mObj,n),e.mCall=null,e.mObj=null,e.loadingFun=null}},e.getUrlOf=function(e){return void 0!=window.URL?window.URL.createObjectURL(e):window.webkitURL.createObjectURL(e)},e.mime={xls:"application/xls",xlsx:"application/xlsx"},e}();e.FileUploadUtil=t,__reflect(t.prototype,"eas.FileUploadUtil")}(eas||(eas={}));var eas;!function(e){var t=function(){function e(){}return e.chooseImage=function(t,o,n){void 0===n&&(n=null),e.mCall=t,e.mObj=o,e.loadingFun=n;var a=document.getElementById("fileInput_img");a||(a=document.createElement("input"),a.type="file",a.accept="image/*;",a.capture&&(a.capture="capture"),a.style.zIndex="-999",a.style.position="absolute;",a.style.display="none",a.id="fileInput_img",document.body.appendChild(a)),e.mInit||(e.mInit=!0,a.onchange=this.onSelectImage),a.click()},e.onSelectImage=function(t){var o=document.getElementById("fileInput_img"),n=o.files[0];if(n){var a=n.type;a||(a=e.mime[n.name.match(/\.([^\.]+)$/i)[1]]);var r=e.getUrlOf(n);e.tmpCreateImage(r,n)}},e.getUrlOf=function(e){return void 0!=window.URL?window.URL.createObjectURL(e):window.webkitURL.createObjectURL(e)},e.tmpCreateImage=function(t,o){e.loadingFun&&e.loadingFun();var n=document.createElement("img");n.onload=function(){var t=new egret.RenderTexture,o=new egret.BitmapData(n),a=new egret.Bitmap(o),r=new egret.DisplayObjectContainer;r.addChild(a);var s="1",i=o.width,p=o.height,l=Math.min(e.imageSize.y/p,e.imageSize.x/i,1);i*=l,p*=l,a.width=i,a.height=p,i=Math.round(i),p=Math.round(p);var u=new egret.Rectangle(0,0,i,p);switch(s){case"3":a.rotation=180,a.x=i,a.y=p,u.width=i,u.height=p;break;case"6":a.rotation=90,a.x=p,u.width=p,u.height=i;break;case"8":a.rotation=-90,a.y=i,u.width=p,u.height=i}t.drawToTexture(r,u),e.mCall.apply(e.mObj,[t]),e.mCall=null,e.mObj=null,e.loadingFun=null,document.body.removeChild(n)},n.src=t,n.style.display="none",document.body.appendChild(n)},e.imageSize=new egret.Point(640,1050),e.mime={png:"image/png",jpg:"image/jpeg",jpeg:"image/jpeg",bmp:"image/bmp"},e}();e.ImageUtil=t,__reflect(t.prototype,"eas.ImageUtil")}(eas||(eas={}));var eas;!function(e){var t=function(){function e(){}return e.formatString=function(e,t){return'"'+e+'":"'+t+'"'},e.formatNumbers=function(e,t){var o='"'+e+'":[';if(null!=t&&t.length>0)for(var n=0;n<t.length;n++)o+=n<t.length-1?t[n]+",":t[n];return o+="]"},e.formatStrings=function(e,t){var o='"'+e+'":[';if(null!=t&&t.length>0)for(var n=0;n<t.length;n++)o+=n<t.length-1?'"'+t[n]+'",':'"'+t[n]+'"';return o+="]"},e.formatNumber=function(e,t){return'"'+e+'":'+t},e.formatObject=function(e,t){return'"'+e+'":'+t},e.formatObj=function(e,t){return'"'+e+'":{'+t+"}"},e}();e.JsonUtil=t,__reflect(t.prototype,"eas.JsonUtil")}(eas||(eas={}));var eas;!function(e){var t=function(){function e(){}return e.calculateTime=function(){return 0},e.calculateMaxDays=function(e){var t=new Date;return t.setMonth(e),t.setDate(0),t.getDate()},e.calculateMaxWeeks=function(e,t){var o=new Date;o.setFullYear(e,t-1,1);var n=o.getDay();0==n&&(n=7),o.setFullYear(e,t,0);var a,r=o.getDate();return a=1!=n?7-n+2:1,Math.ceil((r-a+1)/7)},e.getWeekDays=function(e,t,o){var n=new Date,a=new egret.Point;n.setFullYear(e,t-1,1);var r=n.getDay();0==r&&(r=7),n.setFullYear(e,t,0);var s,i=n.getDate();s=1!=r?7-r+2:1;var p=s+7*(o-1),l=p+6;if(i>=l)a.y=l;else{n.setFullYear(e,t-1,l);var u=n.getDate();a.y=u}return a.x=p,a},e.getTexture=function(e){var t=new Image;t.src=e;var o=new egret.Texture,n=new egret.BitmapData(t);return o._setBitmapData(n),o},e.getCharacter=function(t){return t<e.characters.length?e.characters[t]:""},e.updateStars=function(e,t){for(var o=Math.floor(t),n=0;5>n;n++)o>n?e[n].source="icon_star-0_png":n==o&&t>o?e[n].source="icon_star-1_png":e[n].source="icon_star-2_png"},e.characters=["A","B","C","D","E","F","G","H","I","J","K","L","M","N","O","P","Q","R","S","T","U","V","W","X","Y","Z"],e}();e.LogicUtil=t,__reflect(t.prototype,"eas.LogicUtil")}(eas||(eas={}));var eas;!function(e){var t=function(){function e(){}return e.info=function(e){for(var t=[],o=1;o<arguments.length;o++)t[o-1]=arguments[o];this.isLog&&console.debug(e,t)},e.warn=function(e){for(var t=[],o=1;o<arguments.length;o++)t[o-1]=arguments[o];this.isLog&&console.warn(e,t)},e.error=function(e){for(var t=[],o=1;o<arguments.length;o++)t[o-1]=arguments[o];this.isLog&&console.error(e,t)},e.exception=function(e){for(var t=[],o=1;o<arguments.length;o++)t[o-1]=arguments[o];this.isLog&&console.exception(e,t)},e.isLog=!0,e}();e.LogUtil=t,__reflect(t.prototype,"eas.LogUtil")}(eas||(eas={}));var eas;!function(e){var t=function(){function e(){}return e.randomInteger=function(e){return Math.floor(Math.random()*e)},e.randomNumber=function(e){return Math.random()*e},e.randomRange=function(t,o,n){void 0===n&&(n=!0);var a=e.randomNumber(o-t)+t;return n&&(a=Math.floor(a)),a},e.randomWave=function(){return 2*e.randomInteger(2)-1},e.randomBoolean=function(){var t=e.randomInteger(2);return t>1?!0:!1},e.clamp=function(e,t,o){return t>e?t:e>o?o:e},e.inverseLerp=function(e,t,o){return e>=o?0:o>=t?1:(o=(o-e)/(t-e),o*o*(3-2*o))},e.lerp=function(e,t,o){return e>=o?0:o>=t?1:(o=(o-e)/(t-e),o*o*(3-2*o))},e.hasElement=function(e,t){if(null==e)return!1;for(var o=e.length,n=0;o>n;n++)if(e[n]==t)return!0;return!1},e.combineArray=function(e,t){if(null!=e&&null!=t)for(var o=0;o<t.length;o++)e.push(t[o])},e.removeElement=function(e,t){if(null!=e)for(var o=e.length,n=0;o>n;n++)if(e[n]==t){e.splice(n,1);break}},e.isFunction=function(e){return"function"==typeof e},e.isUndefined=function(e){return"undefined"==typeof e},e.isString=function(e){return"[object String]"===Object.prototype.toString.call(e)},e.hasProperty=function(e,t){var o=Object.prototype.hasOwnProperty;return o.call(e,t)},e.defaultToString=function(t){return null===t?"COLLECTION_NULL":e.isUndefined(t)?"COLLECTION_UNDEFINED":e.isString(t)?"$s"+t:"$o"+t.toString()},e.prototype.makeString=function(t,o){if(void 0===o&&(o=","),null===t)return"COLLECTION_NULL";if(e.isUndefined(t))return"COLLECTION_UNDEFINED";if(e.isString(t))return t.toString();var n="{",a=!0;for(var r in t)e.hasProperty(t,r)&&(a?a=!1:n+=o,n=n+r+":"+t[r]);return n+"}"},e.isNullOrWhiteSpace=function(e){try{return null==e||"undefined"==e?!1:e.replace(/\s/g,"").length<1}catch(t){return!1}},e.format=function(t){for(var o=[],n=1;n<arguments.length;n++)o[n-1]=arguments[n];try{return t.replace(/{(\d+(:.*)?)}/g,function(t,n){var a=t.split(":");a.length>1&&(n=n[0],t=a[1].replace("}",""));var r=e.formatPattern(t,o[n]);return"undefined"!=typeof r&&null!=r?r:""})}catch(a){return""}},e.formatString=function(e,t){var o=e;if(t.length>0)for(var n=0;n<t.length;n++)if(void 0!=t[n]){var a=new RegExp("({)"+n+"(})","g");o=o.replace(a,t[n])}return o},e.formatPattern=function(e,t){switch(e){case"L":t=t.toLowerCase();break;case"U":t=t.toUpperCase()}return t},e}();e.MathUtil=t,__reflect(t.prototype,"eas.MathUtil")}(eas||(eas={}));var ThemeAdapter=function(){function e(){}return e.prototype.getTheme=function(e,t,o,n){function a(e){t.call(n,e)}function r(t){t.resItem.url==e&&(RES.removeEventListener(RES.ResourceEvent.ITEM_LOAD_ERROR,r,null),o.call(n))}RES.addEventListener(RES.ResourceEvent.ITEM_LOAD_ERROR,r,null),RES.getResByUrl(e,a,this,RES.ResourceItem.TYPE_TEXT)},e}();__reflect(ThemeAdapter.prototype,"ThemeAdapter",["eui.IThemeAdapter"]);var eas;!function(e){var t=function(){function t(t){this.table={},this.nElements=0,this.toStr=t||e.MathUtil.defaultToString}return t.prototype.getValue=function(t){var o=this.table["$"+this.toStr(t)];return e.MathUtil.isUndefined(o)?null:o.value},t.prototype.setValue=function(t,o){if(!e.MathUtil.isUndefined(t)&&!e.MathUtil.isUndefined(o)){var n,a="$"+this.toStr(t),r=this.table[a];return e.MathUtil.isUndefined(r)?(this.nElements++,n=void 0):n=r.value,this.table[a]={key:t,value:o},n}},t.prototype.remove=function(t){var o="$"+this.toStr(t),n=this.table[o];return e.MathUtil.isUndefined(n)?void 0:(delete this.table[o],this.nElements--,n.value)},t.prototype.keys=function(){var t=[];for(var o in this.table)if(e.MathUtil.hasProperty(this.table,o)){var n=this.table[o];t.push(n.key)}return t},t.prototype.values=function(){var t=[];for(var o in this.table)if(e.MathUtil.hasProperty(this.table,o)){var n=this.table[o];t.push(n.value)}return t},t.prototype.forEach=function(t){for(var o in this.table)if(e.MathUtil.hasProperty(this.table,o)){var n=this.table[o],a=t(n.key,n.value);if(a===!1)return}},t.prototype.containsKey=function(t){return!e.MathUtil.isUndefined(this.getValue(t))},t.prototype.clear=function(){this.table={},this.nElements=0},t.prototype.size=function(){return this.nElements},t.prototype.isEmpty=function(){return this.nElements<=0},t.prototype.toString=function(){var e="{";return this.forEach(function(t,o){e+="\n	"+t+" : "+o}),e+"\n}"},t}();e.Dictionary=t,__reflect(t.prototype,"eas.Dictionary")}(eas||(eas={}));var eas;!function(e){var t=function(){function t(e){this.countPerPage=12,this._maxPage=0,this._currentPage=0,this._totalCount=0,this.items=[],this.countPerPage=e}return Object.defineProperty(t.prototype,"maxPage",{get:function(){return this._maxPage},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"currentPage",{get:function(){return this._currentPage},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"totalCount",{get:function(){return this._totalCount},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"hasNextPage",{get:function(){return this._currentPage<this._maxPage?!0:!1},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"hasPrePage",{get:function(){return this._currentPage>1?!0:!1},enumerable:!0,configurable:!0}),t.prototype.updateAllItems=function(t){this.items.splice(0),e.MathUtil.combineArray(this.items,t),this._currentPage=1,this.countPerPage<1&&(this.countPerPage=12),this.checkPages()},t.prototype.checkPages=function(){this._totalCount=this.items.length,this._totalCount%this.countPerPage==0&&this._totalCount>0?this._maxPage=Math.ceil(this._totalCount/this.countPerPage):this._maxPage=Math.floor(this._totalCount/this.countPerPage)+1},t.prototype.removeItem=function(e){if(null!=e){for(var t=0;t<this.items.length;t++)if(this.items[t]==e){this.items.splice(t,1);break}this.checkPages()}},t.prototype.setPage=function(e){0>e?this._currentPage=1:e>this._maxPage?this._currentPage=this.maxPage:this._currentPage=e},t.prototype.getItemsByPage=function(e){if(1>e||e>this._maxPage)return null;var t=[];if(this._currentPage=e,this._totalCount<=this.countPerPage)return this.items;var o=(this._currentPage-1)*this.countPerPage,n=this.countPerPage,a=this._totalCount-o;this._currentPage==this.maxPage&&n>a&&(n=a);for(var r=0;n>r;r++){var s=r+o;t.push(this.items[s])}return t},t.prototype.getCurrentPage=function(){return this._currentPage<this._maxPage?this.getItemsByPage(this._currentPage):this.getItemsByPage(this._currentPage)},t.prototype.nextPage=function(){return this._currentPage<this._maxPage?(this._currentPage+=1,this.getItemsByPage(this._currentPage)):this.getItemsByPage(this._currentPage)},t.prototype.prePage=function(){return this._currentPage>1?(this._currentPage-=1,this.getItemsByPage(this._currentPage)):this.getItemsByPage(this._currentPage)},t.prototype.clear=function(){this._currentPage=0,this._maxPage=0,this._totalCount=0,null!=this.items&&this.items.splice(0)},t}();e.PageHelper=t,__reflect(t.prototype,"eas.PageHelper")}(eas||(eas={}));var eas;!function(e){var t;!function(e){e[e.Discard=-1]="Discard",e[e.Idle=0]="Idle",e[e.Freeze=1]="Freeze",e[e.Used=2]="Used",e[e.Order=3]="Order"}(t=e.ApplyStatus||(e.ApplyStatus={}))}(eas||(eas={}));var eas;!function(e){e.URL_Develop="http://127.0.0.1:3000",e.URL_Release="http://192.168.2.9:3000",e.Address_Login="/login",e.Address_Login_School="/school",e.Address_API="/v1/api",e.Address_Upload="/v1/upload"}(eas||(eas={}));var eas;!function(e){var t=function(t){function o(o,n,a){var r=t.call(this,e.PartType.Admin,n,a)||this;return r.addButton=null,r.optionGroup=o,r.addButton=r.createButton("+"+e.LocalManager.getPopupwin("Button.Add.Admin")),r.addButton.addEventListener(egret.TouchEvent.TOUCH_TAP,r.onAddHandle,r),r.updateData(e.AppProxy.getInstance().admin.getAdmins()),r}return __extends(o,t),o.prototype.onAddHandle=function(t){e.UIManager.getInstance().openPanel(e.PanelType.AdminAdd)},o.prototype.appear=function(){t.prototype.appear.call(this),this.optionGroup.addChild(this.addButton);var e=this.itemBox.layout;e.columnWidth=178},o.prototype.disappear=function(){t.prototype.disappear.call(this),this.optionGroup.removeChild(this.addButton)},o.prototype.onTouchItem=function(t){var o=t.currentTarget,n=new e.UIParamInfo;n.uid=o.identify,e.UIManager.getInstance().openPanel(e.PanelType.AdminAdd,n)},o}(e.PageBox);e.AdminPageBox=t,__reflect(t.prototype,"eas.AdminPageBox")}(eas||(eas={}));var eas;!function(e){var t=function(t){function o(o,n,a){var r=t.call(this,e.PartType.Classes,n,a)||this;return r.addButton=null,r.batchButton=null,r.optionGroup=o,r.addButton=r.createButton("+"+e.LocalManager.getPopupwin("Button.Add.Class")),r.addButton.addEventListener(egret.TouchEvent.TOUCH_TAP,r.onAddHandle,r),r.batchButton=r.createButton("+"+e.LocalManager.getPopupwin("Button.Add.Batch")),r.batchButton.addEventListener(egret.TouchEvent.TOUCH_TAP,r.onBatchAddHandle,r),r}return __extends(o,t),o.prototype.onAddHandle=function(t){e.UIManager.getInstance().openPanel(e.PanelType.ClassAdd)},o.prototype.onBatchAddHandle=function(t){e.FileUploadUtil.chooseFile(this.onLoadFile,this)},o.prototype.onLoadFile=function(t){e.AppProxy.getInstance().upload.tryUploadClasses(t)},o.prototype.appear=function(){t.prototype.appear.call(this);var e=this.optionGroup.layout;e.horizontalAlign=egret.HorizontalAlign.RIGHT,this.optionGroup.addChild(this.batchButton),this.optionGroup.addChild(this.addButton)},o.prototype.disappear=function(){t.prototype.disappear.call(this),this.optionGroup.removeChild(this.addButton),this.optionGroup.removeChild(this.batchButton)},o.prototype.onTouchItem=function(t){var o=t.currentTarget,n=new e.UIParamInfo;n.uid=o.identify,e.UIManager.getInstance().openPanel(e.PanelType.ClassAdd,n)},o}(e.PageBox);e.ClassPageBox=t,__reflect(t.prototype,"eas.ClassPageBox")}(eas||(eas={}));var eas;!function(e){var t=function(t){function o(){var e=t.call(this)||this;return e._cells=[],e._weekLabels=[],e._weekDays=[],e._nowWeeks=[],e._show=!1,e}return __extends(o,t),o.prototype.initDates=function(){for(var t,o=new Date,n=o.getMonth()+1,a=o.getDate(),r=o.getFullYear(),s=e.LogicUtil.calculateMaxDays(n),i=[],p=0;5>p;p++){var l=e.LogicUtil.getWeekDays(r,n,p),u=(Math.abs(l.y-l.x),[]),c=!1;if(l.x>l.y)for(var h=0;7>h;h++){var d=l.x+h;d>s?u.push(new e.DateInfo(r,n+1,d-s,h+1)):(u.push(new e.DateInfo(r,n,d,h+1)),c||(c=d==a?!0:!1))}else if(l.x<1)for(var g=e.LogicUtil.calculateMaxDays(n-1),h=0;7>h;h++){var f=l.x+h,d=f+g;f>0?(u.push(new e.DateInfo(r,n,f,h+1)),c||(c=d==a?!0:!1)):u.push(new e.DateInfo(r,n-1,d,h+1))}else for(var h=0;7>h;h++){var y=l.x+h;u.push(new e.DateInfo(r,n,y,h+1)),c||(c=y==a?!0:!1)}var m=e.LocalManager.getPopupwin("Date.Month.Day",[u[0].month,u[0].day]),v=e.LocalManager.getPopupwin("Date.Month.Day",[u[6].month,u[6].day]),P={name:m+"-"+v,id:""+(p+1)};c&&(this._nowWeeks=u,t=P),this._weekDays.push(u),i.push(P)}this.dateDropdown=new e.DropDown(0,0,t.name,i),this.dateDropdown.selectedValue=t},o.prototype.init=function(){this.initDates();for(var t=new egret.Point(140,46),o=0;o<this._nowWeeks.length;o++){var n=new eui.Label;n.size=20,n.textColor=0,n.textAlign=egret.HorizontalAlign.CENTER,n.verticalAlign=egret.VerticalAlign.MIDDLE,n.width=t.x,n.height=t.y,n.text=e.LocalManager.getPopupwin("Week.Name."+(o+1))+"("+this._nowWeeks[o].month+"."+this._nowWeeks[o].day+")",this._weekLabels.push(n),this.weekGroup.addChild(n)
}for(var a=7,r=5,s=0,o=0;70>o;o++){var i=new e.RoomCell(t);i.width=t.x,i.height=t.y,i.id=o+1;var p=Math.floor(o%a),l=Math.floor(o/a);l>0&&0==Math.floor(l%4)&&(s=15*Math.floor(l/4)),i.x=t.x*p+r*p,i.y=t.y*l+r*l+s,i.addEventListener(egret.TouchEvent.TOUCH_TAP,this.onTouchCell,this),this._cells.push(i),this.cellGroup.addChild(i)}var u=this.dateDropdown.selectedValue.id-1;e.LogUtil.info("ClassroomBox drop select index = "+u);var c=this._weekDays[u];this.updateCells(c)},o.prototype.onTouchCell=function(t){var o=t.currentTarget,n=new e.ItemEvent(e.ItemEvent.TOUCH_CELL,e.PartType.Unknown,o.identify,o);this.dispatchEvent(n)},o.prototype.getCell=function(e){for(var t=0;t<this._cells.length;t++)if(this._cells[t].identify==e)return this._cells[t];return null},o.prototype.appear=function(){if(!this._show){this._show=!0;var e=this.dateGroup.layout;e.horizontalAlign=egret.HorizontalAlign.LEFT,this.dateGroup.addChild(this.dateDropdown)}},o.prototype.disappear=function(){this._show=!1,this.dateGroup.removeChild(this.dateDropdown)},Object.defineProperty(o.prototype,"weekCells",{get:function(){return this._weekLabels},enumerable:!0,configurable:!0}),Object.defineProperty(o.prototype,"cells",{get:function(){return this._cells},enumerable:!0,configurable:!0}),Object.defineProperty(o.prototype,"weekDays",{get:function(){return this._weekDays},enumerable:!0,configurable:!0}),o.prototype.setGroups=function(e,t,o){this.dateGroup=e,this.cellGroup=t,this.weekGroup=o},o.prototype.updateNow=function(){var t=this.dateDropdown.selectedValue.id-1;e.LogUtil.info("classroom drop select index = "+t);var o=this.weekDays[t];this.updateCells(o)},o.prototype.updateCells=function(t){for(var o=this._cells.length,n=new Date,a=n.getDate(),r=n.getMonth()+1,s=0;o>s;s++){var i=this._cells[s],p=i.id%7,l=p-1;0==p&&(l=6);var u=t[l],c=Math.floor(s/7);i.date=u,i.period=c;var h=e.AppProxy.getInstance().classroom.getApply(u,c),d="",g=!1,f=e.ApplyStatus.Idle;h&&(g=!0,i.identify=h.uid,d=h.applicant,f=h.status),u.month<r?i.updateStatus(e.ApplyStatus.Discard,d):u.month>r?g?i.updateStatus(f,d):i.updateStatus(e.ApplyStatus.Idle):u.day<a?i.updateStatus(e.ApplyStatus.Discard,d):g?i.updateStatus(f,d):i.updateStatus(e.ApplyStatus.Idle)}},o}(egret.EventDispatcher);e.ClassroomBox=t,__reflect(t.prototype,"eas.ClassroomBox",["eas.IViewerBox"])}(eas||(eas={}));var eas;!function(e){var t=function(t){function o(e,o,n,a){var r=t.call(this,e,n,a)||this;return r.isSelect=!1,r.selectedPapers=[],r.optionGroup=o,r}return __extends(o,t),o.prototype.setPaper=function(e){this.isSelect=e},o.prototype.appear=function(){t.prototype.appear.call(this);var o=this.itemBox.layout;if(o.columnWidth=230,this.itemType==e.PartType.CourseApply)for(var n=0,a=this.parts;n<a.length;n++){var r=a[n],s=r;s.isSelect=this.isSelect,s.addListener(this,this.onNotifyChild)}},o.prototype.disappear=function(){t.prototype.disappear.call(this)},o.prototype.onTouchItem=function(t){if(this.itemType==e.PartType.Course){var o=t.currentTarget,n=new e.UIParamInfo;n.uid=o.identify,e.UIManager.getInstance().openPanel(e.PanelType.CourseInfo,n)}},o.prototype.onNotifyChild=function(t){if(1==t.id){var o=new e.UIParamInfo;return o.uid=t.uid,void e.UIManager.getInstance().openPanel(e.PanelType.CourseInfo,o)}if(e.MathUtil.isNullOrWhiteSpace(t.key)){e.UIManager.getInstance().closeWindow();var o=new e.UIParamInfo;o.uid=t.uid,e.UIManager.getInstance().openWindow(e.WindowType.PaperCreate,o)}else if(this.isSelect){var n=this.selectedPapers.indexOf(t.uid),a=t.value;n>-1?(this.selectedPapers.splice(n,1),a.source="icon_paper-0_png"):(a.source="icon_paper-1_png",this.selectedPapers.push(t.key))}else{var o=new e.UIParamInfo;o.uid=t.key,e.UIManager.getInstance().openPanel(e.PanelType.PaperInfo,o)}},o}(e.PageBox);e.CoursePageBox=t,__reflect(t.prototype,"eas.CoursePageBox")}(eas||(eas={}));var eas;!function(e){var t;!function(e){e[e.Unknown=0]="Unknown",e[e.Video=1]="Video",e[e.Image=2]="Image",e[e.APK=3]="APK"}(t=e.CourseType||(e.CourseType={}))}(eas||(eas={}));var eas;!function(e){var t=function(t){function o(o,n,a){var r=t.call(this,e.PartType.Paper,n,a,15)||this;return r.addButton=null,r.optionGroup=o,r.addButton=r.createButton("+"+e.LocalManager.getPopupwin("Button.Add.Paper")),r.addButton.addEventListener(egret.TouchEvent.TOUCH_TAP,r.onAddHandle,r),r}return __extends(o,t),o.prototype.onAddHandle=function(t){e.UIManager.getInstance().openWindow(e.WindowType.PaperCreate)},o.prototype.appear=function(){t.prototype.appear.call(this);var e=this.optionGroup.layout;e.horizontalAlign=egret.HorizontalAlign.RIGHT;var o=this.itemBox.layout;o.columnWidth=178,this.optionGroup.addChild(this.addButton)},o.prototype.disappear=function(){t.prototype.disappear.call(this),this.optionGroup.removeChild(this.addButton)},o.prototype.onTouchItem=function(t){var o=t.currentTarget,n=new e.UIParamInfo;n.uid=o.identify,e.UIManager.getInstance().openPanel(e.PanelType.PaperInfo,n)},o}(e.PageBox);e.PaperPageBox=t,__reflect(t.prototype,"eas.PaperPageBox")}(eas||(eas={}));var eas;!function(e){var t=function(t){function o(o,n,a,r){var s=t.call(this,o,a,r,15)||this;return s.addButton=null,s.optionGroup=n,o==e.PartType.PracticeItem&&(s.addButton=s.createButton("+"+e.LocalManager.getPopupwin("Button.Add.Practice")),s.addButton.addEventListener(egret.TouchEvent.TOUCH_TAP,s.onAddHandle,s)),s}return __extends(o,t),o.prototype.onAddHandle=function(t){e.UIManager.getInstance().openPanel(e.PanelType.PracticeAdd)},o.prototype.appear=function(){t.prototype.appear.call(this);var o=this.itemBox.layout;o.columnWidth=178,this.itemType==e.PartType.PracticeItem&&this.optionGroup.addChild(this.addButton)},o.prototype.disappear=function(){t.prototype.disappear.call(this),this.itemType==e.PartType.PracticeItem&&this.optionGroup.removeChild(this.addButton)},o.prototype.onTouchItem=function(t){var o=t.currentTarget,n=new e.UIParamInfo;n.uid=o.identify,e.UIManager.getInstance().openPanel(e.PanelType.PracticeAdd,n)},o}(e.PageBox);e.PracticePageBox=t,__reflect(t.prototype,"eas.PracticePageBox")}(eas||(eas={}));var eas;!function(e){var t=function(t){function o(o,n,a){var r=t.call(this,e.PartType.School,n,a)||this;return r.addButton=null,r.optionGroup=o,r.addButton=r.createButton("+"+e.LocalManager.getPopupwin("Button.Add.School")),r.addButton.addEventListener(egret.TouchEvent.TOUCH_TAP,r.onAddHandle,r),r}return __extends(o,t),o.prototype.onAddHandle=function(t){e.UIManager.getInstance().openPanel(e.PanelType.SchoolAdd)},o.prototype.appear=function(){t.prototype.appear.call(this),this.optionGroup.addChild(this.addButton);var e=this.itemBox.layout;e.columnWidth=230},o.prototype.disappear=function(){t.prototype.disappear.call(this),this.optionGroup.removeChild(this.addButton)},o.prototype.onTouchItem=function(t){var o=t.currentTarget,n=new e.UIParamInfo;n.uid=o.identify,e.UIManager.getInstance().openPanel(e.PanelType.SchoolAdd,n)},o}(e.PageBox);e.SchoolPageBox=t,__reflect(t.prototype,"eas.SchoolPageBox")}(eas||(eas={}));var eas;!function(e){var t=function(t){function o(o,n,a){var r=t.call(this,e.PartType.Teacher,n,a,15)||this;return r.addButton=null,r.batchButton=null,r.optionGroup=o,r.addButton=r.createButton("+"+e.LocalManager.getPopupwin("Button.Add.Teacher")),r.addButton.addEventListener(egret.TouchEvent.TOUCH_TAP,r.onAddHandle,r),r.batchButton=r.createButton("+"+e.LocalManager.getPopupwin("Button.Add.Batch")),r.batchButton.addEventListener(egret.TouchEvent.TOUCH_TAP,r.onBatchAddHandle,r),r}return __extends(o,t),o.prototype.onAddHandle=function(t){e.UIManager.getInstance().openPanel(e.PanelType.TeacherInfo)},o.prototype.onBatchAddHandle=function(t){e.FileUploadUtil.chooseFile(this.onLoadFile,this)},o.prototype.onLoadFile=function(t){e.AppProxy.getInstance().upload.tryUploadTeachers(t)},o.prototype.appear=function(){t.prototype.appear.call(this);var e=this.optionGroup.layout;e.horizontalAlign=egret.HorizontalAlign.RIGHT,this.optionGroup.addChild(this.batchButton),this.optionGroup.addChild(this.addButton);var o=this.itemBox.layout;o.columnWidth=178},o.prototype.disappear=function(){t.prototype.disappear.call(this),this.optionGroup.removeChild(this.batchButton),this.optionGroup.removeChild(this.addButton)},o.prototype.onTouchItem=function(t){var o=t.currentTarget,n=new e.UIParamInfo;n.uid=o.identify,e.UIManager.getInstance().openPanel(e.PanelType.TeacherInfo,n)},o}(e.PageBox);e.TeacherPageBox=t,__reflect(t.prototype,"eas.TeacherPageBox")}(eas||(eas={}));var eas;!function(e){var t=function(t){function o(){var o=t.call(this,e.PageType.Login)||this;return o.menuTabBar=null,o.role=e.RoleType.SuperAdmin,o}return __extends(o,t),o.prototype.onNotifyHandle=function(t){t.type==e.ModuleType.Login&&(e.AppProxy.getInstance().user.type==e.RoleType.SuperAdmin?(e.UIManager.getInstance().closePage(e.PageType.Login),e.UIManager.getInstance().openPage(e.PageType.SuperHome)):e.AppProxy.getInstance().user.type==e.RoleType.SchoolAdmin?(e.UIManager.getInstance().closePage(e.PageType.Login),e.UIManager.getInstance().openPage(e.PageType.SchoolHome)):(e.UIManager.getInstance().closePage(e.PageType.Login),e.UIManager.getInstance().openPage(e.PageType.TeacherHome))),e.LogUtil.info("login success!!!")},o.prototype.onTabbarItem=function(t){var o=t.item.id;this.pswInput.prompt=e.LocalManager.getPopupwin("Login.Label.Psw"),this.userInput.prompt=e.LocalManager.getPopupwin("Login.Label.User"),this.pswInput.text="",this.userInput.text="",this.role=o,o==e.RoleType.SchoolAdmin||o==e.RoleType.SuperAdmin||o==e.RoleType.Teacher},o.prototype.onLoginHandle=function(t){var o=this.userInput.text,n=this.pswInput.text;e.LogUtil.info("login handler:name = "+o+";psw = "+n+";role = "+this.role),e.AppProxy.getInstance().tryLogin(o,n,this.role)},o.prototype.init=function(){t.prototype.init.call(this),this.userInput.skinName="resource/zui_skins/ZTextInputSkin.exml",this.pswInput.skinName="resource/zui_skins/ZTextInputSkin.exml",this.pswInput.prompt=e.LocalManager.getPopupwin("Login.Label.Psw"),this.userInput.prompt=e.LocalManager.getPopupwin("Login.Label.User"),this.titleLabel.text=e.LocalManager.getPopupwin("Login.Label.Title");var o=new egret.Shape;o.graphics.beginFill(16777215,1),o.graphics.drawRect(0,0,this.contentGroup.width,this.contentGroup.height),o.graphics.endFill(),this.contentGroup.addChildAt(o,0),this.loginButton.addEventListener(egret.TouchEvent.TOUCH_TAP,this.onLoginHandle,this),this.loginButton.label=e.LocalManager.getPopupwin("Login.Button.Login"),this.menuTabBar.addEventListener(eui.ItemTapEvent.ITEM_TAP,this.onTabbarItem,this);var n=[];n.push({name:e.LocalManager.getPopupwin("Role.Type.Super"),id:e.RoleType.SuperAdmin}),n.push({name:e.LocalManager.getPopupwin("Role.Type.School"),id:e.RoleType.SchoolAdmin}),n.push({name:e.LocalManager.getPopupwin("Role.Type.Teacher"),id:e.RoleType.Teacher}),this.menuTabBar.dataProvider=new eui.ArrayCollection(n)},o.prototype.opened=function(){e.NotifyManager.getInstance().register(e.NotifyType.OnHttpResponse,this,this.onNotifyHandle),e.LogUtil.info("LoginPage is opened!!!!"+this.param)},o.prototype.close=function(){t.prototype.close.call(this),e.NotifyManager.getInstance().remove(e.NotifyType.OnHttpResponse,this),e.LogUtil.info("LoginPage is closed!!!!")},o}(e.AppPage);e.LoginPage=t,__reflect(t.prototype,"eas.LoginPage")}(eas||(eas={}));var eas;!function(e){var t=function(t){function o(){return t.call(this,e.PageType.Map)||this}return __extends(o,t),o.prototype.init=function(){t.prototype.init.call(this)},o.prototype.opened=function(){},o}(e.AppPage);e.MapPage=t,__reflect(t.prototype,"eas.MapPage")}(eas||(eas={}));var eas;!function(e){var t;!function(e){e[e.Classroom=1]="Classroom",e[e.Teacher=2]="Teacher",e[e.Classes=3]="Classes",e[e.Course=4]="Course"}(t||(t={}));var o=function(o){function n(){var t=o.call(this,e.PageType.SchoolHome)||this;return t.userImage=null,t.logoutButton=null,t.cellGroup=null,t.weekGroup=null,t.roomGroup=null,t.itemGroup=null,t.pageGroup=null,t.msgGroup=null,t.menuTabBar=null,t.msgLabel=null,t.teacherBox=null,t.classBox=null,t.courseBox=null,t.nowBox=null,t.roomBox=new e.ClassroomBox,t}return __extends(n,o),n.prototype.onNotifyHandle=function(t){if(t.type==e.ModuleType.Classroom)t.code==e.ClassroomCode.ApplyGetAll?this.roomBox.updateNow():t.code==e.ClassroomCode.ApplyFreeze?(e.UIManager.getInstance().closeWindow(),this.roomBox.updateNow()):(this.updateMsgCount(),this.roomBox.updateNow());else if(t.type==e.ModuleType.School){if(t.code==e.SchoolCode.GetAll){e.AppProxy.getInstance().classroom.tryGetAllApplies();var o=e.AppProxy.getInstance().user.school;e.AppProxy.getInstance().teacher.tryGetTeachers(o),e.AppProxy.getInstance().classes.tryGetAll(o)}}else t.type==e.ModuleType.Teacher?t.code==e.TeacherCode.GetAll&&this.teacherBox.updateData(e.AppProxy.getInstance().getTeachers(e.AppProxy.getInstance().user.school)):t.type==e.ModuleType.Classes?t.code==e.ClassesCode.GetAll&&this.classBox.updateData(e.AppProxy.getInstance().getClasses(e.AppProxy.getInstance().user.school)):t.type==e.ModuleType.Admin?t.code==e.AdminCode.Logout&&(e.UIManager.getInstance().closeWindow(),e.UIManager.getInstance().closeAllPanels(),e.UIManager.getInstance().closePage(e.PageType.SchoolHome),e.UIManager.getInstance().openPage(e.PageType.Login)):t.type==e.ModuleType.Course&&t.code==e.CourseCode.GetAll&&this.courseBox.updateData(e.AppProxy.getInstance().course.courses)},n.prototype.onTabbarItem=function(e){var o=e.item.id;null!=this.nowBox&&this.nowBox.disappear(),o==t.Classroom?this.nowBox=this.roomBox:o==t.Course?this.nowBox=this.courseBox:o==t.Teacher?this.nowBox=this.teacherBox:o==t.Classes?this.nowBox=this.classBox:this.nowBox=null,o==t.Classroom?(this.roomGroup.visible=!0,this.itemGroup.visible=!1):(this.roomGroup.visible=!1,this.itemGroup.visible=!0),null!=this.nowBox&&this.nowBox.appear()},n.prototype.init=function(){o.prototype.init.call(this),this.roomBox.setGroups(this.optGroup,this.cellGroup,this.weekGroup),this.teacherBox=new e.TeacherPageBox(this.optGroup,this.itemGroup,this.pageGroup),this.classBox=new e.ClassPageBox(this.optGroup,this.itemGroup,this.pageGroup),this.courseBox=new e.CoursePageBox(e.PartType.Course,this.optGroup,this.itemGroup,this.pageGroup),this.roomBox.addEventListener(e.ItemEvent.TOUCH_CELL,this.onTouchItem,this),this.courseBox.updateData(e.AppProxy.getInstance().course.courses),this.menuTabBar.addEventListener(eui.ItemTapEvent.ITEM_TAP,this.onTabbarItem,this);var n=[];n.push({name:e.LocalManager.getPopupwin("School.Tab.Classroom"),id:t.Classroom}),n.push({name:e.LocalManager.getPopupwin("School.Tab.Teacher"),id:t.Teacher}),n.push({name:e.LocalManager.getPopupwin("School.Tab.Class"),id:t.Classes}),n.push({name:e.LocalManager.getPopupwin("School.Tab.Course"),id:t.Course}),this.menuTabBar.dataProvider=new eui.ArrayCollection(n),this.roomBox.init(),this.roomBox.dateDropdown.addEventListener(e.DropDown.EVENT_SELECTED,this.onDropSelected,this),this.roomGroup.visible=!0,this.itemGroup.visible=!1,this.roomBox.appear(),this.nowBox=this.roomBox,this.logoutButton.addEventListener(egret.TouchEvent.TOUCH_TAP,this.onLogout,this),this.logoutButton.label=e.LocalManager.getPopupwin("Login.Button.Logout"),this.userImage.touchEnabled=!0,this.userImage.addEventListener(egret.TouchEvent.TOUCH_TAP,this.onClickUser,this),this.drawCircle(16777215,15,this.msgLabel.parent),e.AppProxy.getInstance().school.tryGetAll()},n.prototype.opened=function(){o.prototype.opened.call(this),e.NotifyManager.getInstance().register(e.NotifyType.OnHttpResponse,this,this.onNotifyHandle),e.LogUtil.info("SchoolPage is opened!!!!"),this.updateMsgCount()},n.prototype.close=function(){o.prototype.close.call(this),e.NotifyManager.getInstance().remove(e.NotifyType.OnHttpResponse,this),e.LogUtil.info("SchoolPage is closed!!!!")},n.prototype.updateMsgCount=function(){var t=e.AppProxy.getInstance().classroom.getOrderCount();t>0?(this.msgGroup.visible=!0,this.msgLabel.text=t+""):this.msgGroup.visible=!1},n.prototype.onClickUser=function(t){e.UIManager.getInstance().openPanel(e.PanelType.UserInfo)},n.prototype.onLogout=function(t){e.AppProxy.getInstance().admin.tryLogout()},n.prototype.onDropSelected=function(t){var o=t.data.id-1;e.LogUtil.info("SchoolPage drop select index = "+o);for(var n=this.roomBox.weekDays[o],a=0;a<n.length;a++){var r=this.roomBox.weekCells[a];r.text=e.LocalManager.getPopupwin("Week.Name."+(a+1))+"("+n[a].month+"."+n[a].day+")"}this.roomBox.updateCells(n)},n.prototype.onTouchItem=function(t){var o=t.data;e.LogUtil.info("SchoolPage onTouchItem that id = "+o.id);var n=e.AppProxy.getInstance().classroom.getApply(o.date,o.period),a=new e.UIParamInfo;if(a.data=o.date,a.count=o.period,a.uid=o.identify,a.id=o.id,n){if(n.status==e.ApplyStatus.Freeze){a.tip=e.LocalManager.getException("Alert.Room.Open");var r=e.UIManager.getInstance().openWindow(e.WindowType.Alert,a);r.addEventListener(e.AlertWindow.EVENT_ALERT_SURE,this.onWindowHandler,this)}else if(n.status==e.ApplyStatus.Order)e.UIManager.getInstance().openWindow(e.WindowType.ApplyInfo,a);else if(n.status==e.ApplyStatus.Idle){a.tip=e.LocalManager.getException("Alert.Room.Close");var s=e.UIManager.getInstance().openWindow(e.WindowType.Alert,a);s.addEventListener(e.AlertWindow.EVENT_ALERT_SURE,this.onWindowHandler,this)}}else{a.tip=e.LocalManager.getException("Alert.Room.Close");var i=e.UIManager.getInstance().openWindow(e.WindowType.Alert,a);i.addEventListener(e.AlertWindow.EVENT_ALERT_SURE,this.onWindowHandler,this)}},n.prototype.onWindowHandler=function(t){var o=t.data,n=e.AppProxy.getInstance().classroom.getApply(o.data,o.count);n?n.status==e.ApplyStatus.Idle?e.AppProxy.getInstance().classroom.tryFreezeApply(o.data,o.count,!0):n.status==e.ApplyStatus.Freeze&&e.AppProxy.getInstance().classroom.tryFreezeApply(o.data,o.count,!1):e.AppProxy.getInstance().classroom.tryFreezeApply(o.data,o.count,!0)},n}(e.AppPage);e.SchoolHomePage=o,__reflect(o.prototype,"eas.SchoolHomePage")}(eas||(eas={}));var eas;!function(e){var t;!function(e){e[e.School=1]="School",e[e.Course=2]="Course",e[e.Practice=3]="Practice",e[e.Admin=4]="Admin",e[e.Statis=5]="Statis"}(t||(t={}));var o=function(o){function n(){var t=o.call(this,e.PageType.SuperHome)||this;return t.userImage=null,t.logoutButton=null,t.optGroup=null,t.itemGroup=null,t.pageGroup=null,t.menuTabBar=null,t.schoolBox=null,t.adminBox=null,t.courseBox=null,t.practiceBox=null,t.nowBox=null,t}return __extends(n,o),n.prototype.onNotifyHandle=function(t){t.type==e.ModuleType.Admin?t.code==e.AdminCode.AddOne&&e.UIManager.getInstance().closePanel(e.PanelType.AdminAdd):t.type==e.ModuleType.School?t.code==e.SchoolCode.GetAll?this.schoolBox.updateData(e.AppProxy.getInstance().school.schools):t.code==e.SchoolCode.Add&&e.UIManager.getInstance().closePanel(e.PanelType.SchoolAdd):t.type==e.ModuleType.Practice?t.code==e.PracticeCode.GetAll?this.practiceBox.updateData(e.AppProxy.getInstance().practice.practices):t.code==e.PracticeCode.Add&&e.UIManager.getInstance().closePanel(e.PanelType.PracticeAdd):t.type==e.ModuleType.Admin?t.code==e.AdminCode.Logout&&(e.UIManager.getInstance().closeWindow(),e.UIManager.getInstance().closeAllPanels(),e.UIManager.getInstance().closePage(e.PageType.SuperHome),e.UIManager.getInstance().openPage(e.PageType.Login)):t.type==e.ModuleType.Course&&t.code==e.CourseCode.GetAll&&this.courseBox.updateData(e.AppProxy.getInstance().course.courses)},n.prototype.onClickUser=function(t){e.UIManager.getInstance().openPanel(e.PanelType.UserInfo)},n.prototype.onLogout=function(t){e.AppProxy.getInstance().admin.tryLogout()},n.prototype.onTabbarItem=function(e){var o=e.item.id;null!=this.nowBox&&this.nowBox.disappear(),o==t.School?this.nowBox=this.schoolBox:o==t.Course?this.nowBox=this.courseBox:o==t.Practice?this.nowBox=this.practiceBox:o==t.Admin?this.nowBox=this.adminBox:o==t.Statis?this.nowBox=null:this.nowBox=null,null!=this.nowBox&&this.nowBox.appear()},n.prototype.init=function(){this.schoolBox=new e.SchoolPageBox(this.optGroup,this.itemGroup,this.pageGroup),this.adminBox=new e.AdminPageBox(this.optGroup,this.itemGroup,this.pageGroup),this.courseBox=new e.CoursePageBox(e.PartType.Course,this.optGroup,this.itemGroup,this.pageGroup),this.practiceBox=new e.PracticePageBox(e.PartType.PracticeItem,this.optGroup,this.itemGroup,this.pageGroup),this.courseBox.updateData(e.AppProxy.getInstance().course.courses),this.menuTabBar.addEventListener(eui.ItemTapEvent.ITEM_TAP,this.onTabbarItem,this);var o=[];o.push({name:e.LocalManager.getPopupwin("Super.Tab.School"),id:t.School}),o.push({name:e.LocalManager.getPopupwin("Super.Tab.Course"),id:t.Course}),o.push({name:e.LocalManager.getPopupwin("Super.Tab.Practice"),id:t.Practice}),o.push({name:e.LocalManager.getPopupwin("Super.Tab.Admin"),id:t.Admin}),o.push({name:e.LocalManager.getPopupwin("Super.Tab.Statis"),id:t.Statis}),this.menuTabBar.dataProvider=new eui.ArrayCollection(o),this.logoutButton.addEventListener(egret.TouchEvent.TOUCH_TAP,this.onLogout,this),this.logoutButton.label=e.LocalManager.getPopupwin("Login.Button.Logout"),this.userImage.touchEnabled=!0,this.userImage.addEventListener(egret.TouchEvent.TOUCH_TAP,this.onClickUser,this),e.AppProxy.getInstance().school.tryGetAll(),e.AppProxy.getInstance().practice.tryGetAll()},n.prototype.opened=function(){o.prototype.opened.call(this),e.NotifyManager.getInstance().register(e.NotifyType.OnHttpResponse,this,this.onNotifyHandle),e.LogUtil.info("SuperPage is opened!!!!"),this.schoolBox.appear(),this.nowBox=this.schoolBox},n.prototype.close=function(){o.prototype.close.call(this),e.NotifyManager.getInstance().remove(e.NotifyType.OnHttpResponse,this),e.LogUtil.info("SuperPage is closed!!!!")},n}(e.AppPage);e.SuperHomePage=o,__reflect(o.prototype,"eas.SuperHomePage")}(eas||(eas={}));var eas;!function(e){var t;!function(e){e[e.Classroom=0]="Classroom",e[e.Paper=1]="Paper",e[e.Course=2]="Course"}(t||(t={}));var o=function(o){function n(){var t=o.call(this,e.PageType.TeacherHome)||this;return t.userImage=null,t.logoutButton=null,t.cellGroup=null,t.weekGroup=null,t.roomGroup=null,t.itemGroup=null,t.pageGroup=null,t.menuTabBar=null,t.roomBox=null,t.paperBox=null,t.courseBox=null,t.nowBox=null,t.roomBox=new e.ClassroomBox,t}return __extends(n,o),n.prototype.onNotifyHandle=function(t){if(t.type==e.ModuleType.Classroom){if(t.code==e.ClassroomCode.ApplyGetAll){var o=this.roomBox.dateDropdown.selectedValue.id-1;e.LogUtil.info("SchoolPage drop select index = "+o);var n=this.roomBox.weekDays[o];this.roomBox.updateCells(n)}}else if(t.type==e.ModuleType.School){if(t.code==e.SchoolCode.GetAll){var a=e.AppProxy.getInstance().user;e.AppProxy.getInstance().teacher.tryGetTeacher(a.uid),e.AppProxy.getInstance().classroom.tryGetAllApplies(),e.AppProxy.getInstance().practice.tryGetAll()}}else if(t.type==e.ModuleType.Teacher){if(t.code==e.TeacherCode.GetInfo){var a=e.AppProxy.getInstance().user,r=e.AppProxy.getInstance().school.getTeacher(a.uid);this.paperBox.updateData(r.allPapers)}}else t.type==e.ModuleType.Admin?t.code==e.AdminCode.Logout&&(e.UIManager.getInstance().closeWindow(),e.UIManager.getInstance().closeAllPanels(),e.UIManager.getInstance().closePage(e.PageType.TeacherHome),e.UIManager.getInstance().openPage(e.PageType.Login)):t.type==e.ModuleType.Course&&t.code==e.CourseCode.GetAll&&this.courseBox.updateData(e.AppProxy.getInstance().course.courses)},n.prototype.onTabbarItem=function(e){var o=e.item.id;null!=this.nowBox&&this.nowBox.disappear(),o==t.Classroom?this.nowBox=this.roomBox:o==t.Course?this.nowBox=this.courseBox:o==t.Paper?this.nowBox=this.paperBox:this.nowBox=null,o==t.Classroom?(this.roomGroup.visible=!0,this.itemGroup.visible=!1):(this.roomGroup.visible=!1,this.itemGroup.visible=!0),null!=this.nowBox&&this.nowBox.appear()},n.prototype.init=function(){this.roomBox.setGroups(this.optGroup,this.cellGroup,this.weekGroup),this.paperBox=new e.PaperPageBox(this.optGroup,this.itemGroup,this.pageGroup),this.courseBox=new e.CoursePageBox(e.PartType.CourseApply,this.optGroup,this.itemGroup,this.pageGroup),this.roomBox.addEventListener(e.ItemEvent.TOUCH_CELL,this.onTouchItem,this),this.courseBox.updateData(e.AppProxy.getInstance().course.courses),this.menuTabBar.addEventListener(eui.ItemTapEvent.ITEM_TAP,this.onTabbarItem,this);var o=[];o.push({name:e.LocalManager.getPopupwin("School.Tab.Classroom"),id:t.Classroom}),o.push({name:e.LocalManager.getPopupwin("School.Tab.Paper"),id:t.Paper}),o.push({name:e.LocalManager.getPopupwin("School.Tab.Course"),id:t.Course}),this.menuTabBar.dataProvider=new eui.ArrayCollection(o),this.roomBox.init(),this.roomBox.dateDropdown.addEventListener(e.DropDown.EVENT_SELECTED,this.onDropSelected,this),this.roomGroup.visible=!0,this.itemGroup.visible=!1,this.roomBox.appear(),this.nowBox=this.roomBox,this.logoutButton.addEventListener(egret.TouchEvent.TOUCH_TAP,this.onLogout,this),this.logoutButton.label=e.LocalManager.getPopupwin("Login.Button.Logout"),this.userImage.touchEnabled=!0,this.userImage.hasEventListener(egret.TouchEvent.TOUCH_TAP)||this.userImage.addEventListener(egret.TouchEvent.TOUCH_TAP,this.onClickUser,this),e.AppProxy.getInstance().school.tryGetAll()},n.prototype.opened=function(){o.prototype.opened.call(this),e.NotifyManager.getInstance().register(e.NotifyType.OnHttpResponse,this,this.onNotifyHandle),e.LogUtil.info("SchoolPage is opened!!!!")},n.prototype.close=function(){o.prototype.close.call(this),e.NotifyManager.getInstance().remove(e.NotifyType.OnHttpResponse,this),e.LogUtil.info("SchoolPage is closed!!!!")},n.prototype.onClickUser=function(t){e.UIManager.getInstance().openPanel(e.PanelType.UserInfo)},n.prototype.onLogout=function(t){e.AppProxy.getInstance().admin.tryLogout()},n.prototype.onDropSelected=function(t){var o=t.data.id-1;e.LogUtil.info("SchoolPage drop select index = "+o);for(var n=this.roomBox.weekDays[o],a=0;a<n.length;a++){var r=this.roomBox.weekCells[a];r.text=e.LocalManager.getPopupwin("Week.Name."+(a+1))+"("+n[a].month+"."+n[a].day+")"}this.roomBox.updateCells(n)},n.prototype.onTouchItem=function(t){var o=t.data;e.LogUtil.info("TeacherHome onTouchItem that id = "+o.identify);var n=new e.UIParamInfo;n.uid=o.identify,n.data=o.date,n.count=o.period,n.id=o.id;var a=e.AppProxy.getInstance().classroom.getApply(o.date,o.period);a?a.status==e.ApplyStatus.Idle?e.UIManager.getInstance().openWindow(e.WindowType.ApplyRoom,n):e.UIManager.getInstance().openWindow(e.WindowType.ApplyInfo,n):e.UIManager.getInstance().openWindow(e.WindowType.ApplyRoom,n)},n.prototype.onTouchButton=function(e){},n}(e.AppPage);e.TeacherHomePage=o,__reflect(o.prototype,"eas.TeacherHomePage")}(eas||(eas={}));var eas;!function(e){var t=function(t){function o(){return t.call(this,e.PanelType.AdminAdd)||this}return __extends(o,t),o.prototype.init=function(){t.prototype.init.call(this),this.addButton.addEventListener(egret.TouchEvent.TOUCH_TAP,this.onAddHandler,this),this.idLabel.text=e.LocalManager.getPopupwin("Admin.Info.ID"),this.nameLabel.text=e.LocalManager.getPopupwin("Admin.Info.Name"),this.phoneLabel.text=e.LocalManager.getPopupwin("Admin.Info.Phone"),this.pswLabel.text=e.LocalManager.getPopupwin("Admin.Info.Password"),this.emailLabel.text=e.LocalManager.getPopupwin("Admin.Info.Email"),this.superRadio.label=e.LocalManager.getPopupwin("Role.Type.Super"),this.schoolRadio.label=e.LocalManager.getPopupwin("Role.Type.School")},o.prototype.opened=function(){var t=e.AppProxy.getInstance().admin.getAdmin(this.param.uid);t?(this.addButton.label=e.LocalManager.getPopupwin("Button.Name.Save"),this.titleLabel.text=e.LocalManager.getPopupwin("Admin.Info.Title"),this.idInput.text=t.id+"",this.nameInput.text=t.name,this.pswInput.visible=!1,this.phoneInput.text=t.phone,0==t.type?this.superRadio.selected=!0:this.schoolRadio.selected=!0):(this.pswInput.visible=!0,this.addButton.label=e.LocalManager.getPopupwin("Button.Name.Add"),this.titleLabel.text=e.LocalManager.getPopupwin("Admin.Add.Title"),this.idInput.text=e.AppProxy.getInstance().getAdminID()+"",this.nameInput.text="",this.pswInput.text="",this.phoneInput.text="",this.schoolRadio.selected=!0)},o.prototype.onAddHandler=function(t){var o=e.AppProxy.getInstance().admin.getAdmin(this.param.uid);o||(o=new e.AdminInfo),o.id=e.AppProxy.getInstance().getAdminID(),o.name=this.nameInput.text,o.phone=this.phoneInput.text,o.password=this.pswInput.text,o.email=this.emailInput.text,this.superRadio.selected?o.type=0:o.type=1,e.AppProxy.getInstance().admin.tryAddAdmin(o)},o}(e.AppPanel);e.AdminAddPanel=t,__reflect(t.prototype,"eas.AdminAddPanel")}(eas||(eas={}));var eas;!function(e){var t=function(t){function o(){var o=t.call(this,e.PanelType.ClassAdd)||this;return o.idLabel=null,o.nameLabel=null,o.countLabel=null,o.gradeLabel=null,o.schoolLabel=null,o.idInput=null,o.nameInput=null,o.countInput=null,o.gradeInput=null,o.schoolInput=null,o.inputs=[],o.skinName="resource/zui_skins/ClassInfoPanel.exml",o}return __extends(o,t),o.prototype.init=function(){t.prototype.init.call(this),this.titleLabel.text=e.LocalManager.getPopupwin("Class.Info.Title"),this.inputs.push(this.idInput),this.inputs.push(this.nameInput),this.inputs.push(this.countInput),this.inputs.push(this.gradeInput),this.inputs.push(this.schoolInput)},o.prototype.opened=function(){var t=e.AppProxy.getInstance().getDefSchool(),o=t.getClass(this.param.uid);if(null!=o){this.idInput.text=e.LocalManager.getPopupwin("Class.Info.ID")+"："+o.id,this.nameInput.text=e.LocalManager.getPopupwin("Class.Info.Name")+"："+o.name,this.gradeInput.text=e.LocalManager.getPopupwin("Class.Info.Grade")+"："+o.grade,this.countInput.text=e.LocalManager.getPopupwin("Class.Info.Class")+"："+o.sn,this.schoolInput.text=e.LocalManager.getPopupwin("Class.Info.School")+"："+t.name;for(var n=0,a=this.inputs;n<a.length;n++){var r=a[n];r.enabled=!1}}else{for(var s=0,i=this.inputs;s<i.length;s++){var r=i[s];r.enabled=!0,r.text=""}this.idInput.prompt=e.LocalManager.getPopupwin("Class.Info.ID"),this.nameInput.prompt=e.LocalManager.getPopupwin("Class.Info.Name"),this.gradeInput.prompt=e.LocalManager.getPopupwin("Class.Info.Grade"),this.countInput.prompt=e.LocalManager.getPopupwin("Class.Info.Class"),this.schoolInput.prompt=e.LocalManager.getPopupwin("Class.Info.School")}},o}(e.AppPanel);e.ClassInfoPanel=t,__reflect(t.prototype,"eas.ClassInfoPanel")}(eas||(eas={}));var eas;!function(e){var t=function(t){function o(){var o=t.call(this,e.PanelType.CourseInfo)||this;return o.starImages=[],o}return __extends(o,t),o.prototype.onNotifyImage=function(t){t.uid==this.param.uid&&(this.icon.texture=e.ImageManager.getInstance().getTexture(t.uid))},o.prototype.init=function(){t.prototype.init.call(this),this.titleLabel.text=e.LocalManager.getPopupwin("Course.Info.Title"),this.descLabel.text=e.LocalManager.getPopupwin("Course.Info.Desc"),this.starImages.push(this.starOne),this.starImages.push(this.starTwo),this.starImages.push(this.starThree),this.starImages.push(this.starFour),this.starImages.push(this.starFive)},o.prototype.opened=function(){e.NotifyManager.getInstance().register(e.NotifyType.OnImageUpdate,this,this.onNotifyImage);var t=e.AppProxy.getInstance().course.getCourse(this.param.uid);if(e.LogUtil.info("CourseInfoPanel is opened!!!"+t),t){this.nameInput.text=t.name,this.descArea.text=t.description,this.typeInput.text=t.subject;var o=e.ImageManager.getInstance().getImageInfo(t.uid,t.iconURL);null!=o&&(this.icon.texture=o.texture),e.LogicUtil.updateStars(this.starImages,t.star)}else this.nameInput.text="",this.descArea.text="",this.typeInput.text=""},o.prototype.clear=function(){e.NotifyManager.getInstance().remove(e.NotifyType.OnImageUpdate,this)},o}(e.AppPanel);e.CourseInfoPanel=t,__reflect(t.prototype,"eas.CourseInfoPanel")}(eas||(eas={}));var eas;!function(e){var t=function(t){function o(){var o=t.call(this,e.PanelType.PaperInfo)||this;return o.practiceLabel=null,o.courseInput=null,o.icon=null,o.subjectInput=null,o.nameInput=null,o.dataList=null,o.skinName="resource/zui_skins/PaperInfoPanel.exml",o}return __extends(o,t),o.prototype.onNotifyImage=function(t){t.uid==this.param.uid&&(this.icon.texture=e.ImageManager.getInstance().getTexture(t.uid))},o.prototype.init=function(){t.prototype.init.call(this),this.title=e.LocalManager.getPopupwin("Paper.Info.Title"),this.practiceLabel.text=e.LocalManager.getPopupwin("Paper.Info.Practice")
},o.prototype.opened=function(){e.NotifyManager.getInstance().register(e.NotifyType.OnImageUpdate,this,this.onNotifyImage),e.LogUtil.info("PaperInfoPanel is opened!!!");var t=e.AppProxy.getInstance().school.getTeacher(e.AppProxy.getInstance().user.uid),o=t.getPaper(this.param.uid);if(o){this.nameInput.text=o.name;var n=e.AppProxy.getInstance().course.getCourse(o.course);if(n){this.courseInput.text=n.name,this.subjectInput.text=n.subject;var a=e.ImageManager.getInstance().getImageInfo(n.uid,n.iconURL);null!=a&&(this.icon.texture=a.texture)}else this.courseInput.text="",this.subjectInput.text="";for(var r=[],s=0,i=o.practices;s<i.length;s++){var p=i[s],l=e.AppProxy.getInstance().practice.getPracticeByID(p);l&&r.push(l)}this.dataList.dataProvider=new eui.ArrayCollection(r)}},o.prototype.clear=function(){e.NotifyManager.getInstance().remove(e.NotifyType.OnImageUpdate,this)},o}(e.AppPanel);e.PaperInfoPanel=t,__reflect(t.prototype,"eas.PaperInfoPanel")}(eas||(eas={}));var eas;!function(e){var t=function(t){function o(){var o=t.call(this,e.PanelType.PracticeAdd)||this;return o.nameLabel=null,o.descLabel=null,o.gradeLabel=null,o.subLabel=null,o.courseLabel=null,o.addButton=null,o.nameInput=null,o.descInput=null,o.typeGroup=null,o.singleRadio=null,o.multiRadio=null,o.judgeRadio=null,o.selectGroup=null,o.judegeGroup=null,o.childGroup=null,o.gradeGroup=null,o.subGroup=null,o.courseGroup=null,o.newOptGroup=null,o.rightRadio=null,o.wrongRadio=null,o.gradeInput=null,o.subInput=null,o.courseInput=null,o.optionParts=[],o.gradeDrop=null,o.subjectDrop=null,o.courseDrop=null,o.newOptButton=null,o}return __extends(o,t),o.prototype.init=function(){t.prototype.init.call(this),this.descInput.border=!0,this.descInput.background=!0,this.titleLabel.text=e.LocalManager.getPopupwin("Practice.Info.Title"),this.nameLabel.text=e.LocalManager.getPopupwin("Practice.Label.Name"),this.singleRadio.label=e.LocalManager.getPopupwin("Practice.Label.Single"),this.multiRadio.label=e.LocalManager.getPopupwin("Practice.Label.Multy"),this.judgeRadio.label=e.LocalManager.getPopupwin("Practice.Label.Judge"),this.descLabel.text=e.LocalManager.getPopupwin("Practice.Label.Desc"),this.rightRadio.label=e.LocalManager.getPopupwin("Practice.Label.Right"),this.wrongRadio.label=e.LocalManager.getPopupwin("Practice.Label.Wrong"),this.gradeLabel.text=e.LocalManager.getPopupwin("Practice.Label.Grade"),this.subLabel.text=e.LocalManager.getPopupwin("Practice.Label.Subject"),this.courseLabel.text=e.LocalManager.getPopupwin("Practice.Label.Course"),this.addButton.label=e.LocalManager.getPopupwin("Button.Name.Add"),this.addButton.addEventListener(egret.TouchEvent.TOUCH_TAP,this.onTouchHandler,this),this.newOptButton=new e.IconButton(50,30),this.newOptButton.updateIcon("icon_add-0_png"),this.newOptGroup.addChild(this.newOptButton),this.newOptButton.addEventListener(egret.TouchEvent.TOUCH_TAP,this.onTouchHandler,this),this.singleRadio.addEventListener(egret.TouchEvent.TOUCH_TAP,this.onTouchHandler,this),this.multiRadio.addEventListener(egret.TouchEvent.TOUCH_TAP,this.onTouchHandler,this),this.judgeRadio.addEventListener(egret.TouchEvent.TOUCH_TAP,this.onTouchHandler,this);var o=e.LocalManager.getPopupwin("Dropdown.Label.Default"),n=e.SubjectManager.getInstance().allGrades;this.gradeDrop=new e.DropDown(0,0,o,n),this.gradeDrop.addEventListener(e.DropDown.EVENT_SELECTED,this.onSelectGrade,this),this.subjectDrop=new e.DropDown(0,0,o,[]),this.subjectDrop.addEventListener(e.DropDown.EVENT_SELECTED,this.onSelectSubject,this),this.courseDrop=new e.DropDown(0,0,o,[]),this.courseDrop.addEventListener(e.DropDown.EVENT_SELECTED,this.onSelectCourse,this)},o.prototype.opened=function(){e.LogUtil.info("PracticeAddPanel is opened!!!"+this.param.id);for(var t=e.AppProxy.getInstance().practice.getPractice(this.param.uid),o=0,n=this.optionParts;o<n.length;o++){var a=n[o];e.PoolManager.getInstance().deactivePart(a)}if(this.optionParts.splice(0),t){if(this.nameInput.text=t.name,this.nameInput.enabled=!1,this.descInput.text=t.description,this.typeGroup.visible=!1,this.checkTopicType(t.type),t.type==e.PracticeType.Judgment)t.isRightAnswer("0")?this.wrongRadio.selected=!0:this.rightRadio.selected=!0;else for(var r=t.type==e.PracticeType.Single?!0:!1,s=0,i=t.getTopics();s<i.length;s++){var p=i[s];this.createTopic(r,p,t.isRightAnswer(p.key),!1)}this.addButton.visible=!1,this.newOptButton.visible=!1,this.gradeGroup.contains(this.gradeDrop)&&this.gradeGroup.removeChild(this.gradeDrop),this.subGroup.contains(this.subjectDrop)&&this.subGroup.removeChild(this.subjectDrop),this.courseGroup.contains(this.courseDrop)&&this.courseGroup.removeChild(this.courseDrop),this.gradeInput.visible=!0,this.subInput.visible=!0,this.courseInput.visible=!0,this.gradeInput.text=e.SubjectManager.getInstance().getGradeName(t.grade),this.subInput.text=e.SubjectManager.getInstance().getSubject(t.grade,t.subject).key;var l=e.AppProxy.getInstance().course.getCourse(t.course);l&&(this.courseInput.text=l.name)}else this.nameInput.text="",this.nameInput.enabled=!0,this.descInput.text="",this.typeGroup.visible=!0,this.singleRadio.selected=!0,this.checkTopicType(e.PracticeType.Single),this.addButton.visible=!0,this.newOptButton.visible=!0,this.gradeGroup.addChild(this.gradeDrop),this.subGroup.addChild(this.subjectDrop),this.courseGroup.addChild(this.courseDrop),this.gradeInput.visible=!1,this.subInput.visible=!1,this.courseInput.visible=!1},o.prototype.onSelectGrade=function(t){var o=e.SubjectManager.getInstance().getSubjects(this.gradeDrop.selectedValue.id);this.subjectDrop.updateSource(o)},o.prototype.onSelectSubject=function(e){},o.prototype.onSelectCourse=function(e){},o.prototype.onTouchHandler=function(t){this.addButton==t.target?this.createPractice():this.newOptButton==t.target?this.createTopic(this.singleRadio.selected,null,!1,!0):this.checkTopicType(this.judgeRadio.selected?e.PracticeType.Judgment:e.PracticeType.Single)},o.prototype.checkTopicType=function(t){t==e.PracticeType.Judgment?(this.selectGroup.visible=!1,this.judegeGroup.visible=!0):(this.selectGroup.visible=!0,this.judegeGroup.visible=!1)},o.prototype.createTopic=function(t,o,n,a){if(!(this.optionParts.length>3)){var r="";r=t?"topic":"topic-"+this.optionParts.length;var s=e.LogicUtil.getCharacter(this.optionParts.length),i="";o&&(s=o.key,i=o.value);var p=e.PoolManager.getInstance().activePart(e.PartType.PracticeOption);p.setValues(r,s,i,n),this.childGroup.addChild(p),p.width=this.childGroup.width,p.height=50,p.enabled=a,p.y=60*this.optionParts.length,this.optionParts.push(p)}},o.prototype.createPractice=function(){var t=new e.PracticeInfo;if(t.name=this.nameInput.text,t.description=this.descInput.text,this.judgeRadio.selected)t.type=e.PracticeType.Judgment,this.rightRadio.selected?t.addAnswer("1"):t.addAnswer("0");else{this.singleRadio.selected?t.type=e.PracticeType.Single:t.type=e.PracticeType.Multiple;for(var o=0,n=this.optionParts;o<n.length;o++){var a=n[o];t.addTopic(a.identify,a.description),a.selected&&t.addAnswer(a.identify)}}t.grade=this.gradeDrop.selectedValue.id,this.subjectDrop.selectedValue&&(t.subject=this.subjectDrop.selectedValue.id),this.courseDrop.selectedValue&&(t.course=this.courseDrop.selectedValue.id),e.AppProxy.getInstance().practice.tryAddOne(t)},o}(e.AppPanel);e.PracticeAddPanel=t,__reflect(t.prototype,"eas.PracticeAddPanel")}(eas||(eas={}));var eas;!function(e){var t=function(t){function o(){var o=t.call(this,e.PanelType.SchoolAdd)||this;return o.adminDrop=null,o.optGroup=null,o.tipGroup=null,o.provinceDrop=null,o.cityDrop=null,o.zoneDrop=null,o.townDrop=null,o.streetDrop=null,o.addButton=null,o}return __extends(o,t),o.prototype.createAddress=function(){var t=e.LocalManager.getPopupwin("Dropdown.Label.Default");this.provinceDrop=new e.DropDown(0,0,t,e.AddressManager.getInstance().provinces);var o=new Array;o.push({name:""}),this.cityDrop=new e.DropDown(180,0,t,o),this.zoneDrop=new e.DropDown(360,0,t,o),this.townDrop=new e.DropDown(0,75,t,o),this.streetDrop=new e.DropDown(180,75,t,o),this.provinceDrop.addEventListener(e.DropDown.EVENT_SELECTED,this.onSelectAddress,this),this.cityDrop.addEventListener(e.DropDown.EVENT_SELECTED,this.onSelectAddress,this),this.zoneDrop.addEventListener(e.DropDown.EVENT_SELECTED,this.onSelectAddress,this),this.townDrop.addEventListener(e.DropDown.EVENT_SELECTED,this.onSelectAddress,this),this.streetDrop.addEventListener(e.DropDown.EVENT_SELECTED,this.onSelectAddress,this),this.addressGroup.addChild(this.townDrop),this.addressGroup.addChild(this.streetDrop),this.addressGroup.addChild(this.provinceDrop),this.addressGroup.addChild(this.cityDrop),this.addressGroup.addChild(this.zoneDrop)},o.prototype.onSelectAddress=function(e){if(e.target==this.provinceDrop){var t=e.data;this.cityDrop.updateSource(t.cities)}else if(e.target==this.cityDrop){var t=e.data;this.zoneDrop.updateSource(t.zones)}else if(e.target==this.zoneDrop){var t=e.data;this.townDrop.updateSource(t.towns)}else if(e.target==this.townDrop){var t=e.data;this.streetDrop.updateSource(t.steets)}},o.prototype.onSelectAdmin=function(e){},o.prototype.onAddHandler=function(t){var o=new e.SchoolInfo;o.name=this.nameInput.text,o.master=this.masterInput.text;var n=new e.AddressInfo;this.provinceDrop.selectedValue&&(n.province=new e.KeyValueInfo(this.provinceDrop.selectedValue.id,this.provinceDrop.selectedValue.name)),this.cityDrop.selectedValue&&(n.city=new e.KeyValueInfo(this.cityDrop.selectedValue.id,this.cityDrop.selectedValue.name)),this.zoneDrop.selectedValue&&(n.zone=new e.KeyValueInfo(this.zoneDrop.selectedValue.id,this.zoneDrop.selectedValue.name)),this.townDrop.selectedValue&&(n.town=new e.KeyValueInfo(this.townDrop.selectedValue.id,this.townDrop.selectedValue.name)),this.streetDrop.selectedValue&&(n.street=new e.StreetInfo(this.streetDrop.selectedValue.id,this.streetDrop.selectedValue.name)),o.address=n,o.icon=this.headImage.texture.toDataURL("image/png"),this.adminDrop.selectedValue&&(o.admin=e.AppProxy.getInstance().getAdmin(this.adminDrop.selectedValue.uid)),e.AppProxy.getInstance().school.tryAdd(o)},o.prototype.onTouchHead=function(t){e.ImageUtil.chooseImage(this.onLoadImage,this)},o.prototype.onLoadImage=function(e){this.headImage.texture=e},o.prototype.init=function(){t.prototype.init.call(this),this.addButton.label=e.LocalManager.getPopupwin("Button.Name.Save"),this.addButton.addEventListener(egret.TouchEvent.TOUCH_TAP,this.onAddHandler,this),this.nameLabel.text=e.LocalManager.getPopupwin("School.Info.Name"),this.masterLabel.text=e.LocalManager.getPopupwin("School.Info.Master"),this.adminLabel.text=e.LocalManager.getPopupwin("School.Info.Admin"),this.addressLabel.text=e.LocalManager.getPopupwin("School.Info.Address"),this.adminTipLabel.text=e.LocalManager.getPopupwin("School.Info.Admin"),this.addressTipLabel.text=e.LocalManager.getPopupwin("School.Info.Address");var o=e.LocalManager.getPopupwin("Dropdown.Label.Default");this.adminDrop=new e.DropDown(0,0,o,e.AppProxy.getInstance().admin.getFreeAdmins()),this.adminDrop.addEventListener(e.DropDown.EVENT_SELECTED,this.onSelectAdmin,this),this.adminGroup.addChild(this.adminDrop),this.headImage.touchEnabled=!0,this.headImage.addEventListener(egret.TouchEvent.TOUCH_TAP,this.onTouchHead,this),this.createAddress()},o.prototype.opened=function(){var t=this;e.LogUtil.info("SchoolAddPanel is opened!!! id = "+this.param.id);var o=e.AppProxy.getInstance().school.getSchool(this.param.uid);o?(this.titleLabel.text=e.LocalManager.getPopupwin("School.Info.Title"),this.nameInput.text=o.name,this.nameInput.enabled=!1,this.masterInput.enabled=!1,this.masterInput.text=o.master,this.addressInput.text=o.address.toString(),o.admin?this.adminInput.text=o.admin.name:this.adminInput.text="",""!=o.icon?egret.BitmapData.create("base64",o.icon,function(e){t.headImage.texture.bitmapData=e}):this.headImage.source="icon_school_png",this.optGroup.visible=!1,this.tipGroup.visible=!0,this.headImage.touchEnabled=!1):(this.titleLabel.text=e.LocalManager.getPopupwin("School.Add.Title"),this.nameInput.enabled=!0,this.masterInput.enabled=!0,this.optGroup.visible=!0,this.tipGroup.visible=!1,this.headImage.touchEnabled=!0)},o}(e.AppPanel);e.SchoolAddPanel=t,__reflect(t.prototype,"eas.SchoolAddPanel")}(eas||(eas={}));var eas;!function(e){var t=function(t){function o(){var o=t.call(this,e.PanelType.StudentInfo)||this;return o.idLabel=null,o.nameLabel=null,o.sexLabel=null,o.classLabel=null,o.schoolLabel=null,o.idInput=null,o.nameInput=null,o.sexInput=null,o.classInput=null,o.schoolInput=null,o}return __extends(o,t),o.prototype.init=function(){t.prototype.init.call(this),this.titleLabel.text=e.LocalManager.getPopupwin("Student.Info.Title"),this.idLabel.text=e.LocalManager.getPopupwin("Student.Info.ID"),this.nameLabel.text=e.LocalManager.getPopupwin("Student.Info.Name"),this.sexLabel.text=e.LocalManager.getPopupwin("Student.Info.Sex"),this.classLabel.text=e.LocalManager.getPopupwin("Student.Info.Class"),this.schoolLabel.text=e.LocalManager.getPopupwin("Student.Info.School")},o.prototype.opened=function(){var t=e.AppProxy.getInstance().getDefSchool();if(null!=t){var o=t.getClass(this.param.parent);if(null!=o){var n=o.getStudent(this.param.uid);e.LogUtil.info("TeacherInfoPanel is opened!!!"+n),n&&(this.classInput.text=o.name,this.schoolInput.text=t.name,this.idInput.text=n.id+"",this.sexInput.text=e.LocalManager.getPopupwin("Role.Sex."+n.sex),this.nameInput.text=n.name)}}},o}(e.AppPanel);e.StudentInfoPanel=t,__reflect(t.prototype,"eas.StudentInfoPanel")}(eas||(eas={}));var eas;!function(e){var t=function(t){function o(){var o=t.call(this,e.PanelType.TeacherInfo)||this;return o.saveButton=null,o.inputs=[],o.skinName="resource/zui_skins/TeacherInfoPanel.exml",o}return __extends(o,t),o.prototype.init=function(){t.prototype.init.call(this),this.titleLabel.text=e.LocalManager.getPopupwin("Teacher.Info.Title"),this.headImage.touchEnabled=!0,this.headImage.addEventListener(egret.TouchEvent.TOUCH_TAP,this.onTouchHead,this),this.saveButton.label=e.LocalManager.getPopupwin("Button.Name.Save"),this.saveButton.addEventListener(egret.TouchEvent.TOUCH_TAP,this.onAddHandler,this),this.inputs.push(this.idInput),this.inputs.push(this.nameInput),this.inputs.push(this.phoneInput),this.inputs.push(this.sexInput),this.inputs.push(this.emailInput),this.inputs.push(this.schoolInput)},o.prototype.opened=function(){var t=this,o=e.AppProxy.getInstance().getDefSchool(),n=o.getTeacher(this.param.uid);if(e.LogUtil.info("TeacherInfoPanel is opened!!!"+n),n){this.idInput.text=n.id+"",this.nameInput.text=n.name,this.phoneInput.text=e.LocalManager.getPopupwin("Teacher.Info.Phone")+":"+n.phone,this.sexInput.text=e.LocalManager.getPopupwin("Teacher.Info.Sex")+":"+e.LocalManager.getPopupwin("Role.Sex."+n.sex),this.emailInput.text=e.LocalManager.getPopupwin("Teacher.Info.Email")+":"+n.email,this.schoolInput.text=e.LocalManager.getPopupwin("Teacher.Info.School")+":"+o.name,this.headImage.source="icon_teacher_png",egret.BitmapData.create("base64",n.portrait,function(e){t.headImage.texture.bitmapData=e}),this.saveButton.visible=!1;for(var a=0,r=this.inputs;a<r.length;a++){var s=r[a];s.enabled=!1}}else{this.saveButton.visible=!0;for(var i=0,p=this.inputs;i<p.length;i++){var s=p[i];s.enabled=!0,s.text=""}this.idInput.prompt=e.LocalManager.getPopupwin("Teacher.Info.ID"),this.nameInput.prompt=e.LocalManager.getPopupwin("Teacher.Info.Name"),this.phoneInput.prompt=e.LocalManager.getPopupwin("Teacher.Info.Phone"),this.sexInput.prompt=e.LocalManager.getPopupwin("Teacher.Info.Sex"),this.emailInput.prompt=e.LocalManager.getPopupwin("Teacher.Info.Email"),this.schoolInput.prompt=e.LocalManager.getPopupwin("Teacher.Info.School")}},o.prototype.onAddHandler=function(e){},o.prototype.onTouchHead=function(t){e.ImageUtil.chooseImage(this.onLoadImage,this)},o.prototype.onLoadImage=function(e){this.headImage.texture=e},o}(e.AppPanel);e.TeacherInfoPanel=t,__reflect(t.prototype,"eas.TeacherInfoPanel")}(eas||(eas={}));var eas;!function(e){var t=function(t){function o(){var o=t.call(this,e.PanelType.UserInfo)||this;return o.idLabel=null,o.nameLabel=null,o.phoneLabel=null,o.roleLabel=null,o.schoolLabel=null,o.oldPswLabel=null,o.newPswLabel=null,o.idInput=null,o.nameInput=null,o.phoneInput=null,o.roleInput=null,o.schoolInput=null,o.oldPswInput=null,o.newPswInput=null,o.modifyButton=null,o.skinName="resource/zui_skins/UserInfoPanel.exml",o}return __extends(o,t),o.prototype.init=function(){t.prototype.init.call(this),this.titleLabel.text=e.LocalManager.getPopupwin("User.Info.Title"),this.idLabel.text=e.LocalManager.getPopupwin("User.Info.ID"),this.nameLabel.text=e.LocalManager.getPopupwin("User.Info.Name"),this.phoneLabel.text=e.LocalManager.getPopupwin("User.Info.Phone"),this.roleLabel.text=e.LocalManager.getPopupwin("User.Info.Role"),this.schoolLabel.text=e.LocalManager.getPopupwin("User.Info.School"),this.oldPswLabel.text=e.LocalManager.getPopupwin("User.Password.Old"),this.newPswLabel.text=e.LocalManager.getPopupwin("User.Password.New"),this.modifyButton.label=e.LocalManager.getPopupwin("Button.Password.Save"),this.modifyButton.addEventListener(egret.TouchEvent.TOUCH_TAP,this.onModifyPswHandler,this)},o.prototype.opened=function(){var t=e.AppProxy.getInstance().user;if(this.idInput.text=t.id+"",this.nameInput.text=t.name,this.phoneInput.text=t.phone,t.type==e.RoleType.SchoolAdmin?this.roleInput.text=e.LocalManager.getPopupwin("Role.Type.School"):t.type==e.RoleType.SuperAdmin?this.roleInput.text=e.LocalManager.getPopupwin("Role.Type.Super"):this.roleInput.text=e.LocalManager.getPopupwin("Role.Type.Teacher"),""!=t.school){var o=e.AppProxy.getInstance().school.getSchool(t.school);o&&(this.schoolInput.text=o.name)}else this.schoolInput.text="";e.NotifyManager.getInstance().register(e.NotifyType.OnHttpResponse,this,this.onNotifyHandle)},o.prototype.close=function(){t.prototype.close.call(this),e.NotifyManager.getInstance().remove(e.NotifyType.OnHttpResponse,this)},o.prototype.onNotifyHandle=function(t){t.type==e.ModuleType.Admin&&t.code==e.AdminCode.UpdatePassword&&alert(e.LocalManager.getException("Alert.Update.Password"))},o.prototype.onModifyPswHandler=function(t){e.AppProxy.getInstance().admin.trySetPassword(this.oldPswInput.text,this.newPswInput.text)},o}(e.AppPanel);e.UserInfoPanel=t,__reflect(t.prototype,"eas.UserInfoPanel")}(eas||(eas={}));var eas;!function(e){var t=function(t){function o(){var o=t.call(this,e.PartType.Admin)||this;return o.touchChildren=!0,o}return __extends(o,t),o.prototype.onRemoveHandler=function(t){e.AppProxy.getInstance().admin.tryRemoveAdmin(this.identify)},o.prototype.onMouseHandle=function(t){t.type==e.MouseEvent.MOUSE_OVER?this.removeButton.source="icon_delete-1_png":this.removeButton.source="icon_delete_png"},o.prototype.init=function(){t.prototype.init.call(this),this.removeButton.touchEnabled=!0,this.removeButton.addEventListener(egret.TouchEvent.TOUCH_TAP,this.onRemoveHandler,this),this.removeButton.addEventListener(e.MouseEvent.MOUSE_OVER,this.onMouseHandle,this),this.removeButton.addEventListener(e.MouseEvent.MOUSE_OUT,this.onMouseHandle,this)},o.prototype.opened=function(){var t=e.AppProxy.getInstance().admin.getAdmin(this.identify);t&&(this.nameLabel.text=t.name,t.type==e.RoleType.SchoolAdmin?(this.roleLabel.text=e.LocalManager.getPopupwin("Role.Type.Super"),this.icon.source="icon_admin_super_png"):t.type==e.RoleType.SuperAdmin?(this.roleLabel.text=e.LocalManager.getPopupwin("Role.Type.School"),this.icon.source="icon_admin_school_png"):(this.roleLabel.text=e.LocalManager.getPopupwin("Role.Type.Teacher"),this.icon.source="icon_admin_teacher_png"),this.phoneLabel.text=t.phone)},o}(e.AppParts);e.AdminPart=t,__reflect(t.prototype,"eas.AdminPart")}(eas||(eas={}));var eas;!function(e){var t=function(t){function o(){var o=t.call(this,e.PartType.CourseApply)||this;return o.starImages=[],o.paperOne=null,o.paperTwo=null,o.paperThree=null,o.paperImages=[],o.isSelect=!1,o.skinName="resource/zui_skins/CouseApplyPart.exml",o}return __extends(o,t),o.prototype.onNotifyImage=function(t){t.uid==this.identify&&(this.icon.texture=e.ImageManager.getInstance().getTexture(t.uid))},o.prototype.onMouseHandle=function(t){var o=t.currentTarget;e.MathUtil.isNullOrWhiteSpace(o.name)||this.isSelect||(t.type==e.MouseEvent.MOUSE_OVER?o.source="icon_paper-0_png":o.source="icon_paper-1_png")},o.prototype.onTouchPaper=function(t){var o=t.currentTarget,n=new e.NotifyInfo;n.uid=this.identify,n.key=o.name,n.value=o,n.id=2,this.callFun.call(this.callTarget,n)},o.prototype.onTouchHead=function(t){var o=new e.NotifyInfo;o.key="",o.uid=this.identify,o.id=1,o.value=this,this.callFun.call(this.callTarget,o)},o.prototype.addListener=function(e,t){this.callFun=t,this.callTarget=e},o.prototype.init=function(){t.prototype.init.call(this),this.starImages.push(this.starOne),this.starImages.push(this.starTwo),this.starImages.push(this.starThree),this.starImages.push(this.starFour),this.starImages.push(this.starFive),this.touchChildren=!0,this.paperImages.push(this.paperOne),this.paperImages.push(this.paperTwo),this.paperImages.push(this.paperThree),this.bgImage.touchEnabled=!0,this.bgImage.addEventListener(egret.TouchEvent.TOUCH_TAP,this.onTouchHead,this,!0);for(var o=0,n=this.paperImages;o<n.length;o++){var a=n[o];a.touchEnabled=!0,a.addEventListener(egret.TouchEvent.TOUCH_TAP,this.onTouchPaper,this,!0),a.addEventListener(e.MouseEvent.MOUSE_OVER,this.onMouseHandle,this),a.addEventListener(e.MouseEvent.MOUSE_OUT,this.onMouseHandle,this)}},o.prototype.opened=function(){e.NotifyManager.getInstance().register(e.NotifyType.OnImageUpdate,this,this.onNotifyImage);var t=e.AppProxy.getInstance().course.getCourse(this.identify);if(t){this.nameLabel.text=t.name;var o=e.ImageManager.getInstance().getImageInfo(t.uid,t.iconURL);null!=o&&(this.icon.texture=o.texture),e.LogicUtil.updateStars(this.starImages,t.star);for(var n=e.AppProxy.getInstance().getDefTeacher().getPapers(t.uid),a=0;3>a;a++)a<n.length?(this.paperImages[a].name=n[a].uid,this.paperImages[a].source="icon_paper-0_png"):(this.paperImages[a].name="",this.paperImages[a].source="icon_add-0_png")}},o.prototype.clear=function(){e.NotifyManager.getInstance().remove(e.NotifyType.OnImageUpdate,this)},o}(e.AppParts);e.ApplyPart=t,__reflect(t.prototype,"eas.ApplyPart")}(eas||(eas={}));var eas;!function(e){var t=function(t){function o(){var o=t.call(this,e.PartType.Classes)||this;return o.skinName="resource/zui_skins/ClassesPart.exml",o}return __extends(o,t),o.prototype.init=function(){t.prototype.init.call(this)},o.prototype.opened=function(){var t=e.AppProxy.getInstance().getDefSchool().getClass(this.identify);t&&(this.nameLabel.text=t.name,this.gradeLabel.text=e.LocalManager.getPopupwin("Classes.Info.Grade",[t.grade,t.sn]),this.countLabel.text=e.LocalManager.getPopupwin("Classes.Info.Count",[t.studentCount]))},o}(e.AppParts);e.ClassesPart=t,__reflect(t.prototype,"eas.ClassesPart")}(eas||(eas={}));var eas;!function(e){var t=function(t){function o(){var o=t.call(this,e.PartType.Course)||this;return o.starImages=[],o.skinName="resource/zui_skins/CoursePart.exml",o}return __extends(o,t),o.prototype.onNotifyImage=function(e){e.uid!=this.identify},o.prototype.init=function(){this.starImages.push(this.starOne),this.starImages.push(this.starTwo),this.starImages.push(this.starThree),this.starImages.push(this.starFour),this.starImages.push(this.starFive)},o.prototype.opened=function(){e.NotifyManager.getInstance().register(e.NotifyType.OnImageUpdate,this,this.onNotifyImage);var t=e.AppProxy.getInstance().course.getCourse(this.identify);if(t){this.nameLabel.text=t.name,this.typeLabel.text=e.LocalManager.getPopupwin("Course.Type."+t.type);var o=e.ImageManager.getInstance().getImageInfo(t.uid,t.iconURL);null!=o&&(this.icon.texture=o.texture),e.LogicUtil.updateStars(this.starImages,t.star)}},o.prototype.clear=function(){e.NotifyManager.getInstance().remove(e.NotifyType.OnImageUpdate,this)},o}(e.AppParts);e.CoursePart=t,__reflect(t.prototype,"eas.CoursePart")}(eas||(eas={}));var eas;!function(e){var t=function(t){function o(){var o=t.call(this,e.PartType.Paper)||this;return o.nameLabel=null,o.icon=null,o.courseLabel=null,o.countLabel=null,o.skinName="resource/zui_skins/PaperPart.exml",o}return __extends(o,t),o.prototype.onNotifyImage=function(t){t.uid==this.identify&&(this.icon.texture=e.ImageManager.getInstance().getTexture(t.uid))},o.prototype.init=function(){t.prototype.init.call(this)},o.prototype.opened=function(){e.NotifyManager.getInstance().register(e.NotifyType.OnImageUpdate,this,this.onNotifyImage);var t=e.AppProxy.getInstance().school.getTeacher(e.AppProxy.getInstance().user.uid),o=t.getPaper(this.identify);if(o){this.nameLabel.text=o.name,this.countLabel.text=e.LocalManager.getPopupwin("Paper.Practice.Num")+":"+o.practices.length;var n=e.AppProxy.getInstance().course.getCourse(o.course);if(n){this.courseLabel.text=n.name;var a=e.ImageManager.getInstance().getImageInfo(n.uid,n.iconURL);null!=a&&(this.icon.texture=a.texture)}else this.courseLabel.text=""}},o.prototype.clear=function(){e.NotifyManager.getInstance().remove(e.NotifyType.OnImageUpdate,this)},o}(e.AppParts);e.PaperPart=t,__reflect(t.prototype,"eas.PaperPart")}(eas||(eas={}));var eas;!function(e){var t=function(t){function o(){return t.call(this,e.PartType.PracticeItem)||this}return __extends(o,t),o.prototype.onRemoveTouchHandler=function(t){e.AppProxy.getInstance().practice.tryRemove(this.identify)},o.prototype.onMouseHandle=function(t){t.type==e.MouseEvent.MOUSE_OVER?this.removeImage.source="icon_delete-1_png":this.removeImage.source="icon_delete_png"},o.prototype.init=function(){t.prototype.init.call(this),this.removeImage.touchEnabled=!0,this.removeImage.addEventListener(egret.TouchEvent.TOUCH_TAP,this.onRemoveTouchHandler,this),this.removeImage.addEventListener(e.MouseEvent.MOUSE_OVER,this.onMouseHandle,this),this.removeImage.addEventListener(e.MouseEvent.MOUSE_OUT,this.onMouseHandle,this)},o.prototype.opened=function(){var t=e.AppProxy.getInstance().practice.getPractice(this.identify);t&&(t.name.length>7?this.nameLabel.text=t.name.substr(0,7)+"...":this.nameLabel.text=t.name,t.type==e.PracticeType.Judgment?(this.typeLabel.text=e.LocalManager.getPopupwin("Practice.Label.Single"),this.typeImage.source="icon_topic_single_png"):t.type==e.PracticeType.Multiple?(this.typeLabel.text=e.LocalManager.getPopupwin("Practice.Label.Multy"),this.typeImage.source="icon_topic_multy_png"):(this.typeLabel.text=e.LocalManager.getPopupwin("Practice.Label.Judge"),this.typeImage.source="icon_topic_judge_png"))},o}(e.AppParts);e.PracticeItemPart=t,__reflect(t.prototype,"eas.PracticeItemPart")}(eas||(eas={}));var eas;!function(e){var t=function(t){function o(){var o=t.call(this,e.PartType.PracticeOption)||this;return o.group="",o.input="",o.isOn=!1,o}return __extends(o,t),o.prototype.setValues=function(e,t,o,n){this.group=e,this.identify=t,this.input=o,this.isOn=n},Object.defineProperty(o.prototype,"selected",{get:function(){return this.optRadio.selected},enumerable:!0,configurable:!0}),Object.defineProperty(o.prototype,"description",{get:function(){return this.answerInput.text},enumerable:!0,configurable:!0}),o.prototype.init=function(){this.answerInput.bold=!0,this.answerInput.background=!0},o.prototype.opened=function(){this.optRadio.groupName=this.group,this.optRadio.label=this.identify,this.answerInput.text=this.input,this.optRadio.selected=this.isOn},o}(e.AppParts);e.PracticeOptPart=t,__reflect(t.prototype,"eas.PracticeOptPart")}(eas||(eas={}));var eas;!function(e){var t=function(t){function o(){var o=t.call(this,e.PartType.PracticeView)||this;return o.skinName="resource/zui_skins/PracticeViewPart.exml",o}return __extends(o,t),o.prototype.init=function(){t.prototype.init.call(this)},o.prototype.opened=function(){var t=e.AppProxy.getInstance().practice.getPractice(this.identify);t&&(t.name.length>7?this.nameLabel.text=t.name.substr(0,7)+"...":this.nameLabel.text=t.name,t.type==e.PracticeType.Judgment?(this.typeLabel.text=e.LocalManager.getPopupwin("Practice.Label.Single"),this.typeImage.source="icon_topic_single_png"):t.type==e.PracticeType.Multiple?(this.typeLabel.text=e.LocalManager.getPopupwin("Practice.Label.Multy"),this.typeImage.source="icon_topic_multy_png"):(this.typeLabel.text=e.LocalManager.getPopupwin("Practice.Label.Judge"),this.typeImage.source="icon_topic_judge_png"))},o}(e.AppParts);e.PracticeViewPart=t,__reflect(t.prototype,"eas.PracticeViewPart")}(eas||(eas={}));var eas;!function(e){var t=function(t){function o(){return t.call(this,e.PartType.School)||this}return __extends(o,t),o.prototype.init=function(){},o.prototype.opened=function(){var t=this,o=e.AppProxy.getInstance().school.getSchool(this.identify);o&&(this.nameLabel.text=o.name,egret.BitmapData.create("base64",o.icon,function(e){var o=new egret.Texture;o.bitmapData=e,t.icon.texture=o}))},o}(e.AppParts);e.SchoolPart=t,__reflect(t.prototype,"eas.SchoolPart")}(eas||(eas={}));var eas;!function(e){var t=function(t){function o(){var o=t.call(this,e.PartType.Teacher)||this;return o.skinName="resource/zui_skins/TeacherPart.exml",o}return __extends(o,t),o.prototype.init=function(){t.prototype.init.call(this)},o.prototype.opened=function(){var t=this,o=e.AppProxy.getInstance().school.getTeacher(this.identify);o&&(this.nameLabel.text=o.name,this.icon.source="icon_teacher_png",egret.BitmapData.create("base64",o.portrait,function(e){var o=new egret.Texture;o.bitmapData=e,t.icon.texture=o}))},o}(e.AppParts);e.TeacherPart=t,__reflect(t.prototype,"eas.TeacherPart")}(eas||(eas={}));var ComboBox=function(e){function t(t){void 0===t&&(t=null);var o=e.call(this)||this;return o.isPullDown=!0,null!=t&&(o.data=t),o}return __extends(t,e),t.prototype.childrenCreated=function(){this.initPullView()},t.prototype.updateData=function(e,t){for(var o=0;o<this.data.length;o++)this.data[o][e]=t},t.prototype.initPullView=function(){this.width=this.stage.stageWidth,this.height=this.stage.stageHeight,this.bg=new eui.Image,this.bg.source="resource/assets/ItemRenderer/selected.png",this.addChild(this.bg),this.bg.width=this.width,this.bg.height=114,this.titleLabel=new eui.Label,this.addChild(this.titleLabel),this.titleLabel.width=this.width,this.titleLabel.height=114,this.titleLabel.textColor=0,this.titleLabel.verticalAlign="middle",this.titleLabel.textAlign="center",this.titleLabel.text="ComboBox",this.titleLabel.size=60,this.titleLabel.addEventListener(egret.TouchEvent.TOUCH_END,this.onRightIconBg,this);var e=new eui.ArrayCollection(this.data);this.Scroller=new eui.Scroller,this.addChild(this.Scroller),this.Scroller.y=114,this.Scroller.width=this.width,this.Scroller.height=this.height,this.DataGroup=new eui.DataGroup,this.Scroller.addChild(this.DataGroup),this.DataGroup.dataProvider=e,this.DataGroup.itemRenderer=ComboBoxItem,this.Scroller.viewport=this.DataGroup,this.DataGroup.useVirtualLayout=!0},t.prototype.onRightIconBg=function(e){this.isPullDown?(this.isPullDown=!1,this.removeChild(this.Scroller)):(this.isPullDown=!0,this.addChild(this.Scroller))},t.prototype.getTitleLabe=function(){return this.titleLabel},t.prototype.setItemWidth=function(e){this.width=e,this.bg.width=e,this.titleLabel.width=e,this.Scroller.width=e,this.updateData("width",e)},t.prototype.setItemHeight=function(e){this.updateData("height",e)},t.prototype.setItemFontSize=function(e){void 0===e&&(e=25),this.updateData("fontSize",e)},t.prototype.setTitleHeight=function(e){this.bg.height=e,this.titleLabel.height=e,this.Scroller.y=e},t.prototype.setTitleBackground=function(e){this.bg.source=e},t.prototype.setTitleFontSize=function(e){this.titleLabel.size=e},t.prototype.show=function(){this.isPullDown=!0,this.addChild(this.Scroller)},t.prototype.hide=function(){this.isPullDown=!1,this.removeChild(this.Scroller)},t.prototype.setItemTextAlign=function(e){this.titleLabel.textAlign=e,this.updateData("textAlign",e)},t.onClick="ComboBoxOnClick",t}(eui.Component);__reflect(ComboBox.prototype,"ComboBox");var ComboBoxItem=function(e){function t(){return e.call(this)||this}return __extends(t,e),t.prototype.partAdded=function(t,o){e.prototype.partAdded.call(this,t,o)
},t.prototype.childrenCreated=function(){e.prototype.childrenCreated.call(this),this.bg=new eui.Image,this.addChild(this.bg),this.bg.width=this.stage.stageWidth,this.bg.height=113,this.content=new eui.Label,this.addChild(this.content),this.addEventListener(egret.TouchEvent.TOUCH_END,this.onTouchEnd,this),this.content.textAlign="center",this.content.verticalAlign="middle",this.content.textColor=0},t.prototype.dataChanged=function(){"undefined"!=typeof this.data.content&&(this.content.text=this.data.content),"undefined"!=typeof this.data.width&&(this.width=this.data.width,this.content.width=this.data.width),"undefined"!=typeof this.data.bg?this.bg.source=this.data.bg:this.bg.source="resource/assets/ScrollBar/track_sb.png","undefined"!=typeof this.data.height&&(this.height=this.data.height,this.bg.height=this.data.height,this.content.height=this.data.height),"undefined"!=typeof this.data.fontSize&&(this.content.size=this.data.fontSize),"undefined"!=typeof this.data.textAlign&&(this.content.textAlign=this.data.textAlign)},t.prototype.onTouchEnd=function(e){var t={};t.itemIndex=this.itemIndex,this.dispatchEventWith(ComboBox.onClick,!0,t)},t}(eui.ItemRenderer);__reflect(ComboBoxItem.prototype,"ComboBoxItem");var eas;!function(e){var t=function(e){function t(){var t=e.call(this)||this;return t.width=160,t.height=35,t.nameLabel=new eui.Label,t.addChild(t.nameLabel),t.nameLabel.percentWidth=100,t.nameLabel.percentHeight=100,t.nameLabel.size=20,t.nameLabel.textAlign=egret.HorizontalAlign.CENTER,t.nameLabel.verticalAlign=egret.VerticalAlign.MIDDLE,t}return __extends(t,e),t.prototype.dataChanged=function(){this.data&&(this.nameLabel.text=this.data.name)},t}(eui.ItemRenderer);__reflect(t.prototype,"LabelRender");var o=function(e){function o(o,n,a,r){var s=e.call(this)||this;s.isShow=!1;var i=160,p=600,l=new eui.Group;return l.width=i,l.height=40,l.y=8,l.touchChildren=!0,s.addChild(l),s.width=i,s.list=new eui.List,s.list.width=i,s.list.itemRenderer=t,s.list.dataProvider=new eui.ArrayCollection(r),s.scroller=new eui.Scroller,s.scroller.height=p,s.scroller.width=i,s.scroller.viewport=s.list,l.addChild(s.scroller),s.spMask=new egret.Shape,s.spMask.graphics.beginFill(9671571,1),s.spMask.graphics.drawRect(0,0,i,p),s.spMask.graphics.endFill(),s.spMask.touchEnabled=!1,l.addChild(s.spMask),s.scroller.mask=s.spMask,s.menuButton=new eui.Button,s.menuButton.label=a,s.menuButton.width=i,s.menuButton.height=35,l.addChild(s.menuButton),s.x=o,s.y=n,s.spMask.y=s.menuButton.height,s.list.addEventListener(eui.ItemTapEvent.ITEM_TAP,s.onClickList,s),s}return __extends(o,e),o.prototype.createChildren=function(){e.prototype.createChildren.call(this),this.posScrollerClose=this.scroller.y=-this.scroller.height,this.menuButton.addEventListener(egret.TouchEvent.TOUCH_TAP,this.onClickTitle,this)},o.prototype.updateSource=function(e,t){void 0===t&&(t=0),this.list.dataProvider=new eui.ArrayCollection(e),null!=e&&t<e.length&&(this.menuButton.label=e[t].name,this.list.selectedIndex=t,this.list.selectedItem=e[t],this.selectedIndex=t,this.selectedValue=e[t])},o.prototype.onClickTitle=function(){this.isShow?(egret.Tween.get(this.scroller).to({y:this.posScrollerClose},300),this.isShow=!1):(egret.Tween.get(this.scroller).to({y:this.menuButton.height},300),this.isShow=!0)},o.prototype.onClickList=function(e){this.onClickTitle(),this.selectedValue=this.list.selectedItem,this.selectedIndex=this.list.selectedIndex,this.menuButton.label=this.list.selectedItem.name;var t=new egret.Event(o.EVENT_SELECTED,!0,!1,this.list.selectedItem);this.dispatchEvent(t)},o.EVENT_SELECTED="eas.event.selected",o}(eui.Component);e.DropDown=o,__reflect(o.prototype,"eas.DropDown")}(eas||(eas={}));var eas;!function(e){var t=function(e){function t(t,o){var n=e.call(this)||this;return n.bgShape=null,n.width=t,n.height=o,n.touchChildren=!1,n.touchEnabled=!0,n.image=new eui.Image,n.addChild(n.image),n.updateBG(16777215),n}return __extends(t,e),t.prototype.updateBG=function(e){null==this.bgShape&&(this.bgShape=new egret.Shape,this.addChildAt(this.bgShape,0)),this.bgShape.graphics.beginFill(e,1),this.bgShape.graphics.drawRoundRect(0,0,this.width,this.height,6,6),this.bgShape.graphics.endFill()},t.prototype.updateIcon=function(e,t,o){void 0===t&&(t=20),void 0===o&&(o=20),this.image.source=e,this.image.x=.5*(this.width-t),this.image.y=.5*(this.height-o)},t}(eui.Component);e.IconButton=t,__reflect(t.prototype,"eas.IconButton")}(eas||(eas={}));var eas;!function(e){var t=function(t){function o(o){var n=t.call(this)||this;return n.date=null,n.period=0,n.id=0,n.identify="",n.bgShape=null,n.size=null,n.state=e.ApplyStatus.Idle,n.size=o,n.date=new e.DateInfo(0,0,0,0),n.width=o.x,n.height=o.y,n.image=new eui.Image,n.addChild(n.image),n.createLabel(),n.touchChildren=!1,n.addEventListener(e.MouseEvent.MOUSE_OVER,n.onMouseHandle,n),n.addEventListener(e.MouseEvent.MOUSE_OUT,n.onMouseHandle,n),n}return __extends(o,t),o.prototype.onMouseHandle=function(t){e.AppProxy.getInstance().user.type==e.RoleType.SchoolAdmin&&(this.state==e.ApplyStatus.Idle?t.type==e.MouseEvent.MOUSE_OVER?this.image.source="icon_lock-0_png":this.image.source="icon_lock-1_png":this.state==e.ApplyStatus.Freeze&&(t.type==e.MouseEvent.MOUSE_OVER?this.image.source="icon_locked-1_png":this.image.source="icon_locked-0_png"))},o.prototype.createLabel=function(){this.label=new eui.Label,this.label.percentWidth=100,this.label.percentHeight=100,this.label.textColor=0,this.label.size=26,this.label.textAlign=egret.HorizontalAlign.CENTER,this.label.verticalAlign=egret.VerticalAlign.MIDDLE,this.addChild(this.label)},o.prototype.updateBG=function(e){null==this.bgShape&&(this.bgShape=new egret.Shape,this.addChildAt(this.bgShape,0)),this.bgShape.graphics.beginFill(e,1),this.bgShape.graphics.drawRoundRect(0,0,this.size.x,this.size.y,5,5),this.bgShape.graphics.endFill()},o.prototype.updateStatus=function(t,o){void 0===o&&(o=""),this.state=t,t==e.ApplyStatus.Discard?(this.touchEnabled=!1,this.image.visible=!1,this.label.text=o,this.updateBG(14146013)):t==e.ApplyStatus.Freeze?(e.AppProxy.getInstance().user.type==e.RoleType.Teacher?this.touchEnabled=!1:this.touchEnabled=!0,this.image.visible=!0,this.image.source="icon_locked-0_png",this.updateBG(14146013)):t==e.ApplyStatus.Idle?(this.touchEnabled=!0,this.image.visible=!0,e.AppProxy.getInstance().user.type==e.RoleType.Teacher?this.image.source="icon_add-0_png":this.image.source="icon_lock-1_png",this.updateBG(16777215)):t==e.ApplyStatus.Used?(this.touchEnabled=!0,this.image.visible=!1,this.label.text=o,this.updateBG(16777215)):t==e.ApplyStatus.Order&&(this.touchEnabled=!0,this.image.source="icon_msg-0_png",this.image.visible=!0,this.updateBG(16076880)),this.image.x=.5*(this.size.x-this.image.width),this.image.y=.5*(this.size.y-this.image.height)},o}(eui.Component);e.RoomCell=t,__reflect(t.prototype,"eas.RoomCell")}(eas||(eas={}));var eas;!function(e){var t=function(t){function o(){var o=t.call(this,e.WindowType.Alert)||this;return o.sureButton=null,o.cancelButton=null,o.tipLabel=null,o.skinName="resource/zui_skins/AlertWindow.exml",o}return __extends(o,t),o.prototype.init=function(){t.prototype.init.call(this),this.sureButton.addEventListener(egret.TouchEvent.TOUCH_TAP,this.onButtonClick,this),this.cancelButton.addEventListener(egret.TouchEvent.TOUCH_TAP,this.onButtonClick,this),this.title=e.LocalManager.getPopupwin("Window.Alert.Title"),this.sureButton.label=e.LocalManager.getPopupwin("Button.Name.Sure"),this.cancelButton.label=e.LocalManager.getPopupwin("Button.Name.Cancel")},o.prototype.opened=function(){this.tipLabel.text=this.param.tip},o.prototype.onButtonClick=function(t){if(this.sureButton==t.currentTarget){var n=new egret.Event(o.EVENT_ALERT_SURE,!0,!1,this.param);this.dispatchEvent(n)}else e.UIManager.getInstance().closeWindow()},o.EVENT_ALERT_CANCEL="alertEventCancel",o.EVENT_ALERT_SURE="alertEventSure",o}(e.AppWindow);e.AlertWindow=t,__reflect(t.prototype,"eas.AlertWindow")}(eas||(eas={}));var eas;!function(e){var t=function(t){function o(){return t.call(this,e.WindowType.ApplyInfo)||this}return __extends(o,t),o.prototype.init=function(){t.prototype.init.call(this),this.title=e.LocalManager.getPopupwin("Apply.Info.Title"),this.dateLabel.text=e.LocalManager.getPopupwin("Apply.Info.Date"),this.timeLabel.text=e.LocalManager.getPopupwin("Apply.Info.Period"),this.authorLabel.text=e.LocalManager.getPopupwin("Apply.Info.Author"),this.courseLabel.text=e.LocalManager.getPopupwin("Apply.Info.Course")},o.prototype.opened=function(){e.AppProxy.getInstance().user.type==e.RoleType.Teacher?(this.agreeButton.visible=!1,this.refuseButton.visible=!1):(this.agreeButton.visible=!0,this.refuseButton.visible=!0),e.LogUtil.info("ApplyInfoWindow is opened!!!");var t=e.AppProxy.getInstance().classroom.getApplyInfo(this.param.uid);if(t){this.dateInput.text=t.date.toString()+e.LocalManager.getPopupwin("Week.Name."+t.date.week),this.timeInput.text=t.period+"";var o=e.AppProxy.getInstance().getDefSchool().getTeacher(t.applicant);this.dateInput.enabled=!1,this.timeInput.enabled=!1,this.authorInput.enabled=!1,o?this.authorInput.text=o.name:this.authorInput.text=""}},o.prototype.onTouchButton=function(t){t.target==this.agreeButton?e.AppProxy.getInstance().classroom.tryAggreeApply(this.param.uid):t.target==this.refuseButton&&e.AppProxy.getInstance().classroom.tryRefuseApply(this.param.uid)},o}(e.AppWindow);e.ApplyInfoWindow=t,__reflect(t.prototype,"eas.ApplyInfoWindow")}(eas||(eas={}));var eas;!function(e){var t=function(t){function o(){var o=t.call(this,e.WindowType.ApplyRoom)||this;return o.itemGroup=null,o.pageGroup=null,o.optGroup=null,o.dateLabel=null,o.submitButton=null,o.courseBox=null,o.gradeDrop=null,o.subjectDrop=null,o.classDraop=null,o.selectedCourses=[],o.skinName="resource/zui_skins/ApplyRoomWindow.exml",o}return __extends(o,t),o.prototype.init=function(){t.prototype.init.call(this),this.titleLabel.text=e.LocalManager.getPopupwin("Apply.Room.Title"),this.courseBox=new e.CoursePageBox(e.PartType.CourseApply,this.optGroup,this.itemGroup,this.pageGroup),this.courseBox.setPaper(!0);var o=e.SubjectManager.getInstance().allGrades;this.gradeDrop=new e.DropDown(0,0,e.LocalManager.getPopupwin("Dropdown.Label.Grade"),o),this.gradeDrop.addEventListener(e.DropDown.EVENT_SELECTED,this.onSelectGrade,this),this.subjectDrop=new e.DropDown(0,0,e.LocalManager.getPopupwin("Dropdown.Label.Subject"),[]),this.subjectDrop.addEventListener(e.DropDown.EVENT_SELECTED,this.onSelectSubject,this),this.classDraop=new e.DropDown(0,0,e.LocalManager.getPopupwin("Dropdown.Label.Class"),[]),this.classDraop.addEventListener(e.DropDown.EVENT_SELECTED,this.onSelectClass,this),this.optGroup.addChild(this.gradeDrop),this.optGroup.addChild(this.subjectDrop),this.optGroup.addChild(this.classDraop),this.submitButton.label=e.LocalManager.getPopupwin("Button.Name.Submit"),this.submitButton.addEventListener(egret.TouchEvent.TOUCH_TAP,this.onSubmitHandle,this)},o.prototype.opened=function(){var t=this.param.data,o=e.LocalManager.getPopupwin("Date.Full.Tip",[t.year,t.month,t.day,this.param.count+1]);this.dateLabel.text=o,e.LogUtil.info("ApplyRoomWindow is opened!!!")},o.prototype.onSelectGrade=function(t){var o=e.SubjectManager.getInstance().getSubjects(this.gradeDrop.selectedValue.id);this.subjectDrop.updateSource(o);var n=e.AppProxy.getInstance().getDefSchool().getClasses(this.gradeDrop.selectedValue.id);this.classDraop.updateSource(n)},o.prototype.onSelectSubject=function(e){this.updateItems(this.gradeDrop.selectedValue.id,this.subjectDrop.selectedValue.id)},o.prototype.onSelectClass=function(e){},o.prototype.onSubmitHandle=function(t){var o=new e.ApplyRoomInfo;if(!this.classDraop.selectedValue)return void alert(e.LocalManager.getException("Alert.Classes.First"));o.classID=this.classDraop.selectedValue.id,o.date=this.param.data,o.period=this.param.count,o.applicant=e.AppProxy.getInstance().user.uid;for(var n=0,a=this.selectedCourses;n<a.length;n++){var r=a[n];e.AppProxy.getInstance().getDefTeacher().getPapers(r);o.addCourse(r)}e.AppProxy.getInstance().classroom.tryOrderApply(o)},o.prototype.updateItems=function(t,o){var n=e.AppProxy.getInstance().practice.getPractices(t,o);this.courseBox.updateData(n)},o}(e.AppWindow);e.ApplyRoomWindow=t,__reflect(t.prototype,"eas.ApplyRoomWindow")}(eas||(eas={}));var eas;!function(e){var t=function(t){function o(){var o=t.call(this,e.WindowType.PaperCreate)||this;return o.itemGroup=null,o.pageGroup=null,o.optGroup=null,o.practiceBox=null,o.gradeDrop=null,o.subjectDrop=null,o.courseDrop=null,o.skinName="resource/zui_skins/PaperCreateWindow.exml",o}return __extends(o,t),o.prototype.init=function(){t.prototype.init.call(this),this.titleLabel.text=e.LocalManager.getPopupwin("Paper.Create.Title"),this.practiceBox=new e.PracticePageBox(e.PartType.PracticeView,this.optGroup,this.itemGroup,this.pageGroup),this.practiceBox.appear();var o=e.LocalManager.getPopupwin("Dropdown.Label.Default"),n=e.SubjectManager.getInstance().allGrades;this.gradeDrop=new e.DropDown(0,0,o,n),this.gradeDrop.addEventListener(e.DropDown.EVENT_SELECTED,this.onSelectGrade,this),this.subjectDrop=new e.DropDown(0,0,o,[]),this.subjectDrop.addEventListener(e.DropDown.EVENT_SELECTED,this.onSelectSubject,this),this.courseDrop=new e.DropDown(0,0,o,[]),this.courseDrop.addEventListener(e.DropDown.EVENT_SELECTED,this.onSelectCourse,this),this.optGroup.addChild(this.courseDrop)},o.prototype.opened=function(){if(e.LogUtil.info("PaperCreateWindow is opened!!!"),e.MathUtil.isNullOrWhiteSpace(this.param.uid))this.optGroup.addChildAt(this.subjectDrop,0),this.optGroup.addChildAt(this.gradeDrop,0);else{var t=[],o=e.AppProxy.getInstance().course.getCourse(this.param.uid);null!=o&&t.push(o),this.courseDrop.updateSource(t);var n=e.AppProxy.getInstance().practice.getPracticesByCourse(o.uid);this.practiceBox.updateData(n),this.optGroup.contains(this.gradeDrop)&&this.optGroup.removeChild(this.gradeDrop),this.optGroup.contains(this.subjectDrop)&&this.optGroup.removeChild(this.subjectDrop)}},o.prototype.onSelectGrade=function(t){var o=e.SubjectManager.getInstance().getSubjects(this.gradeDrop.selectedValue.id);this.subjectDrop.updateSource(o),this.updateItems(this.gradeDrop.selectedValue.id,this.subjectDrop.selectedValue.uid)},o.prototype.onSelectSubject=function(e){this.updateItems(this.gradeDrop.selectedValue.id,this.subjectDrop.selectedValue.uid)},o.prototype.onSelectCourse=function(t){if(e.MathUtil.isNullOrWhiteSpace(this.param.uid)){var o=e.AppProxy.getInstance().course.getCourses(this.gradeDrop.selectedValue.id,this.subjectDrop.selectedValue.uid);this.courseDrop.updateSource(o);var n=e.AppProxy.getInstance().practice.getPracticesByCourse(this.courseDrop.selectedValue.uid);this.practiceBox.updateData(n)}},o.prototype.updateItems=function(t,o){var n=e.AppProxy.getInstance().practice.getPractices(t,o);this.practiceBox.updateData(n)},o}(e.AppWindow);e.PaperCreateWindow=t,__reflect(t.prototype,"eas.PaperCreateWindow")}(eas||(eas={}));